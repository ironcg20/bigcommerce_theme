(self["webpackChunkRoots"] = self["webpackChunkRoots"] || []).push([["vendors-node_modules_jstree_dist_jstree_min_js"],{

/***/ "./node_modules/jstree/dist/jstree.min.js":
/*!************************************************!*\
  !*** ./node_modules/jstree/dist/jstree.min.js ***!
  \************************************************/
/***/ ((module, exports, __webpack_require__) => {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jsTree - v3.3.16 - 2023-09-19 - (MIT) */

!function(e){"use strict"; true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):0}(function(E,P){"use strict";if(!E.jstree){var s=0,a=!1,n=!1,o=!1,r=[],e=E("script:last").attr("src"),b=window.document,c=window.setImmediate,i=window.Promise;!c&&i&&(c=function(e,t){i.resolve(t).then(e)}),E.jstree={version:"3.3.16",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},E.jstree.create=function(e,i){var r=new E.jstree.core(++s),t=i;return i=E.extend(!0,{},E.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),E.each(i.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,i[t]))}),E(e).data("jstree",r),r.init(e,i),r},E.jstree.destroy=function(){E(".jstree:jstree").jstree("destroy"),E(b).off(".jstree")},E.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},E.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=E(t)}catch(e){}if(!e||!e.length)try{e=E("#"+t.replace(E.jstree.idregex,"\\$&"))}catch(e){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:E(".jstree").each(function(){var e=E(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},E.fn.jstree=function(i){var r="string"==typeof i,s=Array.prototype.slice.call(arguments,1),a=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=E.jstree.reference(this),t=r&&e?e[i]:null;if(a=r&&t?t.apply(e,s):null,e||r||i!==P&&!E.isPlainObject(i)||E.jstree.create(this,i),null!==(a=e&&!r||!0===i?e||!1:a)&&a!==P)return!1}),null!==a&&a!==P?a:this)},E.expr.pseudos.jstree=E.expr.createPseudo(function(e){return function(e){return E(e).hasClass("jstree")&&E(e).data("jstree")!==P}}),E.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:E.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,compute_elements_positions:!1,keyboard:{"ctrl-space":function(e){e.type="click",E(e.currentTarget).trigger(e)},enter:function(e){e.type="click",E(e.currentTarget).trigger(e)},left:function(e){var e;e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(e=this.get_parent(e.currentTarget))&&e.id!==E.jstree.root&&this.get_node(e,!0).children(".jstree-anchor").trigger("focus")},up:function(e){e.preventDefault();var e=this.get_prev_dom(e.currentTarget);e&&e.length&&e.children(".jstree-anchor").trigger("focus")},right:function(e){var e;e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").trigger("focus")}):!this.is_open(e.currentTarget)||(e=this.get_node(e.currentTarget,!0).children(".jstree-children")[0])&&E(this._firstChild(e)).children(".jstree-anchor").trigger("focus")},down:function(e){e.preventDefault();var e=this.get_next_dom(e.currentTarget);e&&e.length&&e.children(".jstree-anchor").trigger("focus")},"*":function(e){this.open_all()},home:function(e){e.preventDefault();var e=this._firstChild(this.get_container_ul()[0]);e&&E(e).children(".jstree-anchor").filter(":visible").trigger("focus")},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().trigger("focus")},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}},allow_reselect:!1},E.jstree.core.prototype={plugin:function(e,t){var i=E.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[E.jstree.root]={id:E.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=E(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(E.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e=b.createElement("LI"),t,i;return e.setAttribute("role","none"),(t=b.createElement("I")).className="jstree-icon jstree-ocl",t.setAttribute("role","presentation"),e.appendChild(t),(t=b.createElement("A")).className="jstree-anchor",t.setAttribute("href","#"),t.setAttribute("tabindex","-1"),t.setAttribute("role","treeitem"),(i=b.createElement("I")).className="jstree-icon jstree-themeicon",i.setAttribute("role","presentation"),t.appendChild(i),e.appendChild(t),t=i=null,e},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},i=[];if(e.ctrlKey&&i.push("ctrl"),e.altKey&&i.push("alt"),e.shiftKey&&i.push("shift"),i.push(t[e.which]?t[e.which].toLowerCase():e.which),"shift-shift"===(i=i.sort().join("-").toLowerCase())||"ctrl-ctrl"===i||"alt-alt"===i)return null;var r=this.settings.core.keyboard,s,a;for(s in r)if(r.hasOwnProperty(s)&&(a="-"!==(a=s)&&"+"!==a?(a=a.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase():a)===i)return r[s];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var s="",a=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(b.selection&&b.selection.empty)b.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}}).on("mousedown.jstree",function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)}.bind(this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",function(e){this.toggle_node(e.target)}.bind(this)).on("dblclick.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)}.bind(this)).on("click.jstree",".jstree-anchor",function(e){e.preventDefault(),e.currentTarget!==b.activeElement&&E(e.currentTarget).trigger("focus"),this.activate_node(e.currentTarget,e)}.bind(this)).on("keydown.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var e=t.call(this,e);if(!1===e||!0===e)return e}}.bind(this)).on("load_node.jstree",function(e,t){t.status&&(t.node.id!==E.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var e=[],t,i,t=0,i=this._data.core.selected.length;t<i;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);for(t=0,i=(e=E.vakata.array_unique(e)).length;t<i;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}}.bind(this),0))}.bind(this)).on("keypress.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;a&&clearTimeout(a),a=setTimeout(function(){s=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),e=t.index(b.activeElement)||0,r=!1;if(1<(s+=i).length){if(t.slice(e).each(function(e,t){if(0===E(t).text().toLowerCase().indexOf(s))return E(t).trigger("focus"),!(r=!0)}.bind(this)),r)return;if(t.slice(0,e).each(function(e,t){if(0===E(t).text().toLowerCase().indexOf(s))return E(t).trigger("focus"),!(r=!0)}.bind(this)),r)return}new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(s)&&(t.slice(e+1).each(function(e,t){if(E(t).text().toLowerCase().charAt(0)===i)return E(t).trigger("focus"),!(r=!0)}.bind(this)),r||t.slice(0,e+1).each(function(e,t){if(E(t).text().toLowerCase().charAt(0)===i)return E(t).trigger("focus"),!(r=!0)}.bind(this)))}.bind(this)).on("init.jstree",function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)}.bind(this)).on("loading.jstree",function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()}.bind(this)).on("blur.jstree",".jstree-anchor",function(e){this._data.core.focused=null,E(e.currentTarget).filter(".jstree-hovered").trigger("mouseleave"),this.element.attr("tabindex","0"),E(e.currentTarget).attr("tabindex","-1")}.bind(this)).on("focus.jstree",".jstree-anchor",function(e){var t=this.get_node(e.currentTarget);t&&(t.id||0===t.id)&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).trigger("mouseleave"),E(e.currentTarget).trigger("mouseenter"),this.element.attr("tabindex","-1"),E(e.currentTarget).attr("tabindex","0")}.bind(this)).on("focus.jstree",function(){var e;500<+new Date-t&&!this._data.core.focused&&this.settings.core.restore_focus&&(t=0,(e=this.get_node(this.element.attr("aria-activedescendant"),!0))&&e.find("> .jstree-anchor").trigger("focus"))}.bind(this)).on("mouseenter.jstree",".jstree-anchor",function(e){this.hover_node(e.currentTarget)}.bind(this)).on("mouseleave.jstree",".jstree-anchor",function(e){this.dehover_node(e.currentTarget)}.bind(this))},unbind:function(){this.element.off(".jstree"),E(b).off(".jstree-"+this._id)},trigger:function(e,t){((t=t||{}).instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return E.vakata.is_function(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){e=e?e.firstChild:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_nextSibling:function(e){e=e?e.nextSibling:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_previousSibling:function(e){e=e?e.previousSibling:null;while(null!==e&&1!==e.nodeType)e=e.previousSibling;return e},get_node:function(e,t){var i;(e=e&&(e.id||0===e.id)?e.id:e)instanceof E&&e.length&&e[0].id&&(e=e[0].id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=E("#"+e.replace(E.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=this.element.find(e)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=this.element.find(e)).length||!i.hasClass("jstree"))return!1;e=this._model.data[E.jstree.root]}return e=t?e.id===E.jstree.root?this.element:E("#"+e.id.replace(E.jstree.idregex,"\\$&"),this.element):e}catch(e){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===E.jstree.root||!e.parents)return!1;var r,s,a=[];for(a.push(i?e.id:e.text),r=0,s=e.parents.length;r<s;r++)a.push(i?e.parents[r]:this.get_text(e.parents[r]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this._firstChild(this.get_container_ul()[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);return!!i&&E(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return!!i&&E(i)}if(e.hasClass("jstree-open")){i=this._firstChild(e.children(".jstree-children")[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);if(null!==i)return E(i)}i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return null!==i?E(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this.get_container_ul()[0].lastChild;while(i&&0===i.offsetHeight)i=this._previousSibling(i);return!!i&&E(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);return!!i&&E(i)}i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&E(i);e=E(i);while(e.hasClass("jstree-open"))e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(n,o){var e=this.get_node(n,!0),t,i,r,s,a;if(E.vakata.is_array(n))return this._load_nodes(n.slice(),o),!0;if(!(n=this.get_node(n)))return o&&o.call(this,n,!1),!1;if(n.state.loaded){for(n.state.loaded=!1,r=0,s=n.parents.length;r<s;r++)this._model.data[n.parents[r]].children_d=E.vakata.array_filter(this._model.data[n.parents[r]].children_d,function(e){return-1===E.inArray(e,n.children_d)});for(t=0,i=n.children_d.length;t<i;t++)this._model.data[n.children_d[t]].state.selected&&(a=!0),delete this._model.data[n.children_d[t]];a&&(this._data.core.selected=E.vakata.array_filter(this._data.core.selected,function(e){return-1===E.inArray(e,n.children_d)})),n.children=[],n.children_d=[],a&&this.trigger("changed",{action:"load_node",node:n,selected:this._data.core.selected})}return n.state.failed=!1,n.state.loading=!0,(n.id!==E.jstree.root?e.children(".jstree-anchor"):e).attr("aria-busy",!0),e.addClass("jstree-loading"),this._load_node(n,function(e){(n=this._model.data[n.id]).state.loading=!1,n.state.loaded=e,n.state.failed=!n.state.loaded;for(var t=this.get_node(n,!0),i=0,r=0,s=this._model.data,a=!1,i=0,r=n.children.length;i<r;i++)if(s[n.children[i]]&&!s[n.children[i]].state.hidden){a=!0;break}n.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),a?"#"!==n.id&&t.addClass(n.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),(n.id!==E.jstree.root?t.children(".jstree-anchor"):t).attr("aria-busy",!1),t.removeClass("jstree-loading"),this.trigger("load_node",{node:n,status:e}),o&&o.call(this,n,e)}.bind(this)),!0},_load_nodes:function(e,t,i,r){for(var s=!0,a=function(){this._load_nodes(e,t,!0)},n=this._model.data,o,d,c=[],o=0,d=e.length;o<d;o++)n[e[o]]&&(!n[e[o]].state.loaded&&!n[e[o]].state.failed||!i&&r)&&(this.is_loading(e[o])||this.load_node(e[o],a),s=!1);if(s){for(o=0,d=e.length;o<d;o++)n[e[o]]&&n[e[o]].state.loaded&&c.push(e[o]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(e,t){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var i=[],r=this._model.data,s=r[e.id].children_d,a,n;for(e.state&&!e.state.loaded&&i.push(e.id),a=0,n=s.length;a<n;a++)r[s[a]]&&r[s[a]].state&&!r[s[a]].state.loaded&&i.push(s[a]);i.length?this._load_nodes(i,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(s,a){var e=this.settings.core.data,t,n=function e(){return 3!==this.nodeType&&8!==this.nodeType};return e?E.vakata.is_function(e)?e.call(this,s,function(e){!1===e?a.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](s,"string"==typeof e?E(E.parseHTML(e)).filter(n):e,function(e){a.call(this,e)})}.bind(this)):"object"==typeof e?e.url?(e=E.extend(!0,{},e),E.vakata.is_function(e.url)&&(e.url=e.url.call(this,s)),E.vakata.is_function(e.data)&&(e.data=e.data.call(this,s)),E.ajax(e).done(function(e,t,i){var r=i.getResponseHeader("Content-Type");return r&&-1!==r.indexOf("json")||"object"==typeof e?this._append_json_data(s,e,function(e){a.call(this,e)}):r&&-1!==r.indexOf("html")||"string"==typeof e?this._append_html_data(s,E(E.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))}.bind(this)).fail(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:e})},a.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)}.bind(this))):(t=E.vakata.is_array(e)?E.extend(!0,[],e):E.isPlainObject(e)?E.extend(!0,{},e):e,s.id===E.jstree.root?this._append_json_data(s,t,function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))):"string"==typeof e?s.id===E.jstree.root?this._append_html_data(s,E(E.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1)):a.call(this,!1):s.id===E.jstree.root?this._append_html_data(s,this._data.core.original_container_html.clone(!0),function(e){a.call(this,e)}):a.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&-1===E.inArray(e.id,this._model.changed)&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var t=t.is("ul")?t.children():t,r=e.id,s=[],a=[],n=this._model.data,o=n[r],e=this._data.core.selected.length,d,c,l;for(t.each(function(e,t){(d=this._parse_model_from_html(E(t),r,o.parents.concat()))&&(s.push(d),a.push(d),n[d].children_d.length&&(a=a.concat(n[d].children_d)))}.bind(this)),o.children=s,o.children_d=a,c=0,l=o.parents.length;c<l;c++)n[o.parents[c]].children_d=n[o.parents[c]].children_d.concat(a);this.trigger("model",{nodes:a,parent:r}),r!==E.jstree.root?(this._node_changed(r),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==e&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,d,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),E.vakata.is_array(t)||(t=[t]);var r=null,s={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},v=this,a=function(e,c){var t=(e=e.data?e.data:e).dat,i=e.par,r=[],s=[],l=[],h=e.df,_=e.t_id,g=e.t_cnt,u=e.m,a=u[i],e=e.sel,n,o,d,f,p=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s,a,n,o,d={id:r,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==c&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id||(d.li_attr.id=r),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),s=0,a=(u[d.id]=d).children.length;s<a;s++)n=p(u[d.children[s]],d.id,i),o=u[n],d.children_d.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));return delete e.data,delete e.children,u[d.id].original=e,d.state.selected&&l.push(d.id),d.id},m=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,o,d;do{r="j"+_+"_"+ ++g}while(u[r]);for(s in d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&(e.id||0===e.id)&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==c&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&0!==d.id&&(d.id=d.li_attr.id.toString()),d.id||0===d.id||(d.id=r),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=m(e.children[s],d.id,i),o=u[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,(u[d.id]=d).state.selected&&l.push(d.id),d.id};if(t.length&&t[0].id!==c&&t[0].parent!==c){for(o=0,d=t.length;o<d;o++)t[o].children||(t[o].children=[]),t[o].state||(t[o].state={}),u[t[o].id.toString()]=t[o];for(o=0,d=t.length;o<d;o++)u[t[o].parent.toString()]?(u[t[o].parent.toString()].children.push(t[o].id.toString()),a.children_d.push(t[o].id.toString())):void 0!==v&&(v._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:t[o].id.toString(),parent:t[o].parent.toString()})},v.settings.core.error.call(v,v._data.core.last_error));for(o=0,d=a.children.length;o<d;o++)n=p(u[a.children[o]],i,a.parents.concat()),s.push(n),u[n].children_d.length&&(s=s.concat(u[n].children_d));for(o=0,d=a.parents.length;o<d;o++)u[a.parents[o]].children_d=u[a.parents[o]].children_d.concat(s);f={cnt:g,mod:u,sel:e,par:i,dpc:s,add:l}}else{for(o=0,d=t.length;o<d;o++)(n=m(t[o],i,a.parents.concat()))&&(r.push(n),s.push(n),u[n].children_d.length&&(s=s.concat(u[n].children_d)));for(a.children=r,a.children_d=s,o=0,d=a.parents.length;o<d;o++)u[a.parents[o]].children_d=u[a.parents[o]].children_d.concat(s);f={cnt:g,mod:u,sel:e,par:i,dpc:s,add:l}}if("undefined"!=typeof window&&void 0!==window.document)return f;postMessage(f)},n=function(e,t){if(null!==this.element){var i,r;for(i in this._cnt=e.cnt,r=this._model.data)r.hasOwnProperty(i)&&r[i].state&&r[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var s,a=e.add,n=e.sel,o=this._data.core.selected.slice(),r=this._model.data;if(n.length!==o.length||E.vakata.array_unique(n.concat(o)).length!==n.length){for(i=0,s=n.length;i<s;i++)-1===E.inArray(n[i],a)&&-1===E.inArray(n[i],o)&&(r[n[i]].state.selected=!1);for(i=0,s=o.length;i<s;i++)-1===E.inArray(o[i],n)&&(r[o[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==E.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!t&&c?c(function(){d.call(v,!0)}):d.call(v,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(r=new window.Worker(this._wrk)).onmessage=function(e){n.call(this,e.data,!0);try{r.terminate(),r=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),r.onerror=function(e){n.call(this,a(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),s.par?r.postMessage(s):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,d,!0])}catch(e){n.call(this,a(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else n.call(this,a(s),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var r,s,a=this._model.data,n={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},o,t,d;for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(n.state[o]=this._model.default_state[o]);if(t=E.vakata.attributes(e,!0),E.each(t,function(e,t){return!(t=E.vakata.trim(t)).length||(n.li_attr[e]=t,void("id"===e&&(n.id=t.toString())))}),(t=e.children("a").first()).length&&(t=E.vakata.attributes(t,!0),E.each(t,function(e,t){(t=E.vakata.trim(t)).length&&(n.a_attr[e]=t)})),(t=(e.children("a").first().length?e.children("a").first():e).clone()).children("ins, i, ul").remove(),t=t.html(),t=E("<div></div>").html(t),n.text=this.settings.core.force_text?t.text():t.html(),t=e.data(),n.data=t?E.extend(!0,{},t):null,n.state.opened=e.hasClass("jstree-open"),n.state.selected=e.children("a").hasClass("jstree-clicked"),n.state.disabled=e.children("a").hasClass("jstree-disabled"),n.data&&n.data.jstree)for(o in n.data.jstree)n.data.jstree.hasOwnProperty(o)&&(n.state[o]=n.data.jstree[o]);(t=e.children("a").children(".jstree-themeicon")).length&&(n.icon=!t.hasClass("jstree-themeicon-hidden")&&t.attr("rel")),n.state.icon!==P&&(n.icon=n.state.icon),n.icon!==P&&null!==n.icon&&""!==n.icon||(n.icon=!0),t=e.children("ul").children("li");do{d="j"+this._id+"_"+ ++this._cnt}while(a[d]);return n.id=n.li_attr.id?n.li_attr.id.toString():d,t.length?(t.each(function(e,t){r=this._parse_model_from_html(E(t),n.id,i),s=this._model.data[r],n.children.push(r),s.children_d.length&&(n.children_d=n.children_d.concat(s.children_d))}.bind(this)),n.children_d=n.children_d.concat(n.children)):e.hasClass("jstree-closed")&&(n.state.loaded=!1),n.li_attr.class&&(n.li_attr.class=n.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),n.a_attr.class&&(n.a_attr.class=n.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),(a[n.id]=n).state.selected&&this._data.core.selected.push(n.id),n.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s=this._model.data,a=this._model.default_state,n,o,d,c,l={id:r,text:e.text||"",icon:e.icon===P||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in a)a.hasOwnProperty(n)&&(l.state[n]=a[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==P&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=r),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),n=0,o=(s[l.id]=l).children.length;n<o;n++)c=s[d=this._parse_model_from_flat_json(s[l.children[n]],l.id,i)],l.children_d.push(d),c.children_d.length&&(l.children_d=l.children_d.concat(c.children_d));return delete e.data,delete e.children,s[l.id].original=e,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,o,d=this._model.data,c=this._model.default_state,l;do{r="j"+this._id+"_"+ ++this._cnt}while(d[r]);for(s in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===P||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},c)c.hasOwnProperty(s)&&(l.state[s]=c[s]);if(e&&(e.id||0===e.id)&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==P&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id&&!l.id&&0!==l.id&&(l.id=l.li_attr.id.toString()),l.id||0===l.id||(l.id=r),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)o=d[n=this._parse_model_from_json(e.children[s],l.id,i)],l.children.push(n),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children.concat(l.children_d)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,(d[l.id]=l).state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){for(var e=(this._model.force_full_redraw?this._model.data[E.jstree.root].children:this._model.changed).concat([]),t=b.createElement("UL"),i,r,s,a=this._data.core.focused,r=0,s=e.length;r<s;r++)(i=this.redraw_node(e[r],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&t.appendChild(i);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","presentation"),this.element.empty().append(t)),null!==a&&this.settings.core.restore_focus&&((i=this.get_node(a,!0))&&i.length&&i.children(".jstree-anchor")[0]!==b.activeElement?i.children(".jstree-anchor").trigger("focus"):this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:e})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,r=!1,s=!1,a=b;if(!t)return!1;if(t.id===E.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for((s=a.createElement("UL")).setAttribute("role","group"),s.className="jstree-children",i=0,r=t.children.length;i<r;i++)s.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(s)}},redraw_node:function(e,t,i,r){var s=this.get_node(e),a=!1,n=!1,o=!1,d=!1,c=!1,l=!1,h="",_=b,g=this._model.data,u=!1,f=!1,p=null,m=0,v=0,j=!1,k=!1;if(!s)return!1;if(s.id===E.jstree.root)return this.redraw(!0);if(t=t||0===s.children.length,e=b.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(E.jstree.idregex,"\\$&"):s.id.replace(E.jstree.idregex,"\\$&"))):b.getElementById(s.id))e=E(e),i||((a=e.parent().parent()[0])===this.element[0]&&(a=null),n=e.index()),(t=!t&&s.children.length&&!e.children(".jstree-children").length?!0:t)||(o=e.children(".jstree-children")[0]),u=e.children(".jstree-anchor")[0]===b.activeElement,e.remove();else if(t=!0,!i){if(!(null===(a=s.parent!==E.jstree.root?E("#"+s.parent.replace(E.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&g[s.parent].state.opened))return!1;n=E.inArray(s.id,(null===a?g[E.jstree.root]:g[s.parent]).children)}for(d in e=this._data.core.node.cloneNode(!0),h="jstree-node ",s.li_attr)s.li_attr.hasOwnProperty(d)&&"id"!==d&&("class"!==d?e.setAttribute(d,s.li_attr[d]):h+=s.li_attr[d]);for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),e.childNodes[1].setAttribute("aria-selected",!!s.state.selected),e.childNodes[1].setAttribute("aria-level",s.parents.length),this.settings.core.compute_elements_positions&&(e.childNodes[1].setAttribute("aria-setsize",g[s.parent].children.length),e.childNodes[1].setAttribute("aria-posinset",g[s.parent].children.indexOf(s.id)+1)),s.state.disabled&&e.childNodes[1].setAttribute("aria-disabled",!0),d=0,c=s.children.length;d<c;d++)if(!g[s.children[d]].state.hidden){j=!0;break}if(null!==s.parent&&g[s.parent]&&!s.state.hidden&&(d=E.inArray(s.id,g[s.parent].children),k=s.id,-1!==d))for(d++,c=g[s.parent].children.length;d<c;d++)if((k=!g[g[s.parent].children[d]].state.hidden?g[s.parent].children[d]:k)!==s.id)break;for(c in s.state.hidden&&(h+=" jstree-hidden"),s.state.loading&&(h+=" jstree-loading"),s.state.loaded&&!j?h+=" jstree-leaf":(h+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",e.childNodes[1].setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),k===s.id&&(h+=" jstree-last"),e.id=s.id,e.className=h,h=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":""),s.a_attr)s.a_attr.hasOwnProperty(c)&&("href"===c&&"#"===s.a_attr[c]||("class"!==c?e.childNodes[1].setAttribute(c,s.a_attr[c]):h+=" "+s.a_attr[c]));if(h.length&&(e.childNodes[1].className="jstree-anchor "+h),(s.icon&&!0!==s.icon||!1===s.icon)&&(!1===s.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(_.createTextNode(s.text)):e.childNodes[1].innerHTML+=s.text,t&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for((l=_.createElement("UL")).setAttribute("role","group"),l.className="jstree-children",d=0,c=s.children.length;d<c;d++)l.appendChild(this.redraw_node(s.children[d],t,!0));e.appendChild(l)}if(o&&e.appendChild(o),!i){for(d=0,c=(a=a||this.element[0]).childNodes.length;d<c;d++)if(a.childNodes[d]&&a.childNodes[d].className&&-1!==a.childNodes[d].className.indexOf("jstree-children")){p=a.childNodes[d];break}p||((p=_.createElement("UL")).setAttribute("role","group"),p.className="jstree-children",a.appendChild(p)),n<(a=p).childNodes.length?a.insertBefore(e,a.childNodes[n]):a.appendChild(e),u&&(m=this.element[0].scrollTop,v=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=m,this.element[0].scrollLeft=v)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(function(){this.open_node(s.id,!1,0)}.bind(this),0)),e},open_node:function(e,i,r){var t,s,a,n;if(E.vakata.is_array(e)){for(t=0,s=(e=e.slice()).length;t<s;t++)this.open_node(e[t],i,r);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(r=r===P?this.settings.core.animation:r,this.is_closed(e)?this.is_loaded(e)?(a=this.get_node(e,!0),n=this,a.length&&(r&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(e),r?(this.trigger("before_open",{node:e}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children(".jstree-anchor").attr("aria-expanded",!0).end().children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",n.element&&n.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].childNodes[1].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),a.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),r&&a.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(function(){this.open_node(e,i,r)}.bind(this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,r):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;for(var t,i,r=e.parents,t=0,i=r.length;t<i;t+=1)t!==E.jstree.root&&this.open_node(r[t],!1,0);return E("#"+e.id.replace(E.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,r,s,a;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(!this.is_closed(e)&&(t=t===P?this.settings.core.animation:t,a=(s=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(a.length?t?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children(".jstree-anchor").attr("aria-expanded",!1).end().children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",a.children(".jstree-children").remove(),s.element&&s.trigger("after_close",{node:e})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.children(".jstree-anchor").attr("aria-expanded",!1),a.children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e}))))},toggle_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,r){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var t=e.id===E.jstree.root?this.get_container_ul():this.get_node(e,!0),s,a,n;if(!t.length){for(s=0,a=e.children_d.length;s<a;s++)this.is_closed(this._model.data[e.children_d[s]])&&(this._model.data[e.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:e})}r=r||t,(t=(n=this).is_closed(e)?t.find(".jstree-closed").addBack():t.find(".jstree-closed")).each(function(){n.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,r)},i||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(e,t){if(e=e||E.jstree.root,!(e=this.get_node(e)))return!1;var i=e.id===E.jstree.root?this.get_container_ul():this.get_node(e,!0),r=this,s,a;for(i.length&&(i=this.is_open(e)?i.find(".jstree-open").addBack():i.find(".jstree-open"),E(i.get().reverse()).each(function(){r.close_node(this,t||0)})),s=0,a=e.children_d.length;s<a;s++)this._model.data[e.children_d[s]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==E.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==E.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==P?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){for(var i=this.get_node(e).id,r=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,a=!1,n,o,n=0,o=s.length;n<o;n+=1)s[n]===i&&(a=!a),s[n]===r&&(a=!a),this.is_disabled(s[n])||!a&&s[n]!==i&&s[n]!==r?t.ctrlKey||this.deselect_node(s[n],!0,t):this.is_hidden(s[n])||this.select_node(s[n],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):(t.ctrlKey&&(this._data.core.last_clicked=this.get_node(e)),this.select_node(e,!1,!1,t));else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(!this.settings.core.allow_reselect&&this.is_selected(e)&&1===this._data.core.selected.length||(this.deselect_all(!0),this.select_node(e,!1,!1,t)),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,r){var s,a,n,o;if(E.vakata.is_array(e)){for(a=0,n=(e=e.slice()).length;a<n;a++)this.select_node(e[a],t,i,r);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;s=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),(s=!i?this._open_to(e):s)&&s.length&&s.children(".jstree-anchor").addClass("jstree-clicked").attr("aria-selected",!0),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:r}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:r}))},deselect_node:function(e,t,i){var r,s,a;if(E.vakata.is_array(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.deselect_node(e[r],t,i);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;a=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=E.vakata.array_remove_item(this._data.core.selected,e.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t=this._data.core.selected.concat([]),i,r;for(this._data.core.selected=this._model.data[E.jstree.root].children_d.concat(),i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})},deselect_all:function(e){for(var t=this._data.core.selected.concat([]),i,r,i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.state.selected},get_selected:function(e){return e?E.map(this._data.core.selected,function(e){return this.get_node(e)}.bind(this)):this._data.core.selected.slice()},get_top_selected:function(e){for(var t=this.get_selected(!0),i={},r,s,a,n,r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?E.map(t,function(e){return this.get_node(e)}.bind(this)):t},get_bottom_selected:function(e){for(var t=this.get_selected(!0),i=[],r,s,r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?E.map(i,function(e){return this.get_node(e)}.bind(this)):i},get_state:function(){var e={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},t;for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==E.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&e.core.loaded.push(t),this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(t,i){if(t){if(t.core&&t.core.selected&&t.core.initial_selection===P&&(t.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),t.core){var e,r,s,a,n;if(t.core.loaded)return this.settings.core.loaded_state&&E.vakata.is_array(t.core.loaded)&&t.core.loaded.length?this._load_nodes(t.core.loaded,function(e){delete t.core.loaded,this.set_state(t,i)}):(delete t.core.loaded,this.set_state(t,i)),!1;if(t.core.open)return E.vakata.is_array(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==P&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==P&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return a=this,t.core.initial_selection!==P&&t.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),E.each(t.core.selected,function(e,t){a.select_node(t,!1,!0)})),delete t.core.initial_selection,delete t.core.selected,this.set_state(t,i),!1;for(n in t)t.hasOwnProperty(n)&&"core"!==n&&-1===E.inArray(n,this.settings.plugins)&&delete t[n];if(E.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return E.isEmptyObject(t)?(t=null,i&&i.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&E.vakata.is_function(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[E.jstree.root]={id:E.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(E.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(E.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===E.jstree.root)return!1;var i=[],e=[],r=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,function(e){this.open_node(i,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})}.bind(this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;var i,r,s=this._model.data,a=e.id;for(t=t.toString(),s[e.parent].children[E.inArray(e.id,s[e.parent].children)]=t,i=0,r=e.parents.length;i<r;i++)s[e.parents[i]].children_d[E.inArray(e.id,s[e.parents[i]].children_d)]=t;for(i=0,r=e.children.length;i<r;i++)s[e.children[i]].parent=t;for(i=0,r=e.children_d.length;i<r;i++)s[e.children_d[i]].parents[E.inArray(e.id,s[e.children_d[i]].parents)]=t;return-1!==(i=E.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete s[e.id],e.id=t,s[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,new:e.id,old:a}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.text},set_text:function(e,t){var i,r;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),!0)},get_json:function(e,t,i){if(!(e=this.get_node(e||E.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:E.extend(!0,{},e.li_attr),a_attr:E.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&E.extend(!0,E.vakata.is_array(e.data)?[]:{},e.data)},s,a;if(t&&t.flat?r.parent=e.parent:r.children=[],t&&t.no_state)delete r.state;else for(s in e.state)e.state.hasOwnProperty(s)&&(r.state[s]=e.state[s]);if(t&&t.no_li_attr&&delete r.li_attr,t&&t.no_a_attr&&delete r.a_attr,t&&t.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),t&&t.flat&&e.id!==E.jstree.root&&i.push(r),!t||!t.no_children)for(s=0,a=e.children.length;s<a;s++)t&&t.flat?this.get_json(e.children[s],t,i):r.children.push(this.get_json(e.children[s],t));return t&&t.flat?i:e.id===E.jstree.root?r.children:r},create_node:function(e,t,i,r,s){if(null===e&&(e=E.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===P?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,r,!0)});var a,n,o,d;switch((t="string"==typeof(t=t||{text:this.get_string("New node")})?{text:t}:E.extend(!0,{},t)).text===P&&(t.text=this.get_string("New node")),i=e.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":a=this.get_node(e.parent),i=E.inArray(e.id,a.children),e=a;break;case"after":a=this.get_node(e.parent),i=E.inArray(e.id,a.children)+1,e=a;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i=i||0}if(i>e.children.length&&(i=e.children.length),t.id===P&&(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(a=this.get_node(t),(n=[]).push(t),n=n.concat(a.children_d),this.trigger("model",{nodes:n,parent:e.id}),e.children_d=e.children_d.concat(n),o=0,d=e.parents.length;o<d;o++)this._model.data[e.parents[o]].children_d=this._model.data[e.parents[o]].children_d.concat(n);for(t=a,a=[],o=0,d=e.children.length;o<d;o++)a[i<=o?o+1:o]=e.children[o];return a[i]=t.id,e.children=a,this.redraw_node(e,!0),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),r&&r.call(this,this.get_node(t)),t.id},rename_node:function(e,t){var i,r,s;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(s=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var t,i,r,s,a,n,o,d,c,l,h,s;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;if(r=this.get_node(e.parent),s=E.inArray(e.id,r.children),l=!1,!this.check("delete_node",e,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=E.vakata.array_remove(r.children,s)),(a=e.children_d.concat([])).push(e.id),n=0,o=e.parents.length;n<o;n++)this._model.data[e.parents[n]].children_d=E.vakata.array_filter(this._model.data[e.parents[n]].children_d,function(e){return-1===E.inArray(e,a)});for(d=0,c=a.length;d<c;d++)if(this._model.data[a[d]].state.selected){l=!0;break}for(l&&(this._data.core.selected=E.vakata.array_filter(this._data.core.selected,function(e){return-1===E.inArray(e,a)})),this.trigger("delete_node",{node:e,parent:r.id}),l&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:r.id}),d=0,c=a.length;d<c;d++)delete this._model.data[a[d]];return-1!==E.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,h=this.element[0].scrollTop,s=this.element[0].scrollLeft,r.id===E.jstree.root?this._model.data[E.jstree.root].children[0]&&this.get_node(this._model.data[E.jstree.root].children[0],!0).children(".jstree-anchor").trigger("focus"):this.get_node(r,!0).children(".jstree-anchor").trigger("focus"),this.element[0].scrollTop=h,this.element[0].scrollLeft=s),this.redraw_node(r,!0),!0},check:function(e,t,i,r,s){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var a=e.match(/^(move_node|copy_node|create_node)$/i)?i:t,n=this.settings.core.check_callback;if("move_node"===e||"copy_node"===e){if(!(s&&s.is_multi||"move_node"!==e||E.inArray(t.id,i.children)!==r))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_08",reason:"Moving node to its current position",data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(!(s&&s.is_multi||t.id!==i.id&&("move_node"!==e||E.inArray(t.id,i.children)!==r)&&-1===E.inArray(i.id,t.children_d)))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})}return(a=a&&a.data?a.data:a)&&a.functions&&(!1===a.functions[e]||!0===a.functions[e])?(!1===a.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),a.functions[e]):!(!1===n||E.vakata.is_function(n)&&!1===n.call(this,e,t,i,r,s)||n&&!1===n[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,r,s,a,n){var o,d,c,l,h,_,g,u,f,p,m,v,j,k;if(t=this.get_node(t),i=i===P?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,r,!0,!1,n)});if(E.vakata.is_array(e)){if(1!==e.length){for(o=0,d=e.length;o<d;o++)(f=this.move_node(e[o],t,i,r,s,!1,n))&&(t=f,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==P?e:this.get_node(e))||e.id===E.jstree.root)return!1;if(c=(e.parent||E.jstree.root).toString(),h=i.toString().match(/^(before|after)$/)&&t.id!==E.jstree.root?this.get_node(t.parent):t,g=!(_=n||(this._model.data[e.id]?this:E.jstree.reference(e.id)))||!_._id||this._id!==_._id,l=_&&_._id&&c&&_._model.data[c]&&_._model.data[c].children?E.inArray(e.id,_._model.data[c].children):-1,_&&_._id&&(e=_._model.data[e.id]),g)return!!(f=this.copy_node(e,t,i,r,s,!1,n))&&(_&&_.delete_node(e),f);switch(i=t.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=E.inArray(t.id,h.children);break;case"after":i=E.inArray(t.id,h.children)+1;break;case"inside":case"first":i=0;break;case"last":i=h.children.length;break;default:i=i||0}if(i>h.children.length&&(i=h.children.length),!this.check("move_node",e,h,i,{core:!0,origin:n,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===h.id){for(u=h.children.concat(),-1!==(f=E.inArray(e.id,u))&&(u=E.vakata.array_remove(u,f),f<i&&i--),f=[],p=0,m=u.length;p<m;p++)f[i<=p?p+1:p]=u[p];f[i]=e.id,h.children=f,this._node_changed(h.id),this.redraw(h.id===E.jstree.root)}else{for((f=e.children_d.concat()).push(e.id),p=0,m=e.parents.length;p<m;p++){for(u=[],v=0,j=(k=_._model.data[e.parents[p]].children_d).length;v<j;v++)-1===E.inArray(k[v],f)&&u.push(k[v]);_._model.data[e.parents[p]].children_d=u}for(_._model.data[c].children=E.vakata.array_remove_item(_._model.data[c].children,e.id),p=0,m=h.parents.length;p<m;p++)this._model.data[h.parents[p]].children_d=this._model.data[h.parents[p]].children_d.concat(f);for(u=[],p=0,m=h.children.length;p<m;p++)u[i<=p?p+1:p]=h.children[p];for(u[i]=e.id,h.children=u,h.children_d.push(e.id),h.children_d=h.children_d.concat(e.children_d),e.parent=h.id,(f=h.parents.concat()).unshift(h.id),k=e.parents.length,f=(e.parents=f).concat(),p=0,m=e.children_d.length;p<m;p++)this._model.data[e.children_d[p]].parents=this._model.data[e.children_d[p]].parents.slice(0,-1*k),Array.prototype.push.apply(this._model.data[e.children_d[p]].parents,f);c!==E.jstree.root&&h.id!==E.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(h.id)),a||this.redraw()}return r&&r.call(this,e,h,i),this.trigger("move_node",{node:e,parent:h.id,position:i,old_parent:c,old_position:l,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),e.id},copy_node:function(e,t,i,r,s,a,n){var o,d,c,l,h,_,g,u,f,p,m;if(t=this.get_node(t),i=i===P?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,r,!0,!1,n)});if(E.vakata.is_array(e)){if(1!==e.length){for(o=0,d=e.length;o<d;o++)(l=this.copy_node(e[o],t,i,r,s,!0,n))&&(t=l,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==P?e:this.get_node(e))||e.id===E.jstree.root)return!1;switch(u=(e.parent||E.jstree.root).toString(),f=i.toString().match(/^(before|after)$/)&&t.id!==E.jstree.root?this.get_node(t.parent):t,m=!(p=n||(this._model.data[e.id]?this:E.jstree.reference(e.id)))||!p._id||this._id!==p._id,p&&p._id&&(e=p._model.data[e.id]),i=t.id===E.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=E.inArray(t.id,f.children);break;case"after":i=E.inArray(t.id,f.children)+1;break;case"inside":case"first":i=0;break;case"last":i=f.children.length;break;default:i=i||0}if(i>f.children.length&&(i=f.children.length),!this.check("copy_node",e,f,i,{core:!0,origin:n,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(g=p?p.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===g.id&&delete g.id,!(g=this._parse_model_from_json(g,f.id,f.parents.concat())))return!1;for(l=this.get_node(g),e&&e.state&&!1===e.state.loaded&&(l.state.loaded=!1),(c=[]).push(g),c=c.concat(l.children_d),this.trigger("model",{nodes:c,parent:f.id}),h=0,_=f.parents.length;h<_;h++)this._model.data[f.parents[h]].children_d=this._model.data[f.parents[h]].children_d.concat(c);for(c=[],h=0,_=f.children.length;h<_;h++)c[i<=h?h+1:h]=f.children[h];return c[i]=l.id,f.children=c,f.children_d.push(l.id),f.children_d=f.children_d.concat(l.children_d),f.id===E.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(f.id),a||this.redraw(f.id===E.jstree.root),r&&r.call(this,l,f,i),this.trigger("copy_node",{node:l,original:e,parent:f.id,position:i,old_parent:u,old_position:p&&p._id&&u&&p._model.data[u]&&p._model.data[u].children?E.inArray(e.id,p._model.data[u].children):-1,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),l.id},cut:function(e){if(e=e||this._data.core.selected.concat(),!(e=!E.vakata.is_array(e)?[e]:e).length)return!1;for(var t=[],i,r,s,r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&(i.id||0===i.id)&&i.id!==E.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="move_node",(o=this).trigger("cut",{node:e})},copy:function(e){if(e=e||this._data.core.selected.concat(),!(e=!E.vakata.is_array(e)?[e]:e).length)return!1;for(var t=[],i,r,s,r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&i.id!==P&&i.id!==E.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="copy_node",(o=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:n,node:a,inst:o}},can_paste:function(){return!1!==n&&!1!==a},paste:function(e,t){if(!((e=this.get_node(e))&&n&&n.match(/^(copy_node|move_node)$/)&&a))return!1;this[n](a,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:a,mode:n}),o=n=a=!1},clear_buffer:function(){o=n=a=!1,this.trigger("clear_buffer")},edit:function(r,e,s){var t,i,a,n,o,d,c,t,l,h=!1;return!!(r=this.get_node(r))&&(this.check("edit",r,this.get_parent(r))?(l=r,e="string"==typeof e?e:r.text,this.set_text(r,""),r=this._open_to(r),l.text=e,t=this._data.core.rtl,i=this.element.width(),this._data.core.focused=l.id,a=r.children(".jstree-anchor").trigger("focus"),n=E("<span></span>"),o=e,d=E("<div></div>",{css:{position:"absolute",top:"-200px",left:t?"0px":"-1000px",visibility:"hidden"}}).appendTo(b.body),c=E("<input />",{value:o,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:function(e){e.stopImmediatePropagation(),e.preventDefault();var t,i=n.children(".jstree-rename-input").val(),e=this.settings.core.force_text,e;""===i&&(i=o),d.remove(),n.replaceWith(a),n.remove(),o=e?o:E("<div></div>").append(E.parseHTML(o)).html(),r=this.get_node(r),this.set_text(r,o),(e=!!this.rename_node(r,e?E("<div></div>").text(i).text():E("<div></div>").append(E.parseHTML(i)).html()))||this.set_text(r,o),this._data.core.focused=l.id,setTimeout(function(){var e=this.get_node(l.id,!0);e.length&&(this._data.core.focused=l.id,e.children(".jstree-anchor").trigger("focus"))}.bind(this),0),s&&s.call(this,l,e,h,i),c=null}.bind(this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=o),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){c.width(Math.min(d.text("pW"+this.value).width(),i))},keypress:function(e){if(13===e.which)return!1}}),t={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},n.attr("class",a.attr("class")).append(a.contents().clone()).append(c),a.replaceWith(n),d.css(t),c.css(t).width(Math.min(d.text("pW"+c[0].value).width(),i))[0].select(),void E(b).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){c&&e.target!==c&&E(c).trigger("blur")})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(e,t){if(!e)return!1;var i,i;(t=!0===t?(i=(i=this.settings.core.themes.dir)||E.jstree.path+"/themes")+"/"+e+"/style.css":t)&&-1===E.inArray(t,r)&&(E("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),r.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,r,s,a;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&(a=e.icon,e.icon=!0===t||null===t||t===P||""===t||t,s=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?(s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),this.hide_icon(e)):(!0===t||null===t||t===P||""===t?s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"):-1===t.indexOf("/")&&-1===t.indexOf(".")?(s.removeClass(a).css("background",""),s.addClass(t+" jstree-themeicon-custom").attr("rel",t)):(s.removeClass(a).css("background",""),s.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)),!1===a&&this.show_icon(e)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===E.jstree.root)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===E.jstree.root)&&(r=this.get_node(e,!0),e.icon=!r.length||r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},E.vakata={},E.vakata.attributes=function(e,i){e=E(e)[0];var r=i?{}:[];return e&&e.attributes&&E.each(e.attributes,function(e,t){-1===E.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==E.vakata.trim(t.value)&&(i?r[t.name]=t.value:r.push(t.name))}),r},E.vakata.array_unique=function(e){for(var t=[],i,r,s,a={},i=0,s=e.length;i<s;i++)a[e[i]]===P&&(t.push(e[i]),a[e[i]]=!0);return t},E.vakata.array_remove=function(e,t){return e.splice(t,1),e},E.vakata.array_remove_item=function(e,t){var t=E.inArray(t,e);return-1!==t?E.vakata.array_remove(e,t):e},E.vakata.array_filter=function(e,t,i,r,s){if(e.filter)return e.filter(t,i);for(s in r=[],e)~~s+""==s+""&&0<=s&&t.call(i,e[s],+s,e)&&r.push(e[s]);return r},E.vakata.trim=function(e){return String.prototype.trim?String.prototype.trim.call(e.toString()):e.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},E.vakata.is_function=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},E.vakata.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Function.prototype.bind||(Function.prototype.bind=function(){var t=this,i=arguments[0],r=Array.prototype.slice.call(arguments,1);if("function"!=typeof t)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){var e=r.concat(Array.prototype.slice.call(arguments));return t.apply(i,e)}}),E.jstree.plugins.changed=function(e,a){var n=[];this.trigger=function(e,t){var i,r;if(t=t||{},"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};for(var s={},i=0,r=n.length;i<r;i++)s[n[i]]=1;for(i=0,r=t.selected.length;i<r;i++)s[t.selected[i]]?s[t.selected[i]]=2:t.changed.selected.push(t.selected[i]);for(i=0,r=n.length;i<r;i++)1===s[n[i]]&&t.changed.deselected.push(n[i]);n=t.selected.slice()}a.trigger.call(this,e,t)},this.refresh=function(e,t){return n=[],a.refresh.apply(this,arguments)}};var l=b.createElement("I"),h,_,g,d,u,f,p,w;l.className="jstree-icon jstree-checkbox",l.setAttribute("role","presentation"),E.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},E.jstree.plugins.checkbox=function(e,d){this.bind=function(){d.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}.bind(this)).on("loading.jstree",function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)}.bind(this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",function(e,t){for(var i=this._model.data,r=i[t.parent],s=t.nodes,a,n,a=0,n=s.length;a<n;a++)i[s[a]].state.checked=i[s[a]].state.checked||i[s[a]].original&&i[s[a]].original.state&&i[s[a]].original.state.checked,i[s[a]].state.checked&&this._data.checkbox.selected.push(s[a])}.bind(this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",function(e,t){var i=this._model.data,r=i[t.parent],s=t.nodes,a=[],n,o,d,c,l,h,t=this.settings.checkbox.cascade,_=this.settings.checkbox.tie_selection;if(-1!==t.indexOf("down"))if(r.state[_?"selected":"checked"]){for(o=0,d=s.length;o<d;o++)i[s[o]].state[_?"selected":"checked"]=!0;this._data[_?"core":"checkbox"].selected=this._data[_?"core":"checkbox"].selected.concat(s)}else for(o=0,d=s.length;o<d;o++)if(i[s[o]].state[_?"selected":"checked"]){for(c=0,l=i[s[o]].children_d.length;c<l;c++)i[i[s[o]].children_d[c]].state[_?"selected":"checked"]=!0;this._data[_?"core":"checkbox"].selected=this._data[_?"core":"checkbox"].selected.concat(i[s[o]].children_d)}if(-1!==t.indexOf("up")){for(o=0,d=r.children_d.length;o<d;o++)i[r.children_d[o]].children.length||a.push(i[r.children_d[o]].parent);for(c=0,l=(a=E.vakata.array_unique(a)).length;c<l;c++){r=i[a[c]];while(r&&r.id!==E.jstree.root){for(o=n=0,d=r.children.length;o<d;o++)n+=i[r.children[o]].state[_?"selected":"checked"];if(n!==d)break;r.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(r.id),(h=this.get_node(r,!0))&&h.length&&h.children(".jstree-anchor").attr("aria-selected",!0).addClass(_?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}}}this._data[_?"core":"checkbox"].selected=E.vakata.array_unique(this._data[_?"core":"checkbox"].selected)}.bind(this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",function(e,t){var i=this,r=t.node,s=this._model.data,a=this.get_node(r.parent),n,o,d,c,t=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection,h={},_=this._data[l?"core":"checkbox"].selected;for(n=0,o=_.length;n<o;n++)h[_[n]]=!0;if(-1!==t.indexOf("down"))for(var g=this._cascade_new_checked_state(r.id,!0),u=r.children_d.concat(r.id),n=0,o=u.length;n<o;n++)-1<g.indexOf(u[n])?h[u[n]]=!0:delete h[u[n]];if(-1!==t.indexOf("up"))while(a&&a.id!==E.jstree.root){for(n=d=0,o=a.children.length;n<o;n++)d+=s[a.children[n]].state[l?"selected":"checked"];if(d!==o)break;a.state[l?"selected":"checked"]=!0,h[a.id]=!0,(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}for(n in _=[],h)h.hasOwnProperty(n)&&_.push(n);this._data[l?"core":"checkbox"].selected=_}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",function(e,t){for(var i=this.get_node(E.jstree.root),r=this._model.data,s,a,n,s=0,a=i.children_d.length;s<a;s++)(n=r[i.children_d[s]])&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",function(e,t){var i=this,r=t.node,s=this.get_node(r,!0),a,n,o,d=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection,t=this._data[c?"core":"checkbox"].selected,l={},h=[],_=r.children_d.concat(r.id),g,t;if(-1!==d.indexOf("down")&&(g=this._cascade_new_checked_state(r.id,!1),t=E.vakata.array_filter(t,function(e){return-1===_.indexOf(e)||-1<g.indexOf(e)})),-1!==d.indexOf("up")&&-1===t.indexOf(r.id)){for(a=0,n=r.parents.length;a<n;a++)(o=this._model.data[r.parents[a]]).state[c?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(r.parents[a],!0))&&o.length&&o.children(".jstree-anchor").attr("aria-selected",!1).removeClass(c?"jstree-clicked":"jstree-checked");t=E.vakata.array_filter(t,function(e){return-1===r.parents.indexOf(e)})}this._data[c?"core":"checkbox"].selected=t}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",function(e,t){var i=this.get_node(t.parent),r=this._model.data,s,a,n,o,d=this.settings.checkbox.tie_selection;while(i&&i.id!==E.jstree.root&&!i.state[d?"selected":"checked"]){for(s=n=0,a=i.children.length;s<a;s++)n+=r[i.children[s]].state[d?"selected":"checked"];if(!(0<a&&n===a))break;i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.children(".jstree-anchor").attr("aria-selected",!0).addClass(d?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}}.bind(this)).on("move_node.jstree",function(e,t){var i=t.is_multi,r=t.old_parent,t=this.get_node(t.parent),s=this._model.data,a,n,o,d,c,l=this.settings.checkbox.tie_selection;if(!i){a=this.get_node(r);while(a&&a.id!==E.jstree.root&&!a.state[l?"selected":"checked"]){for(o=n=0,d=a.children.length;o<d;o++)n+=s[a.children[o]].state[l?"selected":"checked"];if(!(0<d&&n===d))break;a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}}a=t;while(a&&a.id!==E.jstree.root){for(o=n=0,d=a.children.length;o<d;o++)n+=s[a.children[o]].state[l?"selected":"checked"];if(n===d)a.state[l?"selected":"checked"]||(a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"));else{if(!a.state[l?"selected":"checked"])break;a.state[l?"selected":"checked"]=!1,this._data[l?"core":"checkbox"].selected=E.vakata.array_remove_item(this._data[l?"core":"checkbox"].selected,a.id),(c=this.get_node(a,!0))&&c.length&&c.children(".jstree-anchor").attr("aria-selected",!1).removeClass(l?"jstree-clicked":"jstree-checked")}a=this.get_node(a.parent)}}.bind(this))},this.get_undetermined=function(e){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];for(var i,r,s,a,n={},o=this._model.data,t=this.settings.checkbox.tie_selection,d=this._data[t?"core":"checkbox"].selected,c=[],l=this,h=[],i=0,r=d.length;i<r;i++)if(o[d[i]]&&o[d[i]].parents)for(s=0,a=o[d[i]].parents.length;s<a;s++){if(n[o[d[i]].parents[s]]!==P)break;o[d[i]].parents[s]!==E.jstree.root&&(n[o[d[i]].parents[s]]=!0,c.push(o[d[i]].parents[s]))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e=l.get_node(this),t;if(e)if(e.state.loaded){for(i=0,r=e.children_d.length;i<r;i++)if(!(t=o[e.children_d[i]]).state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(n[t.id]===P&&t.id!==E.jstree.root&&(n[t.id]=!0,c.push(t.id)),s=0,a=t.parents.length;s<a;s++)n[t.parents[s]]===P&&t.parents[s]!==E.jstree.root&&(n[t.parents[s]]=!0,c.push(t.parents[s]))}else if(e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(n[e.id]===P&&e.id!==E.jstree.root&&(n[e.id]=!0,c.push(e.id)),s=0,a=e.parents.length;s<a;s++)n[e.parents[s]]===P&&e.parents[s]!==E.jstree.root&&(n[e.parents[s]]=!0,c.push(e.parents[s]))}),i=0,r=c.length;i<r;i++)o[c[i]].state[t?"selected":"checked"]||h.push(e?o[c[i]]:c[i]);return h},this._undetermined=function(){if(null!==this.element){var e=this.get_undetermined(!1),t,i,r;for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,i=e.length;t<i;t++)(r=this.get_node(e[t],!0))&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,r){if(e=d.redraw_node.apply(this,arguments)){for(var s,a,n=null,o=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(n.className+=" jstree-checked"),o=l.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(o.className+=" jstree-checkbox-disabled"),n.insertBefore(o,n.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t=this.settings.checkbox.cascade,i,r,s=this.settings.checkbox.tie_selection,a=this._data[s?"core":"checkbox"].selected,n=this._model.data;if(!e||!0===e.state[s?"selected":"checked"]||-1===t.indexOf("undetermined")||-1===t.indexOf("down")&&-1===t.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(i=0,r=e.children_d.length;i<r;i++)if(-1!==E.inArray(e.children_d[i],a)||!n[e.children_d[i]].state.loaded&&n[e.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,r;if(E.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!E(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||E(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!E(t.target).hasClass("jstree-checkbox")?d.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this.delete_node=function(e){if(this.settings.checkbox.tie_selection||E.vakata.is_array(e))return d.delete_node.call(this,e);var t,i,r,s=!1;if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;for((t=e.children_d.concat([])).push(e.id),i=0,r=t.length;i<r;i++)if(this._model.data[t[i]].state.checked){s=!0;break}return s&&(this._data.checkbox.selected=E.vakata.array_filter(this._data.checkbox.selected,function(e){return-1===E.inArray(e,t)})),d.delete_node.call(this,e)},this._cascade_new_checked_state=function(e,t){var i=this,r=this.settings.checkbox.tie_selection,s=this._model.data[e],a=[],n=[],o,d,c;if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)c=this.get_checked_descendants(e),s.state[r?"selected":"checked"]&&c.push(s.id),a=a.concat(c);else{if(s.children)for(o=0,d=s.children.length;o<d;o++){var l=s.children[o],c=i._cascade_new_checked_state(l,t),a=a.concat(c);-1<c.indexOf(l)&&n.push(l)}var h=i.get_node(s,!0),e=0<n.length&&n.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=e),!e&&t&&n.length===s.children.length?(s.state[r?"selected":"checked"]=t,a.push(s.id),h.children(".jstree-anchor").attr("aria-selected",!0).addClass(r?"jstree-clicked":"jstree-checked")):(s.state[r?"selected":"checked"]=!1,h.children(".jstree-anchor").attr("aria-selected",!1).removeClass(r?"jstree-clicked":"jstree-checked"))}return a},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection,e=t._model.data[e];return E.vakata.array_filter(e.children_d,function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,r,s,a;if(E.vakata.is_array(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.check_node(e[r],t);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,r,s;if(E.vakata.is_array(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===E.jstree.root)return!1;s=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=E.vakata.array_remove_item(this._data.checkbox.selected,e.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e=this._data.checkbox.selected.concat([]),t,i;for(this._data.checkbox.selected=this._model.data[E.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();for(var e=this._data.checkbox.selected.concat([]),t,i,t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===E.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?E.map(this._data.checkbox.selected,function(e){return this.get_node(e)}.bind(this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);for(var t=this.get_checked(!0),i={},r,s,a,n,r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?E.map(t,function(e){return this.get_node(e)}.bind(this)):t},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);for(var t=this.get_checked(!0),i=[],r,s,r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?E.map(i,function(e){return this.get_node(e)}.bind(this)):i},this.load_node=function(e,t){var i,r,s,a,n,o;if(!E.vakata.is_array(e)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(e))&&o.state.loaded)for(i=0,r=o.children_d.length;i<r;i++)this._model.data[o.children_d[i]].state.checked&&(this._data.checkbox.selected=E.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[i]));return d.load_node.apply(this,arguments)},this.get_state=function(){var e=d.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i=d.set_state.apply(this,arguments),r;return i&&e.checkbox?(this.settings.checkbox.tie_selection||(this.uncheck_all(),r=this,E.each(e.checkbox,function(e,t){r.check_node(t)})),delete e.checkbox,this.set_state(e,t),!1):i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),d.refresh.apply(this,arguments)}},E.jstree.defaults.conditionalselect=function(){return!0},E.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){if(this.settings.conditionalselect.call(this,this.get_node(e),t))return i.activate_node.call(this,e,t)}},E.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,t){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var i=E.jstree.reference(e.reference),e=i.get_node(e.reference);i.create_node(e,{},"last",function(t){try{i.edit(t)}catch(e){setTimeout(function(){i.edit(t)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.edit(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.delete_node(t.get_selected()):t.delete_node(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.cut(t.get_top_selected()):t.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.copy(t.get_top_selected()):t.copy(e)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!E.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=E.jstree.reference(e.reference),e=t.get_node(e.reference);t.paste(e)}}}}}}},E.jstree.plugins.contextmenu=function(e,a){this.bind=function(){a.bind.call(this);var i=0,r=null,t,s;this.element.on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-contextmenu")}.bind(this)).on("contextmenu.jstree",".jstree-anchor",function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),i=e.ctrlKey?+new Date:0,(t||r)&&(i=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))}.bind(this)).on("click.jstree",".jstree-anchor",function(e){this._data.contextmenu.visible&&(!i||250<+new Date-i)&&E.vakata.context.hide(),i=0}.bind(this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,s=e.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){E(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(10<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||10<Math.abs(s-e.originalEvent.changedTouches[0].clientY))&&(clearTimeout(r),E.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){r&&clearTimeout(r)}),E(b).on("context_hide.vakata.jstree",function(e,t){this._data.contextmenu.visible=!1,E(t.reference).removeClass("jstree-context")}.bind(this))},this.teardown=function(){this._data.contextmenu.visible&&E.vakata.context.hide(),E(b).off("context_hide.vakata.jstree"),a.teardown.call(this)},this.show_contextmenu=function(t,i,r,e){if(!(t=this.get_node(t))||t.id===E.jstree.root)return!1;var s=this.settings.contextmenu,a,n=this.get_node(t,!0).children(".jstree-anchor"),o=!1,d=!1;!s.show_at_node&&i!==P&&r!==P||(o=n.offset(),i=o.left,r=o.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),d=s.items,E.vakata.is_function(d)&&(d=d.call(this,t,function(e){this._show_contextmenu(t,i,r,e)}.bind(this))),E.isPlainObject(d)&&this._show_contextmenu(t,i,r,d)},this._show_contextmenu=function(e,t,i,r){var s,a=this.get_node(e,!0).children(".jstree-anchor");E(b).one("context_show.vakata.jstree",function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";E(t.element).addClass(i),a.addClass("jstree-context")}.bind(this)),this._data.contextmenu.visible=!0,E.vakata.context.show(a,{x:t,y:i},r),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},g={element:_=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(h=E).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){h(b).triggerHandler("context_"+e+".vakata",{reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_execute:function(e){return!(!(e=g.items[e])||e._disabled&&(!h.vakata.is_function(e._disabled)||e._disabled({item:e,reference:g.reference,element:g.element}))||!e.action)&&e.action.call(null,{item:e,reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_parse:function(e,t){if(!e)return!1;t||(g.html="",g.items=[]);var i="",r=!1,s;return t&&(i+="<ul>"),h.each(e,function(e,t){return!t||(g.items.push(t),!r&&t.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>"),r=!1,i+="<li class='"+(t._class||"")+(!0===t._disabled||h.vakata.is_function(t._disabled)&&t._disabled({item:t,reference:g.reference,element:g.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(g.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">",h.vakata.context.settings.icons&&(i+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?i+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":i+=" class='"+t.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(h.vakata.is_function(t.label)?t.label({item:e,reference:g.reference,element:g.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(s=h.vakata.context._parse(t.submenu,!0))&&(i+=s),i+="</li>",void(t.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(h.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>",r=!0)))}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(i+="</ul>"),t||(g.html=i,h.vakata.context._trigger("parse")),10<i.length&&i},_show_submenu:function(e){var t,i,r,s,a,n,o,d;(e=h(e)).length&&e.children("ul").length&&(t=e.children("ul"),r=(i=e.offset().left)+e.outerWidth(),s=e.offset().top,a=t.width(),n=t.height(),o=h(window).width()+h(window).scrollLeft(),d=h(window).height()+h(window).scrollTop(),_?e[r-(a+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[o<r+a&&o-r<i?"addClass":"removeClass"]("vakata-context-right"),d<s+n+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<a&&t.css("margin-right",i-a):o-r<a&&t.css("margin-left",o-r-a),t.show())},show:function(e,t,i){var r,s,a,n,o,d,c,i,l=!0;switch(g.element&&g.element.length&&g.element.width(""),!0){case!t&&!e:return!1;case!!t&&!!e:g.reference=e,g.position_x=t.x,g.position_y=t.y;break;case!t&&!!e:r=(g.reference=e).offset(),g.position_x=r.left+e.outerHeight(),g.position_y=r.top;break;case!!t&&!e:g.position_x=t.x,g.position_y=t.y}e&&!i&&h(e).data("vakata_contextmenu")&&(i=h(e).data("vakata_contextmenu")),h.vakata.context._parse(i)&&g.element.html(g.html),g.items.length&&(g.element.appendTo(b.body),s=g.element,a=g.position_x,n=g.position_y,o=s.width(),d=s.height(),c=h(window).width()+h(window).scrollLeft(),i=h(window).height()+h(window).scrollTop(),_&&(a-=s.outerWidth()-h(e).outerWidth())<h(window).scrollLeft()+20&&(a=h(window).scrollLeft()+20),g.element.css({left:a=c<a+o+20?c-(o+20):a,top:n=i<n+d+20?i-(d+20):n}).show().find("a").first().trigger("focus").parent().addClass("vakata-context-hover"),g.is_visible=!0,h.vakata.context._trigger("show"))},hide:function(){g.is_visible&&(g.element.hide().find("ul").hide().end().find(":focus").trigger("blur").end().detach(),g.is_visible=!1,h.vakata.context._trigger("hide"))}},h(function(){_="rtl"===h(b.body).css("direction");var i=!1;g.element=h("<ul class='vakata-context'></ul>"),g.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),h.contains(this,e.relatedTarget)||(i&&clearTimeout(i),g.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),h(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),h.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){h.contains(this,e.relatedTarget)||h(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){var t;h(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),h.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((t=this,function(){h.vakata.context.hide()}),h.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),h(this).trigger("blur").parent().hasClass("vakata-context-disabled")||!1===h.vakata.context._execute(h(this).attr("rel"))||h.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),h(e.currentTarget).trigger(e);break;case 37:g.is_visible&&(g.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 38:g.is_visible&&((t=!(t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length?g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last():t).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 39:g.is_visible&&(g.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 40:g.is_visible&&((t=!(t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length?g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first():t).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 27:h.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var e=g.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();e.parent().not(".vakata-context-disabled")&&e.trigger("click")}),h(b).on("mousedown.vakata.jstree",function(e){g.is_visible&&g.element[0]!==e.target&&!h.contains(g.element[0],e.target)&&h.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,t){g.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),_&&g.element.addClass("vakata-context-rtl").css("direction","rtl"),g.element.find("ul").hide().end()})}),E.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1,blank_space_drop:!1},E.jstree.plugins.dnd=function(e,o){this.init=function(e,t){o.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in b.createElement("span")},this.bind=function(){o.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",function(e){if(this.settings.dnd.large_drag_target&&E(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(r=E.vakata.html.escape(r)),t&&(t.id||0===t.id)&&t.id!==E.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||E.vakata.is_function(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(d={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},u=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),E.vakata.dnd.start(e,d,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy">+</ins></div>');E.vakata.dnd._trigger("start",e,{helper:E(),element:u,data:d})}}.bind(this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),E.vakata.dnd._trigger("move",e,{helper:E(),element:u,data:d}),!1}).on("drop.jstree",function(e){return e.preventDefault(),E.vakata.dnd._trigger("stop",e,{helper:E(),element:u,data:d}),!1}.bind(this))},this.redraw_node=function(e,t,i,r){if((e=o.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{for(var s,a,n=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&n.setAttribute("draggable",!0)}return e}},E(function(){var N=!1,T=!1,O=!1,A=!1,S=E('<div id="jstree-marker">&#160;</div>').hide();E(b).on("dragover.vakata.jstree",function(e){u&&E.vakata.dnd._trigger("move",e,{helper:E(),element:u,data:d})}).on("drop.vakata.jstree",function(e){u&&(E.vakata.dnd._trigger("stop",e,{helper:E(),element:u,data:d}),d=u=null)}).on("dnd_start.vakata.jstree",function(e,t){O=N=!1,t&&t.data&&t.data.jstree&&S.appendTo(b.body)}).on("dnd_move.vakata.jstree",function(e,s){var a=s.event.target!==O.target;if(A&&(s.event&&"dragover"===s.event.type&&!a||clearTimeout(A)),s&&s.data&&s.data.jstree&&(!s.event.target.id||"jstree-marker"!==s.event.target.id)){O=s.event;var n=E.jstree.reference(s.event.target),o=!1,d=!1,t=!1,i,c,l,h,_,g,u,f,p,m,v,j,k,b,y,x,w,C;if(n&&n._data&&n._data.dnd)if(S.attr("class","jstree-"+n.get_theme()+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")),x=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey)),s.helper.children().attr("class","jstree-"+n.get_theme()+" jstree-"+n.get_theme()+"-"+n.get_theme_variant()+" "+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[x?"show":"hide"](),s.event.target!==n.element[0]&&s.event.target!==n.get_container_ul()[0]||0!==n.get_container_ul().children().length&&!n.settings.dnd.blank_space_drop){if((o=n.settings.dnd.large_drop_target?E(s.event.target).closest(".jstree-node").children(".jstree-anchor"):E(s.event.target).closest(".jstree-anchor"))&&o.length&&o.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(d=o.offset(),t=(s.event.pageY!==P?s.event:s.event.originalEvent).pageY-d.top,h=o.outerHeight(),u=t<h/3?["b","i","a"]:h-h/3<t?["a","i","b"]:h/2<t?["i","a","b"]:["i","b","a"],E.each(u,function(e,t){switch(t){case"b":c=d.left-6,l=d.top,_=n.get_parent(o),g=o.parent().index(),C="jstree-below";break;case"i":b=n.settings.dnd.inside_pos,y=n.get_node(o.parent()),c=d.left-2,l=d.top+h/2+1,_=y.id,g="first"===b?0:"last"===b?y.children.length:Math.min(b,y.children.length),C="jstree-inside";break;case"a":c=d.left-6,l=d.top+h,_=n.get_parent(o),g=o.parent().index()+1,C="jstree-above"}for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(v=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",j=g,"move_node"==v&&"a"===t&&s.data.origin&&s.data.origin===n&&_===n.get_parent(s.data.nodes[p])&&(k=n.get_node(_),j>E.inArray(s.data.nodes[p],k.children)&&--j),!(f=f&&(n&&n.settings&&n.settings.dnd&&!1===n.settings.dnd.check_while_dragging||n.check(v,s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],_,j,{dnd:!0,ref:n.get_node(o.parent()),pos:t,origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))){n&&n.last_error&&(T=n.last_error());break}var i,r;if("i"===t&&o.parent().is(".jstree-closed")&&n.settings.dnd.open_timeout&&(s.event&&"dragover"===s.event.type&&!a||(A&&clearTimeout(A),A=setTimeout((r=o,function(){i.open_node(r)}),(i=n).settings.dnd.open_timeout))),f)return(w=n.get_node(_,!0)).hasClass(".jstree-dnd-parent")||(E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),N={ins:n,par:_,pos:"i"!==t||"last"!==b||0!==g||n.is_loaded(y)?g:"last"},S.css({left:c+"px",top:l+"px"}).show(),S.removeClass("jstree-above jstree-inside jstree-below").addClass(C),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"),T={},!(u=!0)}),!0===u))return}else{for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(!(f=f&&n.check(s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],E.jstree.root,"last",{dnd:!0,ref:n.get_node(E.jstree.root),pos:"i",origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))break;if(f)return N={ins:n,par:E.jstree.root,pos:"last"},S.hide(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"))}E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),N=!1,s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),s.event.originalEvent&&s.event.originalEvent.dataTransfer,S.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(S.hide(),O=N=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(E(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),A&&clearTimeout(A),t&&t.data&&t.data.jstree){S.hide().detach();var i,r,s=[];if(N){for(i=0,r=t.data.nodes.length;i<r;i++)s[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];N.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](s,N.par,N.pos,!1,!1,!1,t.data.origin)}else(i=E(t.event.target).closest(".jstree")).length&&T&&T.error&&"check"===T.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,T);N=O=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=E.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(A&&clearTimeout(A),A=O=T=N=!1,S.hide().detach(),E.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),O&&(O.metaKey=e.metaKey,O.ctrlKey=e.ctrlKey,E.vakata.dnd._trigger("move",O))))})}),p={element:!((f=E).vakata.html={div:f("<div></div>"),escape:function(e){return f.vakata.html.div.text(e).html()},strip:function(e){return f.vakata.html.div.empty().append(f.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},f.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(e,t,i){(i=i===P?f.vakata.dnd._get():i).event=t,f(b).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:p.data,element:p.element,helper:p.helper}},_clean:function(){p.helper&&p.helper.remove(),p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),p={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},u=null,f(b).off("mousemove.vakata.jstree touchmove.vakata.jstree",f.vakata.dnd.drag),f(b).off("mouseup.vakata.jstree touchend.vakata.jstree",f.vakata.dnd.stop)},_scroll:function(e){if(!p.scroll_e||!p.scroll_l&&!p.scroll_t)return p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),!1;if(!p.scroll_i)return p.scroll_i=setInterval(f.vakata.dnd._scroll,100),!1;if(!0===e)return!1;var t=p.scroll_e.scrollTop(),e=p.scroll_e.scrollLeft();p.scroll_e.scrollTop(t+p.scroll_t*f.vakata.dnd.settings.scroll_speed),p.scroll_e.scrollLeft(e+p.scroll_l*f.vakata.dnd.settings.scroll_speed),t===p.scroll_e.scrollTop()&&e===p.scroll_e.scrollLeft()||f.vakata.dnd._trigger("scroll",p.scroll_e)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag&&f.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(e){}return p.init_x=e.pageX,p.init_y=e.pageY,p.data=t,p.is_down=!0,p.element=e.currentTarget,p.target=e.target,p.is_touch="touchstart"===e.type,!1!==i&&(p.helper=f("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),f(b).on("mousemove.vakata.jstree touchmove.vakata.jstree",f.vakata.dnd.drag),f(b).on("mouseup.vakata.jstree touchend.vakata.jstree",f.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=b.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_down){if(!p.is_drag){if(!(Math.abs(i.pageX-p.init_x)>(p.is_touch?f.vakata.dnd.settings.threshold_touch:f.vakata.dnd.settings.threshold)||Math.abs(i.pageY-p.init_y)>(p.is_touch?f.vakata.dnd.settings.threshold_touch:f.vakata.dnd.settings.threshold)))return;p.helper&&(p.helper.appendTo(b.body),p.helper_w=p.helper.outerWidth()),p.is_drag=!0,f(p.target).one("click.vakata",!1),f.vakata.dnd._trigger("start",i)}var e=!1,t=!1,r=!1,s=!1,a=!1,n=!1,o=!1,d=!1,c=!1,l=!1;return p.scroll_t=0,p.scroll_l=0,p.scroll_e=!1,f(f(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return this.ownerDocument&&/^auto|scroll$/.test(f(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=f(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),i.pageY-t.top<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),i.pageX-t.left<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=-1)),p.scroll_t||p.scroll_l)return p.scroll_e=f(this),!1}),p.scroll_e||(e=f(b),t=f(window),r=e.height(),s=t.height(),a=e.width(),n=t.width(),o=e.scrollTop(),d=e.scrollLeft(),s<r&&i.pageY-o<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=-1),s<r&&s-(i.pageY-o)<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),n<a&&i.pageX-d<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=-1),n<a&&n-(i.pageX-d)<f.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),(p.scroll_t||p.scroll_l)&&(p.scroll_e=e)),p.scroll_e&&f.vakata.dnd._scroll(!0),p.helper&&(c=parseInt(i.pageY+f.vakata.dnd.settings.helper_top,10),l=parseInt(i.pageX+f.vakata.dnd.settings.helper_left,10),a&&l+p.helper_w>a&&(l=a-(p.helper_w+2)),p.helper.css({left:l+"px",top:(c=r&&r<c+25?r-50:c)+"px"})),f.vakata.dnd._trigger("move",i),!1}},stop:function(e){var t;return"touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=b.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag?(e.target!==p.target&&f(p.target).off("click.vakata"),f.vakata.dnd._trigger("stop",e)):"touchend"===e.type&&e.target===p.target&&(t=setTimeout(function(){f(e.target).trigger("click")},100),f(e.target).one("click",function(){t&&clearTimeout(t)})),f.vakata.dnd._clean(),!1}},E.jstree.defaults.massload=null,E.jstree.plugins.massload=function(e,l){this.init=function(e,t){this._data.massload={},l.init.call(this,e,t)},this._load_nodes=function(a,n,o,d){var e=this.settings.massload,t=[],i=this._model.data,r,s,c;if(!o){for(r=0,s=a.length;r<s;r++)i[a[r]]&&(i[a[r]].state.loaded||i[a[r]].state.failed)&&!d||(t.push(a[r]),(c=this.get_node(a[r],!0))&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},t.length){if(E.vakata.is_function(e))return e.call(this,t,function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=a.length;t<i;t++)(c=this.get_node(a[t],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);l._load_nodes.call(this,a,n,o,d)}.bind(this));if("object"==typeof e&&e&&e.url)return e=E.extend(!0,{},e),E.vakata.is_function(e.url)&&(e.url=e.url.call(this,t)),E.vakata.is_function(e.data)&&(e.data=e.data.call(this,t)),E.ajax(e).done(function(e,t,i){var r,s;if(e)for(r in e)e.hasOwnProperty(r)&&(this._data.massload[r]=e[r]);for(r=0,s=a.length;r<s;r++)(c=this.get_node(a[r],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);l._load_nodes.call(this,a,n,o,d)}.bind(this)).fail(function(e){l._load_nodes.call(this,a,n,o,d)}.bind(this))}}return l._load_nodes.call(this,a,n,o,d)},this._load_node=function(e,t){var i=this._data.massload[e.id],r=null,i;return i?(r=this["string"==typeof i?"_append_html_data":"_append_json_data"](e,"string"==typeof i?E(E.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){t.call(this,e)}),(i=this.get_node(e.id,!0))&&i.length&&i.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],r):l._load_node.call(this,e,t)}},E.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},E.jstree.plugins.search=function(e,o){this.bind=function(){o.bind.call(this),this._data.search.str="",this._data.search.dom=E(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",function(e,t){if(this._data.search.som&&t.res.length){for(var i=this._model.data,r,s,a=[],n,o,r=0,s=t.res.length;r<s;r++)if(i[t.res[r]]&&!i[t.res[r]].state.hidden&&(a.push(t.res[r]),a=a.concat(i[t.res[r]].parents),this._data.search.smc))for(n=0,o=i[t.res[r]].children_d.length;n<o;n++)i[i[t.res[r]].children_d[n]]&&!i[i[t.res[r]].children_d[n]].state.hidden&&a.push(i[t.res[r]].children_d[n]);a=E.vakata.array_remove_item(E.vakata.array_unique(a),E.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(a,!0),this.redraw(!0)}}.bind(this)).on("clear_search.jstree",function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))}.bind(this))},this.search=function(r,e,t,i,s,a){if(!1===r||""===E.vakata.trim(r.toString()))return this.clear_search();i=(i=this.get_node(i))&&(i.id||0===i.id)?i.id:null,r=r.toString();var n=this.settings.search,o=n.ajax||!1,d=this._model.data,c=null,l=[],h=[],_,g;if(this._data.search.res.length&&!s&&this.clear_search(),t===P&&(t=n.show_only_matches),a===P&&(a=n.show_only_matches_children),!e&&!1!==o)return E.vakata.is_function(o)?o.call(this,r,function(e){e&&e.d&&(e=e.d),this._load_nodes(E.vakata.is_array(e)?E.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})}.bind(this),i):((o=E.extend({},o)).data||(o.data={}),o.data.str=r,i&&(o.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=E.ajax(o).fail(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(o)},this.settings.core.error.call(this,this._data.core.last_error)}.bind(this)).done(function(e){e&&e.d&&(e=e.d),this._load_nodes(E.vakata.is_array(e)?E.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})}.bind(this)),this._data.search.lastRequest);if(s||(this._data.search.str=r,this._data.search.dom=E(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=a),c=new E.vakata.search(r,!0,{caseSensitive:n.case_sensitive,fuzzy:n.fuzzy}),E.each(d[i||E.jstree.root].children_d,function(e,t){var i=d[t];i.text&&!i.state.hidden&&(!n.search_leaves_only||i.state.loaded&&0===i.children.length)&&(n.search_callback&&n.search_callback.call(this,r,i)||!n.search_callback&&c.search(i.text).isMatch)&&(l.push(t),h=h.concat(i.parents))}),l.length){for(_=0,g=(h=E.vakata.array_unique(h)).length;_<g;_++)h[_]!==E.jstree.root&&d[h[_]]&&!0===this.open_node(h[_],null,0)&&this._data.search.opn.push(h[_]);s?(this._data.search.dom=this._data.search.dom.add(E(this.element[0].querySelectorAll("#"+E.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=E.vakata.array_unique(this._data.search.res.concat(l))):(this._data.search.dom=E(this.element[0].querySelectorAll("#"+E.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=l),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:r,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=E(this.element[0].querySelectorAll("#"+E.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(E.jstree.idregex,"\\$&"):e.replace(E.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=E()},this.redraw_node=function(e,t,i,r){if((e=o.redraw_node.apply(this,arguments))&&-1!==E.inArray(e.id,this._data.search.res)){for(var s,a,n=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(n.className+=" jstree-search")}return e}},(w=E).vakata.search=function(p,e,m){m=m||{},!1!==(m=w.extend({},w.vakata.search.defaults,m)).fuzzy&&(m.fuzzy=!0),p=m.caseSensitive?p:p.toLowerCase();var v=m.location,i=m.distance,j=m.threshold,k=p.length,b,y,x,t;return 32<k&&(m.fuzzy=!1),m.fuzzy&&(b=1<<k-1,y=function(){for(var e={},t=0,t=0;t<k;t++)e[p.charAt(t)]=0;for(t=0;t<k;t++)e[p.charAt(t)]|=1<<k-t-1;return e}(),x=function(e,t){var e=e/k,t=Math.abs(v-t);return i?e+t/i:t?1:e}),t=function(e){if(e=m.caseSensitive?e.toString():e.toString().toLowerCase(),p===e||-1!==e.indexOf(p))return{isMatch:!0,score:0};if(!m.fuzzy)return{isMatch:!1,score:1};var t,i,r=e.length,s=j,a=e.indexOf(p,v),n,o,d=k+r,c,l,h,_,g,u=1,f=[];for(-1!==a&&(s=Math.min(x(0,a),s),-1!==(a=e.lastIndexOf(p,v+k))&&(s=Math.min(x(0,a),s))),a=-1,t=0;t<k;t++){n=0,o=d;while(n<o)x(t,v+o)<=s?n=o:d=o,o=Math.floor((d-n)/2+n);for(d=o,l=Math.max(1,v-o+1),h=Math.min(v+o,r)+k,(_=new Array(h+2))[h+1]=(1<<t)-1,i=h;l<=i;i--)if(g=y[e.charAt(i-1)],_[i]=0===t?(_[i+1]<<1|1)&g:(_[i+1]<<1|1)&g|(c[i+1]|c[i])<<1|1|c[i+1],_[i]&b&&(u=x(t,i-1))<=s){if(s=u,f.push(a=i-1),!(v<a))break;l=Math.max(1,2*v-a)}if(x(t+1,v)>s)break;c=_}return{isMatch:0<=a,score:u}},!0===e?{search:t}:t(e)},w.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},E.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1};var m=!(E.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",function(e,t){this.sort(t.parent,!0)}.bind(this)).on("rename_node.jstree create_node.jstree",function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)}.bind(this)).on("move_node.jstree copy_node.jstree",function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)}.bind(this))},this.sort=function(e,t){var i,r;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(this.settings.sort.bind(this)),t))for(i=0,r=e.children_d.length;i<r;i++)this.sort(e.children_d[i],!1)}}),t,v;E.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},E.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var i=function(){this.element.on(this.settings.state.events,function(){m&&clearTimeout(m),m=setTimeout(function(){this.save_state()}.bind(this),100)}.bind(this)),this.trigger("state_ready")}.bind(this);this.element.on("ready.jstree",function(e,t){this.element.one("restore_state.jstree",i),this.restore_state()||i()}.bind(this))},this.save_state=function(){var e=this.get_state();this.settings.state.preserve_loaded||delete e.core.loaded;var e={state:e,ttl:this.settings.state.ttl,sec:+new Date};E.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var i=E.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl)&&(!!(i=(i=i&&i.state?i.state:i)&&E.vakata.is_function(this.settings.state.filter)?this.settings.state.filter.call(this,i):i)&&(this.settings.state.preserve_loaded||delete i.core.loaded,this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:E.extend(!0,{},i)})}),this.set_state(i),!0))},this.clear_state=function(){return E.vakata.storage.del(this.settings.state.key)}},E.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},E.jstree.defaults.types={default:{}},E.jstree.defaults.types[E.jstree.root]={},E.jstree.plugins.types=function(e,l){this.init=function(e,t){var i,r;if(t&&t.types&&t.types.default)for(i in t.types)if("default"!==i&&i!==E.jstree.root&&t.types.hasOwnProperty(i))for(r in t.types.default)t.types.default.hasOwnProperty(r)&&t.types[i][r]===P&&(t.types[i][r]=t.types.default[r]);l.init.call(this,e,t),this._model.data[E.jstree.root].type=E.jstree.root},this.refresh=function(e,t){l.refresh.call(this,e,t),this._model.data[E.jstree.root].type=E.jstree.root},this.bind=function(){this.element.on("model.jstree",function(e,t){for(var i=this._model.data,r=t.nodes,s=this.settings.types,a,n,o="default",d,a=0,n=r.length;a<n;a++){if(o="default",i[r[a]].original&&i[r[a]].original.type&&s[i[r[a]].original.type]&&(o=i[r[a]].original.type),i[r[a]].data&&i[r[a]].data.jstree&&i[r[a]].data.jstree.type&&s[i[r[a]].data.jstree.type]&&(o=i[r[a]].data.jstree.type),i[r[a]].type=o,!0===i[r[a]].icon&&s[o].icon!==P&&(i[r[a]].icon=s[o].icon),s[o].li_attr!==P&&"object"==typeof s[o].li_attr)for(d in s[o].li_attr)s[o].li_attr.hasOwnProperty(d)&&"id"!==d&&(i[r[a]].li_attr[d]===P?i[r[a]].li_attr[d]=s[o].li_attr[d]:"class"===d&&(i[r[a]].li_attr.class=s[o].li_attr.class+" "+i[r[a]].li_attr.class));if(s[o].a_attr!==P&&"object"==typeof s[o].a_attr)for(d in s[o].a_attr)s[o].a_attr.hasOwnProperty(d)&&"id"!==d&&(i[r[a]].a_attr[d]===P?i[r[a]].a_attr[d]=s[o].a_attr[d]:"href"===d&&"#"===i[r[a]].a_attr[d]?i[r[a]].a_attr.href=s[o].a_attr.href:"class"===d&&(i[r[a]].a_attr.class=s[o].a_attr.class+" "+i[r[a]].a_attr.class))}i[E.jstree.root].type=E.jstree.root}.bind(this)),l.bind.call(this)},this.get_json=function(e,t,i){var r,s,a=this._model.data,n=t?E.extend(!0,{},t,{no_id:!1}):{},o=l.get_json.call(this,e,n,i);if(!1===o)return!1;if(E.vakata.is_array(o))for(r=0,s=o.length;r<s;r++)o[r].type=(o[r].id||0===o[r].id)&&a[o[r].id]&&a[o[r].id].type?a[o[r].id].type:"default",t&&t.no_id&&(delete o[r].id,o[r].li_attr&&o[r].li_attr.id&&delete o[r].li_attr.id,o[r].a_attr&&o[r].a_attr.id&&delete o[r].a_attr.id);else o.type=(o.id||0===o.id)&&a[o.id]&&a[o.id].type?a[o.id].type:"default",t&&t.no_id&&(o=this._delete_ids(o));return o},this._delete_ids=function(e){if(E.vakata.is_array(e)){for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&E.vakata.is_array(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,t,i,r,s){if(!1===l.check.call(this,e,t,i,r,s))return!1;t=t&&(t.id||0===t.id)?t:this.get_node(t),i=i&&(i.id||0===i.id)?i:this.get_node(i);var a,n,o,d,c,a=(a=t&&(t.id||0===t.id)?s&&s.origin?s.origin:E.jstree.reference(t.id):null)&&a._model&&a._model.data?a._model.data:null;switch(e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===E.inArray(t.id,i.children)){if((n=this.get_rules(i)).max_children!==P&&-1!==n.max_children&&n.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(n.valid_children!==P&&-1!==n.valid_children&&-1===E.inArray(t.type||"default",n.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(a&&t.children_d&&t.parents){for(d=o=0,c=t.children_d.length;d<c;d++)o=Math.max(o,a[t.children_d[d]].parents.length);o=o-t.parents.length+1}(o<=0||o===P)&&(o=1);do{if(n.max_depth!==P&&-1!==n.max_depth&&n.max_depth<o)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});i=this.get_node(i.parent),n=this.get_rules(i),o++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var e=this.get_type(e,!0);return e.max_depth===P&&(e.max_depth=-1),e.max_children===P&&(e.max_children=-1),e.valid_children===P&&(e.valid_children=-1),e},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?E.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i=this._model.data,r,s,a,n,o,d,c,l;if(E.vakata.is_array(e)){for(s=0,a=(e=e.slice()).length;s<a;s++)this.set_type(e[s],t);return!0}if(r=this.settings.types,e=this.get_node(e),!r[t]||!e)return!1;if((c=this.get_node(e,!0))&&c.length&&(l=c.children(".jstree-anchor")),n=e.type,o=this.get_icon(e),e.type=t,!0!==o&&r[n]&&(r[n].icon===P||o!==r[n].icon)||this.set_icon(e,r[t].icon===P||r[t].icon),r[n]&&r[n].li_attr!==P&&"object"==typeof r[n].li_attr)for(d in r[n].li_attr)r[n].li_attr.hasOwnProperty(d)&&"id"!==d&&("class"===d?(i[e.id].li_attr.class=(i[e.id].li_attr.class||"").replace(r[n].li_attr[d],""),c&&c.removeClass(r[n].li_attr[d])):i[e.id].li_attr[d]===r[n].li_attr[d]&&(i[e.id].li_attr[d]=null,c&&c.removeAttr(d)));if(r[n]&&r[n].a_attr!==P&&"object"==typeof r[n].a_attr)for(d in r[n].a_attr)r[n].a_attr.hasOwnProperty(d)&&"id"!==d&&("class"===d?(i[e.id].a_attr.class=(i[e.id].a_attr.class||"").replace(r[n].a_attr[d],""),l&&l.removeClass(r[n].a_attr[d])):i[e.id].a_attr[d]===r[n].a_attr[d]&&("href"===d?(i[e.id].a_attr[d]="#",l&&l.attr("href","#")):(delete i[e.id].a_attr[d],l&&l.removeAttr(d))));if(r[t].li_attr!==P&&"object"==typeof r[t].li_attr)for(d in r[t].li_attr)r[t].li_attr.hasOwnProperty(d)&&"id"!==d&&(i[e.id].li_attr[d]===P?(i[e.id].li_attr[d]=r[t].li_attr[d],c&&("class"===d?c.addClass(r[t].li_attr[d]):c.attr(d,r[t].li_attr[d]))):"class"===d&&(i[e.id].li_attr.class=r[t].li_attr[d]+" "+i[e.id].li_attr.class,c&&c.addClass(r[t].li_attr[d])));if(r[t].a_attr!==P&&"object"==typeof r[t].a_attr)for(d in r[t].a_attr)r[t].a_attr.hasOwnProperty(d)&&"id"!==d&&(i[e.id].a_attr[d]===P?(i[e.id].a_attr[d]=r[t].a_attr[d],l&&("class"===d?l.addClass(r[t].a_attr[d]):l.attr(d,r[t].a_attr[d]))):"href"===d&&"#"===i[e.id].a_attr[d]?(i[e.id].a_attr.href=r[t].a_attr.href,l&&l.attr("href",r[t].a_attr.href)):"class"===d&&(i[e.id].a_attr.class=r[t].a_attr.class+" "+i[e.id].a_attr.class,l&&l.addClass(r[t].a_attr[d])));return!0}},E.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},E.jstree.plugins.unique=function(e,f){this.check=function(e,t,i,r,s){if(!1===f.check.call(this,e,t,i,r,s))return!1;if(t=t&&(t.id||0===t.id)?t:this.get_node(t),!(i=i&&(i.id||0===i.id)?i:this.get_node(i))||!i.children)return!0;for(var a="rename_node"===e?r:t.text,n=[],o=this.settings.unique.case_sensitive,d=this.settings.unique.trim_whitespace,c=this._model.data,l,h,_,l=0,h=i.children.length;l<h;l++)_=c[i.children[l]].text,o||(_=_.toLowerCase()),d&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),n.push(_);switch(o||(a=a.toLowerCase()),d&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),e){case"delete_node":return!0;case"rename_node":return _=t.text||"",o||(_=_.toLowerCase()),d&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(l=-1===E.inArray(a,n)||t.text&&_===a)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"create_node":return(l=-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"copy_node":return(l=-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l;case"move_node":return(l=t.parent===i.id&&(!s||!s.is_multi)||-1===E.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),l}return!0},this.create_node=function(e,t,i,r,s){if(!t||"object"==typeof t&&t.text===P){if(null===e&&(e=E.jstree.root),!(e=this.get_node(e)))return f.create_node.call(this,e,t,i,r,s);if(!(i=i===P?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return f.create_node.call(this,e,t,i,r,s);t=t||{};for(var a,n,o,d,c,l=this._model.data,h=this.settings.unique.case_sensitive,_=this.settings.unique.trim_whitespace,g=this.settings.unique.duplicate,u,n=a=this.get_string("New node"),o=[],d=0,c=e.children.length;d<c;d++)u=l[e.children[d]].text,h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),o.push(u);d=1,u=n,h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));while(-1!==E.inArray(u,o))u=n=g.call(this,a,++d).toString(),h||(u=u.toLowerCase()),_&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));t.text=n}return f.create_node.call(this,e,t,i,r,s)}};var j=b.createElement("DIV");if(j.setAttribute("unselectable","on"),j.setAttribute("role","presentation"),j.className="jstree-wholerow",j.innerHTML="&#160;",E.jstree.plugins.wholerow=function(e,a){this.bind=function(){a.bind.call(this),this.element.on("ready.jstree set_state.jstree",function(){this.hide_dots()}.bind(this)).on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-wholerow-ul")}.bind(this)).on("deselect_all.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}.bind(this)).on("changed.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,r,s,r=0,s=t.selected.length;r<s;r++)(i=this.get_node(t.selected[r],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("open_node.jstree",function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("hover_node.jstree dehover_node.jstree",function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}.bind(this)).on("contextmenu.jstree",".jstree-wholerow",function(e){var t;this._data.contextmenu&&(e.preventDefault(),t=E.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY}),E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t))}.bind(this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=E.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=E.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("click.jstree",".jstree-leaf > .jstree-ocl",function(e){e.stopImmediatePropagation();var t=E.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});E(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}.bind(this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1}.bind(this)).on("mouseleave.jstree",".jstree-node",function(e){this.dehover_node(e.currentTarget)}.bind(this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),a.teardown.call(this)},this.redraw_node=function(e,t,i,r){var s;return(e=a.redraw_node.apply(this,arguments))&&(s=j.cloneNode(!0),-1!==E.inArray(e.id,this._data.core.selected)&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(s.className+=" jstree-wholerow-hovered"),e.insertBefore(s,e.childNodes[0])),e}},window.customElements&&Object&&Object.create){var e=Object.create(HTMLElement.prototype);e.createdCallback=function(){var e={core:{},plugins:[]},t;for(t in E.jstree.plugins)E.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(e.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(e[t]=JSON.parse(this.getAttribute(t))));for(t in E.jstree.defaults.core)E.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(e.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));E(this).jstree(e)};try{window.customElements.define("vakata-jstree",function(){},{prototype:e})}catch(e){}}}});

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtYnVuZGxlLmNodW5rLnZlbmRvcnMtbm9kZV9tb2R1bGVzX2pzdHJlZV9kaXN0X2pzdHJlZV9taW5fanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFFQSxhQUFhLGFBQWEsS0FBcUMsQ0FBQyxpQ0FBTyxDQUFDLDZFQUFRLENBQUMsb0NBQUMsQ0FBQztBQUFBO0FBQUE7QUFBQSxrR0FBQyxDQUFDLENBQXdGLENBQUMsZUFBZSxhQUFhLGNBQWMsb0hBQW9ILHdCQUF3QixxQkFBcUIsWUFBWSwyQkFBMkIsV0FBVyxXQUFXLDJGQUEyRixXQUFXLGdCQUFnQiwrQkFBK0IsaUNBQWlDLHVCQUF1Qix5RkFBeUYsaUNBQWlDLHNDQUFzQyw2QkFBNkIsMERBQTBELDJCQUEyQixrREFBa0QsTUFBTSxRQUFRLHFDQUFxQywwQkFBMEIsMkNBQTJDLGdDQUFnQyxrQkFBa0IsZ0VBQWdFLE9BQU8sVUFBVSxxQkFBcUIsNENBQTRDLFVBQVUsMkdBQTJHLDZCQUE2QixxQ0FBcUMsSUFBSSx5QkFBeUIsMEVBQTBFLHFEQUFxRCxnREFBZ0QsdUlBQXVJLDBCQUEwQix1REFBdUQsbUJBQW1CLHlEQUF5RCwwQkFBMEIsb0ZBQW9GLHVGQUF1RiwrSUFBK0kseUJBQXlCLDZDQUE2QyxtQkFBbUIsNkNBQTZDLGtCQUFrQixNQUFNLDhNQUE4TSxnQkFBZ0IsbUJBQW1CLHlDQUF5QywyREFBMkQsbUJBQW1CLE1BQU0sOEZBQThGLGdFQUFnRSw0S0FBNEssa0JBQWtCLG1CQUFtQix5Q0FBeUMsMkRBQTJELGlCQUFpQixnQkFBZ0Isa0JBQWtCLG1CQUFtQixtREFBbUQsdUVBQXVFLGlCQUFpQixrR0FBa0csZ0JBQWdCLCtDQUErQyxtQkFBbUIsMEJBQTBCLHFCQUFxQiwwQkFBMEIsMEJBQTBCLHNDQUFzQyxvQkFBb0IsYUFBYSxPQUFPLGtFQUFrRSw2Q0FBNkMsa0NBQWtDLHlFQUF5RSxXQUFXLHNuQkFBc25CLDBFQUEwRSw4b0JBQThvQixxQkFBcUIseUNBQXlDLHFEQUFx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dUMsK0ZBQStGLDhIQUE4SCxRQUFRLGtOQUFrTixJQUFJLHVIQUF1SCx5RkFBeUYsNklBQTZJLFNBQVMsNENBQTRDLDZCQUE2Qiw4SEFBOEgsMENBQTBDLHFCQUFxQiw2RUFBNkUsaUJBQWlCLHFFQUFxRSx1REFBdUQsb0RBQW9ELHFGQUFxRiwrQ0FBK0MscUZBQXFGLHlDQUF5QyxJQUFJLHNIQUFzSCxpREFBaUQsMkhBQTJILHNFQUFzRSxrTEFBa0wsb0VBQW9FLE1BQU0scUVBQXFFLG9HQUFvRyw0RkFBNEYsOERBQThELDZCQUE2Qix1QkFBdUIsd0VBQXdFLEVBQUUsMEdBQTBHLHNEQUFzRCw2QkFBNkIsMEJBQTBCLHdFQUF3RSxFQUFFLDBHQUEwRyw2REFBNkQsNkJBQTZCLHVCQUF1Qix3RUFBd0UsRUFBRSwwR0FBMEcsZ0ZBQWdGLDJHQUEyRywrREFBK0QsbUNBQW1DLGFBQWEsMEJBQTBCLDZGQUE2RixvQ0FBb0MsTUFBTSxvU0FBb1MsK0NBQStDLDJDQUEyQyw2QkFBNkIsT0FBTyxPQUFPLFlBQVksR0FBRyxzTUFBc00saUtBQWlLLG1CQUFtQixJQUFJLHlEQUF5RCxFQUFFLFlBQVksRUFBRSxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUm9vdHMvLi9ub2RlX21vZHVsZXMvanN0cmVlL2Rpc3QvanN0cmVlLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEganNUcmVlIC0gdjMuMy4xNiAtIDIwMjMtMDktMTkgLSAoTUlUKSAqL1xuXG4hZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwianF1ZXJ5XCIpKTplKGpRdWVyeSl9KGZ1bmN0aW9uKEUsUCl7XCJ1c2Ugc3RyaWN0XCI7aWYoIUUuanN0cmVlKXt2YXIgcz0wLGE9ITEsbj0hMSxvPSExLHI9W10sZT1FKFwic2NyaXB0Omxhc3RcIikuYXR0cihcInNyY1wiKSxiPXdpbmRvdy5kb2N1bWVudCxjPXdpbmRvdy5zZXRJbW1lZGlhdGUsaT13aW5kb3cuUHJvbWlzZTshYyYmaSYmKGM9ZnVuY3Rpb24oZSx0KXtpLnJlc29sdmUodCkudGhlbihlKX0pLEUuanN0cmVlPXt2ZXJzaW9uOlwiMy4zLjE2XCIsZGVmYXVsdHM6e3BsdWdpbnM6W119LHBsdWdpbnM6e30scGF0aDplJiYtMSE9PWUuaW5kZXhPZihcIi9cIik/ZS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sXCJcIik6XCJcIixpZHJlZ2V4Oi9bXFxcXDomIV58KClcXFtcXF08PkAqJyt+I1wiOy4sPVxcLSBcXC8ke30lP2BdL2cscm9vdDpcIiNcIn0sRS5qc3RyZWUuY3JlYXRlPWZ1bmN0aW9uKGUsaSl7dmFyIHI9bmV3IEUuanN0cmVlLmNvcmUoKytzKSx0PWk7cmV0dXJuIGk9RS5leHRlbmQoITAse30sRS5qc3RyZWUuZGVmYXVsdHMsaSksdCYmdC5wbHVnaW5zJiYoaS5wbHVnaW5zPXQucGx1Z2lucyksRS5lYWNoKGkucGx1Z2lucyxmdW5jdGlvbihlLHQpe1wiY29yZVwiIT09ZSYmKHI9ci5wbHVnaW4odCxpW3RdKSl9KSxFKGUpLmRhdGEoXCJqc3RyZWVcIixyKSxyLmluaXQoZSxpKSxyfSxFLmpzdHJlZS5kZXN0cm95PWZ1bmN0aW9uKCl7RShcIi5qc3RyZWU6anN0cmVlXCIpLmpzdHJlZShcImRlc3Ryb3lcIiksRShiKS5vZmYoXCIuanN0cmVlXCIpfSxFLmpzdHJlZS5jb3JlPWZ1bmN0aW9uKGUpe3RoaXMuX2lkPWUsdGhpcy5fY250PTAsdGhpcy5fd3JrPW51bGwsdGhpcy5fZGF0YT17Y29yZTp7dGhlbWVzOntuYW1lOiExLGRvdHM6ITEsaWNvbnM6ITEsZWxsaXBzaXM6ITF9LHNlbGVjdGVkOltdLGxhc3RfZXJyb3I6e30sd29ya2luZzohMSx3b3JrZXJfcXVldWU6W10sZm9jdXNlZDpudWxsfX19LEUuanN0cmVlLnJlZmVyZW5jZT1mdW5jdGlvbih0KXt2YXIgaT1udWxsLGU9bnVsbDtpZighdHx8IXQuaWR8fHQudGFnTmFtZSYmdC5ub2RlVHlwZXx8KHQ9dC5pZCksIWV8fCFlLmxlbmd0aCl0cnl7ZT1FKHQpfWNhdGNoKGUpe31pZighZXx8IWUubGVuZ3RoKXRyeXtlPUUoXCIjXCIrdC5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIikpfWNhdGNoKGUpe31yZXR1cm4gZSYmZS5sZW5ndGgmJihlPWUuY2xvc2VzdChcIi5qc3RyZWVcIikpLmxlbmd0aCYmKGU9ZS5kYXRhKFwianN0cmVlXCIpKT9pPWU6RShcIi5qc3RyZWVcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPUUodGhpcykuZGF0YShcImpzdHJlZVwiKTtpZihlJiZlLl9tb2RlbC5kYXRhW3RdKXJldHVybiBpPWUsITF9KSxpfSxFLmZuLmpzdHJlZT1mdW5jdGlvbihpKXt2YXIgcj1cInN0cmluZ1wiPT10eXBlb2YgaSxzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxhPW51bGw7cmV0dXJuISghMD09PWkmJiF0aGlzLmxlbmd0aCkmJih0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1FLmpzdHJlZS5yZWZlcmVuY2UodGhpcyksdD1yJiZlP2VbaV06bnVsbDtpZihhPXImJnQ/dC5hcHBseShlLHMpOm51bGwsZXx8cnx8aSE9PVAmJiFFLmlzUGxhaW5PYmplY3QoaSl8fEUuanN0cmVlLmNyZWF0ZSh0aGlzLGkpLG51bGwhPT0oYT1lJiYhcnx8ITA9PT1pP2V8fCExOmEpJiZhIT09UClyZXR1cm4hMX0pLG51bGwhPT1hJiZhIT09UD9hOnRoaXMpfSxFLmV4cHIucHNldWRvcy5qc3RyZWU9RS5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIEUoZSkuaGFzQ2xhc3MoXCJqc3RyZWVcIikmJkUoZSkuZGF0YShcImpzdHJlZVwiKSE9PVB9fSksRS5qc3RyZWUuZGVmYXVsdHMuY29yZT17ZGF0YTohMSxzdHJpbmdzOiExLGNoZWNrX2NhbGxiYWNrOiExLGVycm9yOkUubm9vcCxhbmltYXRpb246MjAwLG11bHRpcGxlOiEwLHRoZW1lczp7bmFtZTohMSx1cmw6ITEsZGlyOiExLGRvdHM6ITAsaWNvbnM6ITAsZWxsaXBzaXM6ITEsc3RyaXBlczohMSx2YXJpYW50OiExLHJlc3BvbnNpdmU6ITF9LGV4cGFuZF9zZWxlY3RlZF9vbmxvYWQ6ITAsd29ya2VyOiEwLGZvcmNlX3RleHQ6ITEsZGJsY2xpY2tfdG9nZ2xlOiEwLGxvYWRlZF9zdGF0ZTohMSxyZXN0b3JlX2ZvY3VzOiEwLGNvbXB1dGVfZWxlbWVudHNfcG9zaXRpb25zOiExLGtleWJvYXJkOntcImN0cmwtc3BhY2VcIjpmdW5jdGlvbihlKXtlLnR5cGU9XCJjbGlja1wiLEUoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKGUpfSxlbnRlcjpmdW5jdGlvbihlKXtlLnR5cGU9XCJjbGlja1wiLEUoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKGUpfSxsZWZ0OmZ1bmN0aW9uKGUpe3ZhciBlO2UucHJldmVudERlZmF1bHQoKSx0aGlzLmlzX29wZW4oZS5jdXJyZW50VGFyZ2V0KT90aGlzLmNsb3NlX25vZGUoZS5jdXJyZW50VGFyZ2V0KTooZT10aGlzLmdldF9wYXJlbnQoZS5jdXJyZW50VGFyZ2V0KSkmJmUuaWQhPT1FLmpzdHJlZS5yb290JiZ0aGlzLmdldF9ub2RlKGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfSx1cDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGU9dGhpcy5nZXRfcHJldl9kb20oZS5jdXJyZW50VGFyZ2V0KTtlJiZlLmxlbmd0aCYmZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKX0scmlnaHQ6ZnVuY3Rpb24oZSl7dmFyIGU7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNfY2xvc2VkKGUuY3VycmVudFRhcmdldCk/dGhpcy5vcGVuX25vZGUoZS5jdXJyZW50VGFyZ2V0LGZ1bmN0aW9uKGUpe3RoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9KTohdGhpcy5pc19vcGVuKGUuY3VycmVudFRhcmdldCl8fChlPXRoaXMuZ2V0X25vZGUoZS5jdXJyZW50VGFyZ2V0LCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIilbMF0pJiZFKHRoaXMuX2ZpcnN0Q2hpbGQoZSkpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfSxkb3duOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgZT10aGlzLmdldF9uZXh0X2RvbShlLmN1cnJlbnRUYXJnZXQpO2UmJmUubGVuZ3RoJiZlLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfSxcIipcIjpmdW5jdGlvbihlKXt0aGlzLm9wZW5fYWxsKCl9LGhvbWU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPXRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pO2UmJkUoZSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS50cmlnZ2VyKFwiZm9jdXNcIil9LGVuZDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5sYXN0KCkudHJpZ2dlcihcImZvY3VzXCIpfSxmMjpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5lZGl0KGUuY3VycmVudFRhcmdldCl9fSxhbGxvd19yZXNlbGVjdDohMX0sRS5qc3RyZWUuY29yZS5wcm90b3R5cGU9e3BsdWdpbjpmdW5jdGlvbihlLHQpe3ZhciBpPUUuanN0cmVlLnBsdWdpbnNbZV07cmV0dXJuIGk/KHRoaXMuX2RhdGFbZV09e30saS5wcm90b3R5cGU9dGhpcyxuZXcgaSh0LHRoaXMpKTp0aGlzfSxpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZWw9e2RhdGE6e30sY2hhbmdlZDpbXSxmb3JjZV9mdWxsX3JlZHJhdzohMSxyZWRyYXdfdGltZW91dDohMSxkZWZhdWx0X3N0YXRlOntsb2FkZWQ6ITAsb3BlbmVkOiExLHNlbGVjdGVkOiExLGRpc2FibGVkOiExfX0sdGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XT17aWQ6RS5qc3RyZWUucm9vdCxwYXJlbnQ6bnVsbCxwYXJlbnRzOltdLGNoaWxkcmVuOltdLGNoaWxkcmVuX2Q6W10sc3RhdGU6e2xvYWRlZDohMX19LHRoaXMuZWxlbWVudD1FKGUpLmFkZENsYXNzKFwianN0cmVlIGpzdHJlZS1cIit0aGlzLl9pZCksdGhpcy5zZXR0aW5ncz10LHRoaXMuX2RhdGEuY29yZS5yZWFkeT0hMSx0aGlzLl9kYXRhLmNvcmUubG9hZGVkPSExLHRoaXMuX2RhdGEuY29yZS5ydGw9XCJydGxcIj09PXRoaXMuZWxlbWVudC5jc3MoXCJkaXJlY3Rpb25cIiksdGhpcy5lbGVtZW50W3RoaXMuX2RhdGEuY29yZS5ydGw/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtcnRsXCIpLHRoaXMuZWxlbWVudC5hdHRyKFwicm9sZVwiLFwidHJlZVwiKSx0aGlzLnNldHRpbmdzLmNvcmUubXVsdGlwbGUmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIiwhMCksdGhpcy5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiKXx8dGhpcy5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiLFwiMFwiKSx0aGlzLmJpbmQoKSx0aGlzLnRyaWdnZXIoXCJpbml0XCIpLHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbD10aGlzLmVsZW1lbnQuZmluZChcIiA+IHVsID4gbGlcIikuY2xvbmUoITApLHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbC5maW5kKFwibGlcIikuYWRkQmFjaygpLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDM9PT10aGlzLm5vZGVUeXBlJiYoIXRoaXMubm9kZVZhbHVlfHwvXlxccyskLy50ZXN0KHRoaXMubm9kZVZhbHVlKSl9KS5yZW1vdmUoKSx0aGlzLmVsZW1lbnQuaHRtbChcIjx1bCBjbGFzcz0nanN0cmVlLWNvbnRhaW5lci11bCBqc3RyZWUtY2hpbGRyZW4nIHJvbGU9J2dyb3VwJz48bGkgaWQ9J2pcIit0aGlzLl9pZCtcIl9sb2FkaW5nJyBjbGFzcz0nanN0cmVlLWluaXRpYWwtbm9kZSBqc3RyZWUtbG9hZGluZyBqc3RyZWUtbGVhZiBqc3RyZWUtbGFzdCcgcm9sZT0nbm9uZSc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS1vY2wnPjwvaT48YSBjbGFzcz0nanN0cmVlLWFuY2hvcicgcm9sZT0ndHJlZWl0ZW0nIGhyZWY9JyMnPjxpIGNsYXNzPSdqc3RyZWUtaWNvbiBqc3RyZWUtdGhlbWVpY29uLWhpZGRlbic+PC9pPlwiK3RoaXMuZ2V0X3N0cmluZyhcIkxvYWRpbmcgLi4uXCIpK1wiPC9hPjwvbGk+PC91bD5cIiksdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixcImpcIit0aGlzLl9pZCtcIl9sb2FkaW5nXCIpLHRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQ9dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuY2hpbGRyZW4oXCJsaVwiKS5maXJzdCgpLm91dGVySGVpZ2h0KCl8fDI0LHRoaXMuX2RhdGEuY29yZS5ub2RlPXRoaXMuX2NyZWF0ZV9wcm90b3R5cGVfbm9kZSgpLHRoaXMudHJpZ2dlcihcImxvYWRpbmdcIiksdGhpcy5sb2FkX25vZGUoRS5qc3RyZWUucm9vdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7aWYodGhpcy50cmlnZ2VyKFwiZGVzdHJveVwiKSx0aGlzLl93cmspdHJ5e3dpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuX3dyayksdGhpcy5fd3JrPW51bGx9Y2F0Y2goZSl7fWV8fHRoaXMuZWxlbWVudC5lbXB0eSgpLHRoaXMudGVhcmRvd24oKX0sX2NyZWF0ZV9wcm90b3R5cGVfbm9kZTpmdW5jdGlvbigpe3ZhciBlPWIuY3JlYXRlRWxlbWVudChcIkxJXCIpLHQsaTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJub25lXCIpLCh0PWIuY3JlYXRlRWxlbWVudChcIklcIikpLmNsYXNzTmFtZT1cImpzdHJlZS1pY29uIGpzdHJlZS1vY2xcIix0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxlLmFwcGVuZENoaWxkKHQpLCh0PWIuY3JlYXRlRWxlbWVudChcIkFcIikpLmNsYXNzTmFtZT1cImpzdHJlZS1hbmNob3JcIix0LnNldEF0dHJpYnV0ZShcImhyZWZcIixcIiNcIiksdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIiksdC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJ0cmVlaXRlbVwiKSwoaT1iLmNyZWF0ZUVsZW1lbnQoXCJJXCIpKS5jbGFzc05hbWU9XCJqc3RyZWUtaWNvbiBqc3RyZWUtdGhlbWVpY29uXCIsaS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksdC5hcHBlbmRDaGlsZChpKSxlLmFwcGVuZENoaWxkKHQpLHQ9aT1udWxsLGV9LF9rYmV2ZW50X3RvX2Z1bmM6ZnVuY3Rpb24oZSl7dmFyIHQ9ezg6XCJCYWNrc3BhY2VcIiw5OlwiVGFiXCIsMTM6XCJFbnRlclwiLDE5OlwiUGF1c2VcIiwyNzpcIkVzY1wiLDMyOlwiU3BhY2VcIiwzMzpcIlBhZ2VVcFwiLDM0OlwiUGFnZURvd25cIiwzNTpcIkVuZFwiLDM2OlwiSG9tZVwiLDM3OlwiTGVmdFwiLDM4OlwiVXBcIiwzOTpcIlJpZ2h0XCIsNDA6XCJEb3duXCIsNDQ6XCJQcmludFwiLDQ1OlwiSW5zZXJ0XCIsNDY6XCJEZWxldGVcIiw5NjpcIk51bXBhZDBcIiw5NzpcIk51bXBhZDFcIiw5ODpcIk51bXBhZDJcIiw5OTpcIk51bXBhZDNcIiwxMDA6XCJOdW1wYWQ0XCIsMTAxOlwiTnVtcGFkNVwiLDEwMjpcIk51bXBhZDZcIiwxMDM6XCJOdW1wYWQ3XCIsMTA0OlwiTnVtcGFkOFwiLDEwNTpcIk51bXBhZDlcIixcIi0xM1wiOlwiTnVtcGFkRW50ZXJcIiwxMTI6XCJGMVwiLDExMzpcIkYyXCIsMTE0OlwiRjNcIiwxMTU6XCJGNFwiLDExNjpcIkY1XCIsMTE3OlwiRjZcIiwxMTg6XCJGN1wiLDExOTpcIkY4XCIsMTIwOlwiRjlcIiwxMjE6XCJGMTBcIiwxMjI6XCJGMTFcIiwxMjM6XCJGMTJcIiwxNDQ6XCJOdW1sb2NrXCIsMTQ1OlwiU2Nyb2xsbG9ja1wiLDE2OlwiU2hpZnRcIiwxNzpcIkN0cmxcIiwxODpcIkFsdFwiLDQ4OlwiMFwiLDQ5OlwiMVwiLDUwOlwiMlwiLDUxOlwiM1wiLDUyOlwiNFwiLDUzOlwiNVwiLDU0OlwiNlwiLDU1OlwiN1wiLDU2OlwiOFwiLDU3OlwiOVwiLDU5OlwiO1wiLDYxOlwiPVwiLDY1OlwiYVwiLDY2OlwiYlwiLDY3OlwiY1wiLDY4OlwiZFwiLDY5OlwiZVwiLDcwOlwiZlwiLDcxOlwiZ1wiLDcyOlwiaFwiLDczOlwiaVwiLDc0OlwialwiLDc1Olwia1wiLDc2OlwibFwiLDc3OlwibVwiLDc4OlwiblwiLDc5Olwib1wiLDgwOlwicFwiLDgxOlwicVwiLDgyOlwiclwiLDgzOlwic1wiLDg0OlwidFwiLDg1OlwidVwiLDg2OlwidlwiLDg3Olwid1wiLDg4OlwieFwiLDg5OlwieVwiLDkwOlwielwiLDEwNzpcIitcIiwxMDk6XCItXCIsMTEwOlwiLlwiLDE4NjpcIjtcIiwxODc6XCI9XCIsMTg4OlwiLFwiLDE4OTpcIi1cIiwxOTA6XCIuXCIsMTkxOlwiL1wiLDE5MjpcImBcIiwyMTk6XCJbXCIsMjIwOlwiXFxcXFwiLDIyMTpcIl1cIiwyMjI6XCInXCIsMTExOlwiL1wiLDEwNjpcIipcIiwxNzM6XCItXCJ9LGk9W107aWYoZS5jdHJsS2V5JiZpLnB1c2goXCJjdHJsXCIpLGUuYWx0S2V5JiZpLnB1c2goXCJhbHRcIiksZS5zaGlmdEtleSYmaS5wdXNoKFwic2hpZnRcIiksaS5wdXNoKHRbZS53aGljaF0/dFtlLndoaWNoXS50b0xvd2VyQ2FzZSgpOmUud2hpY2gpLFwic2hpZnQtc2hpZnRcIj09PShpPWkuc29ydCgpLmpvaW4oXCItXCIpLnRvTG93ZXJDYXNlKCkpfHxcImN0cmwtY3RybFwiPT09aXx8XCJhbHQtYWx0XCI9PT1pKXJldHVybiBudWxsO3ZhciByPXRoaXMuc2V0dGluZ3MuY29yZS5rZXlib2FyZCxzLGE7Zm9yKHMgaW4gcilpZihyLmhhc093blByb3BlcnR5KHMpJiYoYT1cIi1cIiE9PShhPXMpJiZcIitcIiE9PWE/KGE9YS5yZXBsYWNlKFwiLS1cIixcIi1NSU5VU1wiKS5yZXBsYWNlKFwiKy1cIixcIi1NSU5VU1wiKS5yZXBsYWNlKFwiKytcIixcIi1QTFVTXCIpLnJlcGxhY2UoXCItK1wiLFwiLVBMVVNcIikpLnNwbGl0KC8tfFxcKy8pLnNvcnQoKS5qb2luKFwiLVwiKS5yZXBsYWNlKFwiTUlOVVNcIixcIi1cIikucmVwbGFjZShcIlBMVVNcIixcIitcIikudG9Mb3dlckNhc2UoKTphKT09PWkpcmV0dXJuIHJbc107cmV0dXJuIG51bGx9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dGhpcy51bmJpbmQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJqc3RyZWVcIikucmVtb3ZlRGF0YShcImpzdHJlZVwiKS5maW5kKFwiW2NsYXNzXj0nanN0cmVlJ11cIikuYWRkQmFjaygpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UoL2pzdHJlZVteIF0qfCQvZ2ksXCJcIil9KSx0aGlzLmVsZW1lbnQ9bnVsbH0sYmluZDpmdW5jdGlvbigpe3ZhciBzPVwiXCIsYT1udWxsLHQ9MDt0aGlzLmVsZW1lbnQub24oXCJkYmxjbGljay5qc3RyZWVcIixmdW5jdGlvbihlKXtpZihlLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1lLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITA7aWYoYi5zZWxlY3Rpb24mJmIuc2VsZWN0aW9uLmVtcHR5KWIuc2VsZWN0aW9uLmVtcHR5KCk7ZWxzZSBpZih3aW5kb3cuZ2V0U2VsZWN0aW9uKXt2YXIgZT13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7dHJ5e2UucmVtb3ZlQWxsUmFuZ2VzKCksZS5jb2xsYXBzZSgpfWNhdGNoKGUpe319fSkub24oXCJtb3VzZWRvd24uanN0cmVlXCIsZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PT10aGlzLmVsZW1lbnRbMF0mJihlLnByZXZlbnREZWZhdWx0KCksdD0rbmV3IERhdGUpfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlZG93bi5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oZSl7dGhpcy50b2dnbGVfbm9kZShlLnRhcmdldCl9LmJpbmQodGhpcykpLm9uKFwiZGJsY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDt0aGlzLnNldHRpbmdzLmNvcmUuZGJsY2xpY2tfdG9nZ2xlJiZ0aGlzLnRvZ2dsZV9ub2RlKGUudGFyZ2V0KX0uYmluZCh0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuY3VycmVudFRhcmdldCE9PWIuYWN0aXZlRWxlbWVudCYmRShlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoXCJmb2N1c1wiKSx0aGlzLmFjdGl2YXRlX25vZGUoZS5jdXJyZW50VGFyZ2V0LGUpfS5iaW5kKHRoaXMpKS5vbihcImtleWRvd24uanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDt0aGlzLl9kYXRhLmNvcmUucnRsJiYoMzc9PT1lLndoaWNoP2Uud2hpY2g9Mzk6Mzk9PT1lLndoaWNoJiYoZS53aGljaD0zNykpO3ZhciB0PXRoaXMuX2tiZXZlbnRfdG9fZnVuYyhlKTtpZih0KXt2YXIgZT10LmNhbGwodGhpcyxlKTtpZighMT09PWV8fCEwPT09ZSlyZXR1cm4gZX19LmJpbmQodGhpcykpLm9uKFwibG9hZF9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dC5zdGF0dXMmJih0Lm5vZGUuaWQhPT1FLmpzdHJlZS5yb290fHx0aGlzLl9kYXRhLmNvcmUubG9hZGVkfHwodGhpcy5fZGF0YS5jb3JlLmxvYWRlZD0hMCx0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKSYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKS5pZCksdGhpcy50cmlnZ2VyKFwibG9hZGVkXCIpKSx0aGlzLl9kYXRhLmNvcmUucmVhZHl8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih0aGlzLmVsZW1lbnQmJiF0aGlzLmdldF9jb250YWluZXJfdWwoKS5maW5kKFwiLmpzdHJlZS1sb2FkaW5nXCIpLmxlbmd0aCl7aWYodGhpcy5fZGF0YS5jb3JlLnJlYWR5PSEwLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGgpe2lmKHRoaXMuc2V0dGluZ3MuY29yZS5leHBhbmRfc2VsZWN0ZWRfb25sb2FkKXtmb3IodmFyIGU9W10sdCxpLHQ9MCxpPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7dDxpO3QrKyllPWUuY29uY2F0KHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW3RdXS5wYXJlbnRzKTtmb3IodD0wLGk9KGU9RS52YWthdGEuYXJyYXlfdW5pcXVlKGUpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLm9wZW5fbm9kZShlW3RdLCExLDApfXRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwicmVhZHlcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KX10aGlzLnRyaWdnZXIoXCJyZWFkeVwiKX19LmJpbmQodGhpcyksMCkpfS5iaW5kKHRoaXMpKS5vbihcImtleXByZXNzLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDthJiZjbGVhclRpbWVvdXQoYSksYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cz1cIlwifSw1MDApO3ZhciBpPVN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKSx0PXRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1hbmNob3JcIikuZmlsdGVyKFwiOnZpc2libGVcIiksZT10LmluZGV4KGIuYWN0aXZlRWxlbWVudCl8fDAscj0hMTtpZigxPChzKz1pKS5sZW5ndGgpe2lmKHQuc2xpY2UoZSkuZWFjaChmdW5jdGlvbihlLHQpe2lmKDA9PT1FKHQpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocykpcmV0dXJuIEUodCkudHJpZ2dlcihcImZvY3VzXCIpLCEocj0hMCl9LmJpbmQodGhpcykpLHIpcmV0dXJuO2lmKHQuc2xpY2UoMCxlKS5lYWNoKGZ1bmN0aW9uKGUsdCl7aWYoMD09PUUodCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzKSlyZXR1cm4gRSh0KS50cmlnZ2VyKFwiZm9jdXNcIiksIShyPSEwKX0uYmluZCh0aGlzKSkscilyZXR1cm59bmV3IFJlZ0V4cChcIl5cIitpLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZyxcIlxcXFwkJlwiKStcIiskXCIpLnRlc3QocykmJih0LnNsaWNlKGUrMSkuZWFjaChmdW5jdGlvbihlLHQpe2lmKEUodCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09aSlyZXR1cm4gRSh0KS50cmlnZ2VyKFwiZm9jdXNcIiksIShyPSEwKX0uYmluZCh0aGlzKSkscnx8dC5zbGljZSgwLGUrMSkuZWFjaChmdW5jdGlvbihlLHQpe2lmKEUodCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09aSlyZXR1cm4gRSh0KS50cmlnZ2VyKFwiZm9jdXNcIiksIShyPSEwKX0uYmluZCh0aGlzKSkpfS5iaW5kKHRoaXMpKS5vbihcImluaXQuanN0cmVlXCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzO3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz1lLmRvdHMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzPWUuc3RyaXBlcyx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zPWUuaWNvbnMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz1lLmVsbGlwc2lzLHRoaXMuc2V0X3RoZW1lKGUubmFtZXx8XCJkZWZhdWx0XCIsZS51cmwpLHRoaXMuc2V0X3RoZW1lX3ZhcmlhbnQoZS52YXJpYW50KX0uYmluZCh0aGlzKSkub24oXCJsb2FkaW5nLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM/XCJzaG93X2RvdHNcIjpcImhpZGVfZG90c1wiXSgpLHRoaXNbdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz9cInNob3dfaWNvbnNcIjpcImhpZGVfaWNvbnNcIl0oKSx0aGlzW3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz9cInNob3dfc3RyaXBlc1wiOlwiaGlkZV9zdHJpcGVzXCJdKCksdGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzP1wic2hvd19lbGxpcHNpc1wiOlwiaGlkZV9lbGxpcHNpc1wiXSgpfS5iaW5kKHRoaXMpKS5vbihcImJsdXIuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe3RoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwsRShlLmN1cnJlbnRUYXJnZXQpLmZpbHRlcihcIi5qc3RyZWUtaG92ZXJlZFwiKS50cmlnZ2VyKFwibW91c2VsZWF2ZVwiKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpLEUoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpfS5iaW5kKHRoaXMpKS5vbihcImZvY3VzLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldF9ub2RlKGUuY3VycmVudFRhcmdldCk7dCYmKHQuaWR8fDA9PT10LmlkKSYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPXQuaWQpLHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLm5vdChlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoXCJtb3VzZWxlYXZlXCIpLEUoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKFwibW91c2VlbnRlclwiKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSxFKGUuY3VycmVudFRhcmdldCkuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpfS5iaW5kKHRoaXMpKS5vbihcImZvY3VzLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dmFyIGU7NTAwPCtuZXcgRGF0ZS10JiYhdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQmJnRoaXMuc2V0dGluZ3MuY29yZS5yZXN0b3JlX2ZvY3VzJiYodD0wLChlPXRoaXMuZ2V0X25vZGUodGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksITApKSYmZS5maW5kKFwiPiAuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIikpfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlZW50ZXIuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe3RoaXMuaG92ZXJfbm9kZShlLmN1cnJlbnRUYXJnZXQpfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe3RoaXMuZGVob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCl9LmJpbmQodGhpcykpfSx1bmJpbmQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub2ZmKFwiLmpzdHJlZVwiKSxFKGIpLm9mZihcIi5qc3RyZWUtXCIrdGhpcy5faWQpfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7KCh0PXR8fHt9KS5pbnN0YW5jZT10aGlzKS5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKGUucmVwbGFjZShcIi5qc3RyZWVcIixcIlwiKStcIi5qc3RyZWVcIix0KX0sZ2V0X2NvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9LGdldF9jb250YWluZXJfdWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5maXJzdCgpfSxnZXRfc3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2V0dGluZ3MuY29yZS5zdHJpbmdzO3JldHVybiBFLnZha2F0YS5pc19mdW5jdGlvbih0KT90LmNhbGwodGhpcyxlKTp0JiZ0W2VdP3RbZV06ZX0sX2ZpcnN0Q2hpbGQ6ZnVuY3Rpb24oZSl7ZT1lP2UuZmlyc3RDaGlsZDpudWxsO3doaWxlKG51bGwhPT1lJiYxIT09ZS5ub2RlVHlwZSllPWUubmV4dFNpYmxpbmc7cmV0dXJuIGV9LF9uZXh0U2libGluZzpmdW5jdGlvbihlKXtlPWU/ZS5uZXh0U2libGluZzpudWxsO3doaWxlKG51bGwhPT1lJiYxIT09ZS5ub2RlVHlwZSllPWUubmV4dFNpYmxpbmc7cmV0dXJuIGV9LF9wcmV2aW91c1NpYmxpbmc6ZnVuY3Rpb24oZSl7ZT1lP2UucHJldmlvdXNTaWJsaW5nOm51bGw7d2hpbGUobnVsbCE9PWUmJjEhPT1lLm5vZGVUeXBlKWU9ZS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGV9LGdldF9ub2RlOmZ1bmN0aW9uKGUsdCl7dmFyIGk7KGU9ZSYmKGUuaWR8fDA9PT1lLmlkKT9lLmlkOmUpaW5zdGFuY2VvZiBFJiZlLmxlbmd0aCYmZVswXS5pZCYmKGU9ZVswXS5pZCk7dHJ5e2lmKHRoaXMuX21vZGVsLmRhdGFbZV0pZT10aGlzLl9tb2RlbC5kYXRhW2VdO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJnRoaXMuX21vZGVsLmRhdGFbZS5yZXBsYWNlKC9eIy8sXCJcIildKWU9dGhpcy5fbW9kZWwuZGF0YVtlLnJlcGxhY2UoL14jLyxcIlwiKV07ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGk9RShcIiNcIitlLnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpKS5sZW5ndGgmJnRoaXMuX21vZGVsLmRhdGFbaS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmF0dHIoXCJpZFwiKV0pZT10aGlzLl9tb2RlbC5kYXRhW2kuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5hdHRyKFwiaWRcIildO2Vsc2UgaWYoKGk9dGhpcy5lbGVtZW50LmZpbmQoZSkpLmxlbmd0aCYmdGhpcy5fbW9kZWwuZGF0YVtpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXSllPXRoaXMuX21vZGVsLmRhdGFbaS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmF0dHIoXCJpZFwiKV07ZWxzZXtpZighKGk9dGhpcy5lbGVtZW50LmZpbmQoZSkpLmxlbmd0aHx8IWkuaGFzQ2xhc3MoXCJqc3RyZWVcIikpcmV0dXJuITE7ZT10aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdfXJldHVybiBlPXQ/ZS5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5lbGVtZW50OkUoXCIjXCIrZS5pZC5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIiksdGhpcy5lbGVtZW50KTplfWNhdGNoKGUpe3JldHVybiExfX0sZ2V0X3BhdGg6ZnVuY3Rpb24oZSx0LGkpe2lmKCEoZT1lLnBhcmVudHM/ZTp0aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3R8fCFlLnBhcmVudHMpcmV0dXJuITE7dmFyIHIscyxhPVtdO2ZvcihhLnB1c2goaT9lLmlkOmUudGV4dCkscj0wLHM9ZS5wYXJlbnRzLmxlbmd0aDtyPHM7cisrKWEucHVzaChpP2UucGFyZW50c1tyXTp0aGlzLmdldF90ZXh0KGUucGFyZW50c1tyXSkpO3JldHVybiBhPWEucmV2ZXJzZSgpLnNsaWNlKDEpLHQ/YS5qb2luKHQpOmF9LGdldF9uZXh0X2RvbTpmdW5jdGlvbihlLHQpe3ZhciBpO2lmKChlPXRoaXMuZ2V0X25vZGUoZSwhMCkpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtpPXRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pO3doaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodClpPXRoaXMuX25leHRTaWJsaW5nKGkpO3JldHVybiEhaSYmRShpKX1pZighZXx8IWUubGVuZ3RoKXJldHVybiExO2lmKHQpe2k9ZVswXTtkb3tpPXRoaXMuX25leHRTaWJsaW5nKGkpfXdoaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodCk7cmV0dXJuISFpJiZFKGkpfWlmKGUuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSl7aT10aGlzLl9maXJzdENoaWxkKGUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdKTt3aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpaT10aGlzLl9uZXh0U2libGluZyhpKTtpZihudWxsIT09aSlyZXR1cm4gRShpKX1pPWVbMF07ZG97aT10aGlzLl9uZXh0U2libGluZyhpKX13aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpO3JldHVybiBudWxsIT09aT9FKGkpOmUucGFyZW50c1VudGlsKFwiLmpzdHJlZVwiLFwiLmpzdHJlZS1ub2RlXCIpLm5leHRBbGwoXCIuanN0cmVlLW5vZGU6dmlzaWJsZVwiKS5maXJzdCgpfSxnZXRfcHJldl9kb206ZnVuY3Rpb24oZSx0KXt2YXIgaTtpZigoZT10aGlzLmdldF9ub2RlKGUsITApKVswXT09PXRoaXMuZWxlbWVudFswXSl7aT10aGlzLmdldF9jb250YWluZXJfdWwoKVswXS5sYXN0Q2hpbGQ7d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KWk9dGhpcy5fcHJldmlvdXNTaWJsaW5nKGkpO3JldHVybiEhaSYmRShpKX1pZighZXx8IWUubGVuZ3RoKXJldHVybiExO2lmKHQpe2k9ZVswXTtkb3tpPXRoaXMuX3ByZXZpb3VzU2libGluZyhpKX13aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpO3JldHVybiEhaSYmRShpKX1pPWVbMF07ZG97aT10aGlzLl9wcmV2aW91c1NpYmxpbmcoaSl9d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KTtpZihudWxsPT09aSlyZXR1cm4hKCEoaT1lWzBdLnBhcmVudE5vZGUucGFyZW50Tm9kZSl8fCFpLmNsYXNzTmFtZXx8LTE9PT1pLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLW5vZGVcIikpJiZFKGkpO2U9RShpKTt3aGlsZShlLmhhc0NsYXNzKFwianN0cmVlLW9wZW5cIikpZT1lLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5maXJzdCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlOnZpc2libGU6bGFzdFwiKTtyZXR1cm4gZX0sZ2V0X3BhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiZlLnBhcmVudH0sZ2V0X2NoaWxkcmVuX2RvbTpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUsITApKVswXT09PXRoaXMuZWxlbWVudFswXT90aGlzLmdldF9jb250YWluZXJfdWwoKS5jaGlsZHJlbihcIi5qc3RyZWUtbm9kZVwiKTohKCFlfHwhZS5sZW5ndGgpJiZlLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5jaGlsZHJlbihcIi5qc3RyZWUtbm9kZVwiKX0saXNfcGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiYoITE9PT1lLnN0YXRlLmxvYWRlZHx8MDxlLmNoaWxkcmVuLmxlbmd0aCl9LGlzX2xvYWRlZDpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZS5sb2FkZWR9LGlzX2xvYWRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dGhpcy5nZXRfbm9kZShlKSkmJmUuc3RhdGUmJmUuc3RhdGUubG9hZGluZ30saXNfb3BlbjpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZS5vcGVuZWR9LGlzX2Nsb3NlZDpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmdGhpcy5pc19wYXJlbnQoZSkmJiFlLnN0YXRlLm9wZW5lZH0saXNfbGVhZjpmdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5pc19wYXJlbnQoZSl9LGxvYWRfbm9kZTpmdW5jdGlvbihuLG8pe3ZhciBlPXRoaXMuZ2V0X25vZGUobiwhMCksdCxpLHIscyxhO2lmKEUudmFrYXRhLmlzX2FycmF5KG4pKXJldHVybiB0aGlzLl9sb2FkX25vZGVzKG4uc2xpY2UoKSxvKSwhMDtpZighKG49dGhpcy5nZXRfbm9kZShuKSkpcmV0dXJuIG8mJm8uY2FsbCh0aGlzLG4sITEpLCExO2lmKG4uc3RhdGUubG9hZGVkKXtmb3Iobi5zdGF0ZS5sb2FkZWQ9ITEscj0wLHM9bi5wYXJlbnRzLmxlbmd0aDtyPHM7cisrKXRoaXMuX21vZGVsLmRhdGFbbi5wYXJlbnRzW3JdXS5jaGlsZHJlbl9kPUUudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9tb2RlbC5kYXRhW24ucGFyZW50c1tyXV0uY2hpbGRyZW5fZCxmdW5jdGlvbihlKXtyZXR1cm4tMT09PUUuaW5BcnJheShlLG4uY2hpbGRyZW5fZCl9KTtmb3IodD0wLGk9bi5jaGlsZHJlbl9kLmxlbmd0aDt0PGk7dCsrKXRoaXMuX21vZGVsLmRhdGFbbi5jaGlsZHJlbl9kW3RdXS5zdGF0ZS5zZWxlY3RlZCYmKGE9ITApLGRlbGV0ZSB0aGlzLl9tb2RlbC5kYXRhW24uY2hpbGRyZW5fZFt0XV07YSYmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGZ1bmN0aW9uKGUpe3JldHVybi0xPT09RS5pbkFycmF5KGUsbi5jaGlsZHJlbl9kKX0pKSxuLmNoaWxkcmVuPVtdLG4uY2hpbGRyZW5fZD1bXSxhJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImxvYWRfbm9kZVwiLG5vZGU6bixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KX1yZXR1cm4gbi5zdGF0ZS5mYWlsZWQ9ITEsbi5zdGF0ZS5sb2FkaW5nPSEwLChuLmlkIT09RS5qc3RyZWUucm9vdD9lLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIik6ZSkuYXR0cihcImFyaWEtYnVzeVwiLCEwKSxlLmFkZENsYXNzKFwianN0cmVlLWxvYWRpbmdcIiksdGhpcy5fbG9hZF9ub2RlKG4sZnVuY3Rpb24oZSl7KG49dGhpcy5fbW9kZWwuZGF0YVtuLmlkXSkuc3RhdGUubG9hZGluZz0hMSxuLnN0YXRlLmxvYWRlZD1lLG4uc3RhdGUuZmFpbGVkPSFuLnN0YXRlLmxvYWRlZDtmb3IodmFyIHQ9dGhpcy5nZXRfbm9kZShuLCEwKSxpPTAscj0wLHM9dGhpcy5fbW9kZWwuZGF0YSxhPSExLGk9MCxyPW4uY2hpbGRyZW4ubGVuZ3RoO2k8cjtpKyspaWYoc1tuLmNoaWxkcmVuW2ldXSYmIXNbbi5jaGlsZHJlbltpXV0uc3RhdGUuaGlkZGVuKXthPSEwO2JyZWFrfW4uc3RhdGUubG9hZGVkJiZ0JiZ0Lmxlbmd0aCYmKHQucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2xvc2VkIGpzdHJlZS1vcGVuIGpzdHJlZS1sZWFmXCIpLGE/XCIjXCIhPT1uLmlkJiZ0LmFkZENsYXNzKG4uc3RhdGUub3BlbmVkP1wianN0cmVlLW9wZW5cIjpcImpzdHJlZS1jbG9zZWRcIik6dC5hZGRDbGFzcyhcImpzdHJlZS1sZWFmXCIpKSwobi5pZCE9PUUuanN0cmVlLnJvb3Q/dC5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpOnQpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksdC5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLHRoaXMudHJpZ2dlcihcImxvYWRfbm9kZVwiLHtub2RlOm4sc3RhdHVzOmV9KSxvJiZvLmNhbGwodGhpcyxuLGUpfS5iaW5kKHRoaXMpKSwhMH0sX2xvYWRfbm9kZXM6ZnVuY3Rpb24oZSx0LGkscil7Zm9yKHZhciBzPSEwLGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2FkX25vZGVzKGUsdCwhMCl9LG49dGhpcy5fbW9kZWwuZGF0YSxvLGQsYz1bXSxvPTAsZD1lLmxlbmd0aDtvPGQ7bysrKW5bZVtvXV0mJighbltlW29dXS5zdGF0ZS5sb2FkZWQmJiFuW2Vbb11dLnN0YXRlLmZhaWxlZHx8IWkmJnIpJiYodGhpcy5pc19sb2FkaW5nKGVbb10pfHx0aGlzLmxvYWRfbm9kZShlW29dLGEpLHM9ITEpO2lmKHMpe2ZvcihvPTAsZD1lLmxlbmd0aDtvPGQ7bysrKW5bZVtvXV0mJm5bZVtvXV0uc3RhdGUubG9hZGVkJiZjLnB1c2goZVtvXSk7dCYmIXQuZG9uZSYmKHQuY2FsbCh0aGlzLGMpLHQuZG9uZT0hMCl9fSxsb2FkX2FsbDpmdW5jdGlvbihlLHQpe2lmKGU9ZXx8RS5qc3RyZWUucm9vdCwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7dmFyIGk9W10scj10aGlzLl9tb2RlbC5kYXRhLHM9cltlLmlkXS5jaGlsZHJlbl9kLGEsbjtmb3IoZS5zdGF0ZSYmIWUuc3RhdGUubG9hZGVkJiZpLnB1c2goZS5pZCksYT0wLG49cy5sZW5ndGg7YTxuO2ErKylyW3NbYV1dJiZyW3NbYV1dLnN0YXRlJiYhcltzW2FdXS5zdGF0ZS5sb2FkZWQmJmkucHVzaChzW2FdKTtpLmxlbmd0aD90aGlzLl9sb2FkX25vZGVzKGksZnVuY3Rpb24oKXt0aGlzLmxvYWRfYWxsKGUsdCl9KToodCYmdC5jYWxsKHRoaXMsZSksdGhpcy50cmlnZ2VyKFwibG9hZF9hbGxcIix7bm9kZTplfSkpfSxfbG9hZF9ub2RlOmZ1bmN0aW9uKHMsYSl7dmFyIGU9dGhpcy5zZXR0aW5ncy5jb3JlLmRhdGEsdCxuPWZ1bmN0aW9uIGUoKXtyZXR1cm4gMyE9PXRoaXMubm9kZVR5cGUmJjghPT10aGlzLm5vZGVUeXBlfTtyZXR1cm4gZT9FLnZha2F0YS5pc19mdW5jdGlvbihlKT9lLmNhbGwodGhpcyxzLGZ1bmN0aW9uKGUpeyExPT09ZT9hLmNhbGwodGhpcywhMSk6dGhpc1tcInN0cmluZ1wiPT10eXBlb2YgZT9cIl9hcHBlbmRfaHRtbF9kYXRhXCI6XCJfYXBwZW5kX2pzb25fZGF0YVwiXShzLFwic3RyaW5nXCI9PXR5cGVvZiBlP0UoRS5wYXJzZUhUTUwoZSkpLmZpbHRlcihuKTplLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSl9LmJpbmQodGhpcykpOlwib2JqZWN0XCI9PXR5cGVvZiBlP2UudXJsPyhlPUUuZXh0ZW5kKCEwLHt9LGUpLEUudmFrYXRhLmlzX2Z1bmN0aW9uKGUudXJsKSYmKGUudXJsPWUudXJsLmNhbGwodGhpcyxzKSksRS52YWthdGEuaXNfZnVuY3Rpb24oZS5kYXRhKSYmKGUuZGF0YT1lLmRhdGEuY2FsbCh0aGlzLHMpKSxFLmFqYXgoZSkuZG9uZShmdW5jdGlvbihlLHQsaSl7dmFyIHI9aS5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtyZXR1cm4gciYmLTEhPT1yLmluZGV4T2YoXCJqc29uXCIpfHxcIm9iamVjdFwiPT10eXBlb2YgZT90aGlzLl9hcHBlbmRfanNvbl9kYXRhKHMsZSxmdW5jdGlvbihlKXthLmNhbGwodGhpcyxlKX0pOnImJi0xIT09ci5pbmRleE9mKFwiaHRtbFwiKXx8XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5fYXBwZW5kX2h0bWxfZGF0YShzLEUoRS5wYXJzZUhUTUwoZSkpLmZpbHRlcihuKSxmdW5jdGlvbihlKXthLmNhbGwodGhpcyxlKX0pOih0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJhamF4XCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNFwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpzLmlkLHhocjppfSl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLGEuY2FsbCh0aGlzLCExKSl9LmJpbmQodGhpcykpLmZhaWwoZnVuY3Rpb24oZSl7dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiYWpheFwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDRcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBub2RlXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7aWQ6cy5pZCx4aHI6ZX0pfSxhLmNhbGwodGhpcywhMSksdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcil9LmJpbmQodGhpcykpKToodD1FLnZha2F0YS5pc19hcnJheShlKT9FLmV4dGVuZCghMCxbXSxlKTpFLmlzUGxhaW5PYmplY3QoZSk/RS5leHRlbmQoITAse30sZSk6ZSxzLmlkPT09RS5qc3RyZWUucm9vdD90aGlzLl9hcHBlbmRfanNvbl9kYXRhKHMsdCxmdW5jdGlvbihlKXthLmNhbGwodGhpcyxlKX0pOih0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJub2RhdGFcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA1XCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgbm9kZVwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOnMuaWR9KX0sdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksYS5jYWxsKHRoaXMsITEpKSk6XCJzdHJpbmdcIj09dHlwZW9mIGU/cy5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5fYXBwZW5kX2h0bWxfZGF0YShzLEUoRS5wYXJzZUhUTUwoZSkpLmZpbHRlcihuKSxmdW5jdGlvbihlKXthLmNhbGwodGhpcyxlKX0pOih0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJub2RhdGFcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA2XCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgbm9kZVwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOnMuaWR9KX0sdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksYS5jYWxsKHRoaXMsITEpKTphLmNhbGwodGhpcywhMSk6cy5pZD09PUUuanN0cmVlLnJvb3Q/dGhpcy5fYXBwZW5kX2h0bWxfZGF0YShzLHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbC5jbG9uZSghMCksZnVuY3Rpb24oZSl7YS5jYWxsKHRoaXMsZSl9KTphLmNhbGwodGhpcywhMSl9LF9ub2RlX2NoYW5nZWQ6ZnVuY3Rpb24oZSl7KGU9dGhpcy5nZXRfbm9kZShlKSkmJi0xPT09RS5pbkFycmF5KGUuaWQsdGhpcy5fbW9kZWwuY2hhbmdlZCkmJnRoaXMuX21vZGVsLmNoYW5nZWQucHVzaChlLmlkKX0sX2FwcGVuZF9odG1sX2RhdGE6ZnVuY3Rpb24oZSx0LGkpeyhlPXRoaXMuZ2V0X25vZGUoZSkpLmNoaWxkcmVuPVtdLGUuY2hpbGRyZW5fZD1bXTt2YXIgdD10LmlzKFwidWxcIik/dC5jaGlsZHJlbigpOnQscj1lLmlkLHM9W10sYT1bXSxuPXRoaXMuX21vZGVsLmRhdGEsbz1uW3JdLGU9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCxkLGMsbDtmb3IodC5lYWNoKGZ1bmN0aW9uKGUsdCl7KGQ9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKEUodCkscixvLnBhcmVudHMuY29uY2F0KCkpKSYmKHMucHVzaChkKSxhLnB1c2goZCksbltkXS5jaGlsZHJlbl9kLmxlbmd0aCYmKGE9YS5jb25jYXQobltkXS5jaGlsZHJlbl9kKSkpfS5iaW5kKHRoaXMpKSxvLmNoaWxkcmVuPXMsby5jaGlsZHJlbl9kPWEsYz0wLGw9by5wYXJlbnRzLmxlbmd0aDtjPGw7YysrKW5bby5wYXJlbnRzW2NdXS5jaGlsZHJlbl9kPW5bby5wYXJlbnRzW2NdXS5jaGlsZHJlbl9kLmNvbmNhdChhKTt0aGlzLnRyaWdnZXIoXCJtb2RlbFwiLHtub2RlczphLHBhcmVudDpyfSksciE9PUUuanN0cmVlLnJvb3Q/KHRoaXMuX25vZGVfY2hhbmdlZChyKSx0aGlzLnJlZHJhdygpKToodGhpcy5nZXRfY29udGFpbmVyX3VsKCkuY2hpbGRyZW4oXCIuanN0cmVlLWluaXRpYWwtbm9kZVwiKS5yZW1vdmUoKSx0aGlzLnJlZHJhdyghMCkpLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGghPT1lJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcIm1vZGVsXCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSksaS5jYWxsKHRoaXMsITApfSxfYXBwZW5kX2pzb25fZGF0YTpmdW5jdGlvbihlLHQsZCxpKXtpZihudWxsIT09dGhpcy5lbGVtZW50KXsoZT10aGlzLmdldF9ub2RlKGUpKS5jaGlsZHJlbj1bXSxlLmNoaWxkcmVuX2Q9W10sdC5kJiZcInN0cmluZ1wiPT10eXBlb2YodD10LmQpJiYodD1KU09OLnBhcnNlKHQpKSxFLnZha2F0YS5pc19hcnJheSh0KXx8KHQ9W3RdKTt2YXIgcj1udWxsLHM9e2RmOnRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUsZGF0OnQscGFyOmUuaWQsbTp0aGlzLl9tb2RlbC5kYXRhLHRfaWQ6dGhpcy5faWQsdF9jbnQ6dGhpcy5fY250LHNlbDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9LHY9dGhpcyxhPWZ1bmN0aW9uKGUsYyl7dmFyIHQ9KGU9ZS5kYXRhP2UuZGF0YTplKS5kYXQsaT1lLnBhcixyPVtdLHM9W10sbD1bXSxoPWUuZGYsXz1lLnRfaWQsZz1lLnRfY250LHU9ZS5tLGE9dVtpXSxlPWUuc2VsLG4sbyxkLGYscD1mdW5jdGlvbihlLHQsaSl7aT1pP2kuY29uY2F0KCk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByPWUuaWQudG9TdHJpbmcoKSxzLGEsbixvLGQ9e2lkOnIsdGV4dDplLnRleHR8fFwiXCIsaWNvbjplLmljb249PT1jfHxlLmljb24scGFyZW50OnQscGFyZW50czppLGNoaWxkcmVuOmUuY2hpbGRyZW58fFtdLGNoaWxkcmVuX2Q6ZS5jaGlsZHJlbl9kfHxbXSxkYXRhOmUuZGF0YSxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX07Zm9yKHMgaW4gaCloLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1oW3NdKTtpZihlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGQuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGQuaWNvbiE9PWMmJm51bGwhPT1kLmljb24mJlwiXCIhPT1kLmljb258fChkLmljb249ITApLGUmJmUuZGF0YSYmKGQuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKHMgaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1lLmRhdGEuanN0cmVlW3NdKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IocyBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkocykmJihkLnN0YXRlW3NdPWUuc3RhdGVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKHMgaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGQubGlfYXR0cltzXT1lLmxpX2F0dHJbc10pO2lmKGQubGlfYXR0ci5pZHx8KGQubGlfYXR0ci5pZD1yKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKHMgaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkocykmJihkLmFfYXR0cltzXT1lLmFfYXR0cltzXSk7Zm9yKGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGQuc3RhdGUubG9hZGVkPSExLGQuY2hpbGRyZW49W10sZC5jaGlsZHJlbl9kPVtdKSxzPTAsYT0odVtkLmlkXT1kKS5jaGlsZHJlbi5sZW5ndGg7czxhO3MrKyluPXAodVtkLmNoaWxkcmVuW3NdXSxkLmlkLGkpLG89dVtuXSxkLmNoaWxkcmVuX2QucHVzaChuKSxvLmNoaWxkcmVuX2QubGVuZ3RoJiYoZC5jaGlsZHJlbl9kPWQuY2hpbGRyZW5fZC5jb25jYXQoby5jaGlsZHJlbl9kKSk7cmV0dXJuIGRlbGV0ZSBlLmRhdGEsZGVsZXRlIGUuY2hpbGRyZW4sdVtkLmlkXS5vcmlnaW5hbD1lLGQuc3RhdGUuc2VsZWN0ZWQmJmwucHVzaChkLmlkKSxkLmlkfSxtPWZ1bmN0aW9uKGUsdCxpKXtpPWk/aS5jb25jYXQoKTpbXSx0JiZpLnVuc2hpZnQodCk7dmFyIHI9ITEscyxhLG4sbyxkO2Rve3I9XCJqXCIrXytcIl9cIisgKytnfXdoaWxlKHVbcl0pO2ZvcihzIGluIGQ9e2lkOiExLHRleHQ6XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpcIlwiLGljb246XCJvYmplY3RcIiE9dHlwZW9mIGV8fGUuaWNvbj09PWN8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxkYXRhOm51bGwsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9LGgpaC5oYXNPd25Qcm9wZXJ0eShzKSYmKGQuc3RhdGVbc109aFtzXSk7aWYoZSYmKGUuaWR8fDA9PT1lLmlkKSYmKGQuaWQ9ZS5pZC50b1N0cmluZygpKSxlJiZlLnRleHQmJihkLnRleHQ9ZS50ZXh0KSxlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGQuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGQuaWNvbiE9PWMmJm51bGwhPT1kLmljb24mJlwiXCIhPT1kLmljb258fChkLmljb249ITApLGUmJmUuZGF0YSYmKGQuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKHMgaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1lLmRhdGEuanN0cmVlW3NdKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IocyBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkocykmJihkLnN0YXRlW3NdPWUuc3RhdGVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKHMgaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGQubGlfYXR0cltzXT1lLmxpX2F0dHJbc10pO2lmKGQubGlfYXR0ci5pZCYmIWQuaWQmJjAhPT1kLmlkJiYoZC5pZD1kLmxpX2F0dHIuaWQudG9TdHJpbmcoKSksZC5pZHx8MD09PWQuaWR8fChkLmlkPXIpLGQubGlfYXR0ci5pZHx8KGQubGlfYXR0ci5pZD1kLmlkKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKHMgaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkocykmJihkLmFfYXR0cltzXT1lLmFfYXR0cltzXSk7aWYoZSYmZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5sZW5ndGgpe2ZvcihzPTAsYT1lLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW49bShlLmNoaWxkcmVuW3NdLGQuaWQsaSksbz11W25dLGQuY2hpbGRyZW4ucHVzaChuKSxvLmNoaWxkcmVuX2QubGVuZ3RoJiYoZC5jaGlsZHJlbl9kPWQuY2hpbGRyZW5fZC5jb25jYXQoby5jaGlsZHJlbl9kKSk7ZC5jaGlsZHJlbl9kPWQuY2hpbGRyZW5fZC5jb25jYXQoZC5jaGlsZHJlbil9cmV0dXJuIGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGQuc3RhdGUubG9hZGVkPSExLGQuY2hpbGRyZW49W10sZC5jaGlsZHJlbl9kPVtdKSxkZWxldGUgZS5kYXRhLGRlbGV0ZSBlLmNoaWxkcmVuLGQub3JpZ2luYWw9ZSwodVtkLmlkXT1kKS5zdGF0ZS5zZWxlY3RlZCYmbC5wdXNoKGQuaWQpLGQuaWR9O2lmKHQubGVuZ3RoJiZ0WzBdLmlkIT09YyYmdFswXS5wYXJlbnQhPT1jKXtmb3Iobz0wLGQ9dC5sZW5ndGg7bzxkO28rKyl0W29dLmNoaWxkcmVufHwodFtvXS5jaGlsZHJlbj1bXSksdFtvXS5zdGF0ZXx8KHRbb10uc3RhdGU9e30pLHVbdFtvXS5pZC50b1N0cmluZygpXT10W29dO2ZvcihvPTAsZD10Lmxlbmd0aDtvPGQ7bysrKXVbdFtvXS5wYXJlbnQudG9TdHJpbmcoKV0/KHVbdFtvXS5wYXJlbnQudG9TdHJpbmcoKV0uY2hpbGRyZW4ucHVzaCh0W29dLmlkLnRvU3RyaW5nKCkpLGEuY2hpbGRyZW5fZC5wdXNoKHRbb10uaWQudG9TdHJpbmcoKSkpOnZvaWQgMCE9PXYmJih2Ll9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJwYXJzZVwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDdcIixyZWFzb246XCJOb2RlIHdpdGggaW52YWxpZCBwYXJlbnRcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDp0W29dLmlkLnRvU3RyaW5nKCkscGFyZW50OnRbb10ucGFyZW50LnRvU3RyaW5nKCl9KX0sdi5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodix2Ll9kYXRhLmNvcmUubGFzdF9lcnJvcikpO2ZvcihvPTAsZD1hLmNoaWxkcmVuLmxlbmd0aDtvPGQ7bysrKW49cCh1W2EuY2hpbGRyZW5bb11dLGksYS5wYXJlbnRzLmNvbmNhdCgpKSxzLnB1c2gobiksdVtuXS5jaGlsZHJlbl9kLmxlbmd0aCYmKHM9cy5jb25jYXQodVtuXS5jaGlsZHJlbl9kKSk7Zm9yKG89MCxkPWEucGFyZW50cy5sZW5ndGg7bzxkO28rKyl1W2EucGFyZW50c1tvXV0uY2hpbGRyZW5fZD11W2EucGFyZW50c1tvXV0uY2hpbGRyZW5fZC5jb25jYXQocyk7Zj17Y250OmcsbW9kOnUsc2VsOmUscGFyOmksZHBjOnMsYWRkOmx9fWVsc2V7Zm9yKG89MCxkPXQubGVuZ3RoO288ZDtvKyspKG49bSh0W29dLGksYS5wYXJlbnRzLmNvbmNhdCgpKSkmJihyLnB1c2gobikscy5wdXNoKG4pLHVbbl0uY2hpbGRyZW5fZC5sZW5ndGgmJihzPXMuY29uY2F0KHVbbl0uY2hpbGRyZW5fZCkpKTtmb3IoYS5jaGlsZHJlbj1yLGEuY2hpbGRyZW5fZD1zLG89MCxkPWEucGFyZW50cy5sZW5ndGg7bzxkO28rKyl1W2EucGFyZW50c1tvXV0uY2hpbGRyZW5fZD11W2EucGFyZW50c1tvXV0uY2hpbGRyZW5fZC5jb25jYXQocyk7Zj17Y250OmcsbW9kOnUsc2VsOmUscGFyOmksZHBjOnMsYWRkOmx9fWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJnZvaWQgMCE9PXdpbmRvdy5kb2N1bWVudClyZXR1cm4gZjtwb3N0TWVzc2FnZShmKX0sbj1mdW5jdGlvbihlLHQpe2lmKG51bGwhPT10aGlzLmVsZW1lbnQpe3ZhciBpLHI7Zm9yKGkgaW4gdGhpcy5fY250PWUuY250LHI9dGhpcy5fbW9kZWwuZGF0YSlyLmhhc093blByb3BlcnR5KGkpJiZyW2ldLnN0YXRlJiZyW2ldLnN0YXRlLmxvYWRpbmcmJmUubW9kW2ldJiYoZS5tb2RbaV0uc3RhdGUubG9hZGluZz0hMCk7aWYodGhpcy5fbW9kZWwuZGF0YT1lLm1vZCx0KXt2YXIgcyxhPWUuYWRkLG49ZS5zZWwsbz10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuc2xpY2UoKSxyPXRoaXMuX21vZGVsLmRhdGE7aWYobi5sZW5ndGghPT1vLmxlbmd0aHx8RS52YWthdGEuYXJyYXlfdW5pcXVlKG4uY29uY2F0KG8pKS5sZW5ndGghPT1uLmxlbmd0aCl7Zm9yKGk9MCxzPW4ubGVuZ3RoO2k8cztpKyspLTE9PT1FLmluQXJyYXkobltpXSxhKSYmLTE9PT1FLmluQXJyYXkobltpXSxvKSYmKHJbbltpXV0uc3RhdGUuc2VsZWN0ZWQ9ITEpO2ZvcihpPTAscz1vLmxlbmd0aDtpPHM7aSsrKS0xPT09RS5pbkFycmF5KG9baV0sbikmJihyW29baV1dLnN0YXRlLnNlbGVjdGVkPSEwKX19ZS5hZGQubGVuZ3RoJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoZS5hZGQpKSx0aGlzLnRyaWdnZXIoXCJtb2RlbFwiLHtub2RlczplLmRwYyxwYXJlbnQ6ZS5wYXJ9KSxlLnBhciE9PUUuanN0cmVlLnJvb3Q/KHRoaXMuX25vZGVfY2hhbmdlZChlLnBhciksdGhpcy5yZWRyYXcoKSk6dGhpcy5yZWRyYXcoITApLGUuYWRkLmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJtb2RlbFwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pLCF0JiZjP2MoZnVuY3Rpb24oKXtkLmNhbGwodiwhMCl9KTpkLmNhbGwodiwhMCl9fTtpZih0aGlzLnNldHRpbmdzLmNvcmUud29ya2VyJiZ3aW5kb3cuQmxvYiYmd2luZG93LlVSTCYmd2luZG93Lldvcmtlcil0cnl7bnVsbD09PXRoaXMuX3dyayYmKHRoaXMuX3dyaz13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgd2luZG93LkJsb2IoW1wic2VsZi5vbm1lc3NhZ2UgPSBcIithLnRvU3RyaW5nKCldLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSkpLCF0aGlzLl9kYXRhLmNvcmUud29ya2luZ3x8aT8odGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITAsKHI9bmV3IHdpbmRvdy5Xb3JrZXIodGhpcy5fd3JrKSkub25tZXNzYWdlPWZ1bmN0aW9uKGUpe24uY2FsbCh0aGlzLGUuZGF0YSwhMCk7dHJ5e3IudGVybWluYXRlKCkscj1udWxsfWNhdGNoKGUpe310aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLmxlbmd0aD90aGlzLl9hcHBlbmRfanNvbl9kYXRhLmFwcGx5KHRoaXMsdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5zaGlmdCgpKTp0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMX0uYmluZCh0aGlzKSxyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7bi5jYWxsKHRoaXMsYShzKSwhMSksdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5sZW5ndGg/dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUuc2hpZnQoKSk6dGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITF9LmJpbmQodGhpcykscy5wYXI/ci5wb3N0TWVzc2FnZShzKTp0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLmxlbmd0aD90aGlzLl9hcHBlbmRfanNvbl9kYXRhLmFwcGx5KHRoaXMsdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5zaGlmdCgpKTp0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMSk6dGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5wdXNoKFtlLHQsZCwhMF0pfWNhdGNoKGUpe24uY2FsbCh0aGlzLGEocyksITEpLHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExfWVsc2Ugbi5jYWxsKHRoaXMsYShzKSwhMSl9fSxfcGFyc2VfbW9kZWxfZnJvbV9odG1sOmZ1bmN0aW9uKGUsdCxpKXtpPWk/W10uY29uY2F0KGkpOltdLHQmJmkudW5zaGlmdCh0KTt2YXIgcixzLGE9dGhpcy5fbW9kZWwuZGF0YSxuPXtpZDohMSx0ZXh0OiExLGljb246ITAscGFyZW50OnQscGFyZW50czppLGNoaWxkcmVuOltdLGNoaWxkcmVuX2Q6W10sZGF0YTpudWxsLHN0YXRlOnt9LGxpX2F0dHI6e2lkOiExfSxhX2F0dHI6e2hyZWY6XCIjXCJ9LG9yaWdpbmFsOiExfSxvLHQsZDtmb3IobyBpbiB0aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlKXRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUuaGFzT3duUHJvcGVydHkobykmJihuLnN0YXRlW29dPXRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGVbb10pO2lmKHQ9RS52YWthdGEuYXR0cmlidXRlcyhlLCEwKSxFLmVhY2godCxmdW5jdGlvbihlLHQpe3JldHVybiEodD1FLnZha2F0YS50cmltKHQpKS5sZW5ndGh8fChuLmxpX2F0dHJbZV09dCx2b2lkKFwiaWRcIj09PWUmJihuLmlkPXQudG9TdHJpbmcoKSkpKX0pLCh0PWUuY2hpbGRyZW4oXCJhXCIpLmZpcnN0KCkpLmxlbmd0aCYmKHQ9RS52YWthdGEuYXR0cmlidXRlcyh0LCEwKSxFLmVhY2godCxmdW5jdGlvbihlLHQpeyh0PUUudmFrYXRhLnRyaW0odCkpLmxlbmd0aCYmKG4uYV9hdHRyW2VdPXQpfSkpLCh0PShlLmNoaWxkcmVuKFwiYVwiKS5maXJzdCgpLmxlbmd0aD9lLmNoaWxkcmVuKFwiYVwiKS5maXJzdCgpOmUpLmNsb25lKCkpLmNoaWxkcmVuKFwiaW5zLCBpLCB1bFwiKS5yZW1vdmUoKSx0PXQuaHRtbCgpLHQ9RShcIjxkaXY+PC9kaXY+XCIpLmh0bWwodCksbi50ZXh0PXRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0P3QudGV4dCgpOnQuaHRtbCgpLHQ9ZS5kYXRhKCksbi5kYXRhPXQ/RS5leHRlbmQoITAse30sdCk6bnVsbCxuLnN0YXRlLm9wZW5lZD1lLmhhc0NsYXNzKFwianN0cmVlLW9wZW5cIiksbi5zdGF0ZS5zZWxlY3RlZD1lLmNoaWxkcmVuKFwiYVwiKS5oYXNDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLG4uc3RhdGUuZGlzYWJsZWQ9ZS5jaGlsZHJlbihcImFcIikuaGFzQ2xhc3MoXCJqc3RyZWUtZGlzYWJsZWRcIiksbi5kYXRhJiZuLmRhdGEuanN0cmVlKWZvcihvIGluIG4uZGF0YS5qc3RyZWUpbi5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShvKSYmKG4uc3RhdGVbb109bi5kYXRhLmpzdHJlZVtvXSk7KHQ9ZS5jaGlsZHJlbihcImFcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKSkubGVuZ3RoJiYobi5pY29uPSF0Lmhhc0NsYXNzKFwianN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIikmJnQuYXR0cihcInJlbFwiKSksbi5zdGF0ZS5pY29uIT09UCYmKG4uaWNvbj1uLnN0YXRlLmljb24pLG4uaWNvbiE9PVAmJm51bGwhPT1uLmljb24mJlwiXCIhPT1uLmljb258fChuLmljb249ITApLHQ9ZS5jaGlsZHJlbihcInVsXCIpLmNoaWxkcmVuKFwibGlcIik7ZG97ZD1cImpcIit0aGlzLl9pZCtcIl9cIisgKyt0aGlzLl9jbnR9d2hpbGUoYVtkXSk7cmV0dXJuIG4uaWQ9bi5saV9hdHRyLmlkP24ubGlfYXR0ci5pZC50b1N0cmluZygpOmQsdC5sZW5ndGg/KHQuZWFjaChmdW5jdGlvbihlLHQpe3I9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKEUodCksbi5pZCxpKSxzPXRoaXMuX21vZGVsLmRhdGFbcl0sbi5jaGlsZHJlbi5wdXNoKHIpLHMuY2hpbGRyZW5fZC5sZW5ndGgmJihuLmNoaWxkcmVuX2Q9bi5jaGlsZHJlbl9kLmNvbmNhdChzLmNoaWxkcmVuX2QpKX0uYmluZCh0aGlzKSksbi5jaGlsZHJlbl9kPW4uY2hpbGRyZW5fZC5jb25jYXQobi5jaGlsZHJlbikpOmUuaGFzQ2xhc3MoXCJqc3RyZWUtY2xvc2VkXCIpJiYobi5zdGF0ZS5sb2FkZWQ9ITEpLG4ubGlfYXR0ci5jbGFzcyYmKG4ubGlfYXR0ci5jbGFzcz1uLmxpX2F0dHIuY2xhc3MucmVwbGFjZShcImpzdHJlZS1jbG9zZWRcIixcIlwiKS5yZXBsYWNlKFwianN0cmVlLW9wZW5cIixcIlwiKSksbi5hX2F0dHIuY2xhc3MmJihuLmFfYXR0ci5jbGFzcz1uLmFfYXR0ci5jbGFzcy5yZXBsYWNlKFwianN0cmVlLWNsaWNrZWRcIixcIlwiKS5yZXBsYWNlKFwianN0cmVlLWRpc2FibGVkXCIsXCJcIikpLChhW24uaWRdPW4pLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChuLmlkKSxuLmlkfSxfcGFyc2VfbW9kZWxfZnJvbV9mbGF0X2pzb246ZnVuY3Rpb24oZSx0LGkpe2k9aT9pLmNvbmNhdCgpOltdLHQmJmkudW5zaGlmdCh0KTt2YXIgcj1lLmlkLnRvU3RyaW5nKCkscz10aGlzLl9tb2RlbC5kYXRhLGE9dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxuLG8sZCxjLGw9e2lkOnIsdGV4dDplLnRleHR8fFwiXCIsaWNvbjplLmljb249PT1QfHxlLmljb24scGFyZW50OnQscGFyZW50czppLGNoaWxkcmVuOmUuY2hpbGRyZW58fFtdLGNoaWxkcmVuX2Q6ZS5jaGlsZHJlbl9kfHxbXSxkYXRhOmUuZGF0YSxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX07Zm9yKG4gaW4gYSlhLmhhc093blByb3BlcnR5KG4pJiYobC5zdGF0ZVtuXT1hW25dKTtpZihlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGwuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGwuaWNvbiE9PVAmJm51bGwhPT1sLmljb24mJlwiXCIhPT1sLmljb258fChsLmljb249ITApLGUmJmUuZGF0YSYmKGwuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKG4gaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KG4pJiYobC5zdGF0ZVtuXT1lLmRhdGEuanN0cmVlW25dKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IobiBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkobikmJihsLnN0YXRlW25dPWUuc3RhdGVbbl0pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKG4gaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShuKSYmKGwubGlfYXR0cltuXT1lLmxpX2F0dHJbbl0pO2lmKGwubGlfYXR0ci5pZHx8KGwubGlfYXR0ci5pZD1yKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKG4gaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkobikmJihsLmFfYXR0cltuXT1lLmFfYXR0cltuXSk7Zm9yKGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGwuc3RhdGUubG9hZGVkPSExLGwuY2hpbGRyZW49W10sbC5jaGlsZHJlbl9kPVtdKSxuPTAsbz0oc1tsLmlkXT1sKS5jaGlsZHJlbi5sZW5ndGg7bjxvO24rKyljPXNbZD10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbihzW2wuY2hpbGRyZW5bbl1dLGwuaWQsaSldLGwuY2hpbGRyZW5fZC5wdXNoKGQpLGMuY2hpbGRyZW5fZC5sZW5ndGgmJihsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbl9kLmNvbmNhdChjLmNoaWxkcmVuX2QpKTtyZXR1cm4gZGVsZXRlIGUuZGF0YSxkZWxldGUgZS5jaGlsZHJlbixzW2wuaWRdLm9yaWdpbmFsPWUsbC5zdGF0ZS5zZWxlY3RlZCYmdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2gobC5pZCksbC5pZH0sX3BhcnNlX21vZGVsX2Zyb21fanNvbjpmdW5jdGlvbihlLHQsaSl7aT1pP2kuY29uY2F0KCk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByPSExLHMsYSxuLG8sZD10aGlzLl9tb2RlbC5kYXRhLGM9dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxsO2Rve3I9XCJqXCIrdGhpcy5faWQrXCJfXCIrICsrdGhpcy5fY250fXdoaWxlKGRbcl0pO2ZvcihzIGluIGw9e2lkOiExLHRleHQ6XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpcIlwiLGljb246XCJvYmplY3RcIiE9dHlwZW9mIGV8fGUuaWNvbj09PVB8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxkYXRhOm51bGwsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9LGMpYy5oYXNPd25Qcm9wZXJ0eShzKSYmKGwuc3RhdGVbc109Y1tzXSk7aWYoZSYmKGUuaWR8fDA9PT1lLmlkKSYmKGwuaWQ9ZS5pZC50b1N0cmluZygpKSxlJiZlLnRleHQmJihsLnRleHQ9ZS50ZXh0KSxlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGwuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGwuaWNvbiE9PVAmJm51bGwhPT1sLmljb24mJlwiXCIhPT1sLmljb258fChsLmljb249ITApLGUmJmUuZGF0YSYmKGwuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKHMgaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KHMpJiYobC5zdGF0ZVtzXT1lLmRhdGEuanN0cmVlW3NdKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IocyBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkocykmJihsLnN0YXRlW3NdPWUuc3RhdGVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKHMgaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGwubGlfYXR0cltzXT1lLmxpX2F0dHJbc10pO2lmKGwubGlfYXR0ci5pZCYmIWwuaWQmJjAhPT1sLmlkJiYobC5pZD1sLmxpX2F0dHIuaWQudG9TdHJpbmcoKSksbC5pZHx8MD09PWwuaWR8fChsLmlkPXIpLGwubGlfYXR0ci5pZHx8KGwubGlfYXR0ci5pZD1sLmlkKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKHMgaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkocykmJihsLmFfYXR0cltzXT1lLmFfYXR0cltzXSk7aWYoZSYmZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5sZW5ndGgpe2ZvcihzPTAsYT1lLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW89ZFtuPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbihlLmNoaWxkcmVuW3NdLGwuaWQsaSldLGwuY2hpbGRyZW4ucHVzaChuKSxvLmNoaWxkcmVuX2QubGVuZ3RoJiYobC5jaGlsZHJlbl9kPWwuY2hpbGRyZW5fZC5jb25jYXQoby5jaGlsZHJlbl9kKSk7bC5jaGlsZHJlbl9kPWwuY2hpbGRyZW4uY29uY2F0KGwuY2hpbGRyZW5fZCl9cmV0dXJuIGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGwuc3RhdGUubG9hZGVkPSExLGwuY2hpbGRyZW49W10sbC5jaGlsZHJlbl9kPVtdKSxkZWxldGUgZS5kYXRhLGRlbGV0ZSBlLmNoaWxkcmVuLGwub3JpZ2luYWw9ZSwoZFtsLmlkXT1sKS5zdGF0ZS5zZWxlY3RlZCYmdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2gobC5pZCksbC5pZH0sX3JlZHJhdzpmdW5jdGlvbigpe2Zvcih2YXIgZT0odGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc/dGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS5jaGlsZHJlbjp0aGlzLl9tb2RlbC5jaGFuZ2VkKS5jb25jYXQoW10pLHQ9Yi5jcmVhdGVFbGVtZW50KFwiVUxcIiksaSxyLHMsYT10aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCxyPTAscz1lLmxlbmd0aDtyPHM7cisrKShpPXRoaXMucmVkcmF3X25vZGUoZVtyXSwhMCx0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdykpJiZ0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyYmdC5hcHBlbmRDaGlsZChpKTt0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyYmKHQuY2xhc3NOYW1lPXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZSx0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSx0aGlzLmVsZW1lbnQuZW1wdHkoKS5hcHBlbmQodCkpLG51bGwhPT1hJiZ0aGlzLnNldHRpbmdzLmNvcmUucmVzdG9yZV9mb2N1cyYmKChpPXRoaXMuZ2V0X25vZGUoYSwhMCkpJiZpLmxlbmd0aCYmaS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpWzBdIT09Yi5hY3RpdmVFbGVtZW50P2kuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIik6dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9bnVsbCksdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITEsdGhpcy5fbW9kZWwuY2hhbmdlZD1bXSx0aGlzLnRyaWdnZXIoXCJyZWRyYXdcIix7bm9kZXM6ZX0pfSxyZWRyYXc6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwKSx0aGlzLl9yZWRyYXcoKX0sZHJhd19jaGlsZHJlbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldF9ub2RlKGUpLGk9ITEscj0hMSxzPSExLGE9YjtpZighdClyZXR1cm4hMTtpZih0LmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4gdGhpcy5yZWRyYXcoITApO2lmKCEoZT10aGlzLmdldF9ub2RlKGUsITApKXx8IWUubGVuZ3RoKXJldHVybiExO2lmKGUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnJlbW92ZSgpLGU9ZVswXSx0LmNoaWxkcmVuLmxlbmd0aCYmdC5zdGF0ZS5sb2FkZWQpe2Zvcigocz1hLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSkuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JvdXBcIikscy5jbGFzc05hbWU9XCJqc3RyZWUtY2hpbGRyZW5cIixpPTAscj10LmNoaWxkcmVuLmxlbmd0aDtpPHI7aSsrKXMuYXBwZW5kQ2hpbGQodGhpcy5yZWRyYXdfbm9kZSh0LmNoaWxkcmVuW2ldLCEwLCEwKSk7ZS5hcHBlbmRDaGlsZChzKX19LHJlZHJhd19ub2RlOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzPXRoaXMuZ2V0X25vZGUoZSksYT0hMSxuPSExLG89ITEsZD0hMSxjPSExLGw9ITEsaD1cIlwiLF89YixnPXRoaXMuX21vZGVsLmRhdGEsdT0hMSxmPSExLHA9bnVsbCxtPTAsdj0wLGo9ITEsaz0hMTtpZighcylyZXR1cm4hMTtpZihzLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4gdGhpcy5yZWRyYXcoITApO2lmKHQ9dHx8MD09PXMuY2hpbGRyZW4ubGVuZ3RoLGU9Yi5xdWVyeVNlbGVjdG9yP3RoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKFwiI1wiKygtMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2Yocy5pZFswXSk/XCJcXFxcM1wiK3MuaWRbMF0rXCIgXCIrcy5pZC5zdWJzdHIoMSkucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOnMuaWQucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpKSk6Yi5nZXRFbGVtZW50QnlJZChzLmlkKSllPUUoZSksaXx8KChhPWUucGFyZW50KCkucGFyZW50KClbMF0pPT09dGhpcy5lbGVtZW50WzBdJiYoYT1udWxsKSxuPWUuaW5kZXgoKSksKHQ9IXQmJnMuY2hpbGRyZW4ubGVuZ3RoJiYhZS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikubGVuZ3RoPyEwOnQpfHwobz1lLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKVswXSksdT1lLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIilbMF09PT1iLmFjdGl2ZUVsZW1lbnQsZS5yZW1vdmUoKTtlbHNlIGlmKHQ9ITAsIWkpe2lmKCEobnVsbD09PShhPXMucGFyZW50IT09RS5qc3RyZWUucm9vdD9FKFwiI1wiK3MucGFyZW50LnJlcGxhY2UoRS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpWzBdOm51bGwpfHxhJiZnW3MucGFyZW50XS5zdGF0ZS5vcGVuZWQpKXJldHVybiExO249RS5pbkFycmF5KHMuaWQsKG51bGw9PT1hP2dbRS5qc3RyZWUucm9vdF06Z1tzLnBhcmVudF0pLmNoaWxkcmVuKX1mb3IoZCBpbiBlPXRoaXMuX2RhdGEuY29yZS5ub2RlLmNsb25lTm9kZSghMCksaD1cImpzdHJlZS1ub2RlIFwiLHMubGlfYXR0cilzLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoZCkmJlwiaWRcIiE9PWQmJihcImNsYXNzXCIhPT1kP2Uuc2V0QXR0cmlidXRlKGQscy5saV9hdHRyW2RdKTpoKz1zLmxpX2F0dHJbZF0pO2ZvcihzLmFfYXR0ci5pZHx8KHMuYV9hdHRyLmlkPXMuaWQrXCJfYW5jaG9yXCIpLGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsISFzLnN0YXRlLnNlbGVjdGVkKSxlLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiYXJpYS1sZXZlbFwiLHMucGFyZW50cy5sZW5ndGgpLHRoaXMuc2V0dGluZ3MuY29yZS5jb21wdXRlX2VsZW1lbnRzX3Bvc2l0aW9ucyYmKGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNldHNpemVcIixnW3MucGFyZW50XS5jaGlsZHJlbi5sZW5ndGgpLGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXBvc2luc2V0XCIsZ1tzLnBhcmVudF0uY2hpbGRyZW4uaW5kZXhPZihzLmlkKSsxKSkscy5zdGF0ZS5kaXNhYmxlZCYmZS5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwhMCksZD0wLGM9cy5jaGlsZHJlbi5sZW5ndGg7ZDxjO2QrKylpZighZ1tzLmNoaWxkcmVuW2RdXS5zdGF0ZS5oaWRkZW4pe2o9ITA7YnJlYWt9aWYobnVsbCE9PXMucGFyZW50JiZnW3MucGFyZW50XSYmIXMuc3RhdGUuaGlkZGVuJiYoZD1FLmluQXJyYXkocy5pZCxnW3MucGFyZW50XS5jaGlsZHJlbiksaz1zLmlkLC0xIT09ZCkpZm9yKGQrKyxjPWdbcy5wYXJlbnRdLmNoaWxkcmVuLmxlbmd0aDtkPGM7ZCsrKWlmKChrPSFnW2dbcy5wYXJlbnRdLmNoaWxkcmVuW2RdXS5zdGF0ZS5oaWRkZW4/Z1tzLnBhcmVudF0uY2hpbGRyZW5bZF06aykhPT1zLmlkKWJyZWFrO2ZvcihjIGluIHMuc3RhdGUuaGlkZGVuJiYoaCs9XCIganN0cmVlLWhpZGRlblwiKSxzLnN0YXRlLmxvYWRpbmcmJihoKz1cIiBqc3RyZWUtbG9hZGluZ1wiKSxzLnN0YXRlLmxvYWRlZCYmIWo/aCs9XCIganN0cmVlLWxlYWZcIjooaCs9cy5zdGF0ZS5vcGVuZWQmJnMuc3RhdGUubG9hZGVkP1wiIGpzdHJlZS1vcGVuXCI6XCIganN0cmVlLWNsb3NlZFwiLGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIscy5zdGF0ZS5vcGVuZWQmJnMuc3RhdGUubG9hZGVkKSksaz09PXMuaWQmJihoKz1cIiBqc3RyZWUtbGFzdFwiKSxlLmlkPXMuaWQsZS5jbGFzc05hbWU9aCxoPShzLnN0YXRlLnNlbGVjdGVkP1wiIGpzdHJlZS1jbGlja2VkXCI6XCJcIikrKHMuc3RhdGUuZGlzYWJsZWQ/XCIganN0cmVlLWRpc2FibGVkXCI6XCJcIikscy5hX2F0dHIpcy5hX2F0dHIuaGFzT3duUHJvcGVydHkoYykmJihcImhyZWZcIj09PWMmJlwiI1wiPT09cy5hX2F0dHJbY118fChcImNsYXNzXCIhPT1jP2UuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoYyxzLmFfYXR0cltjXSk6aCs9XCIgXCIrcy5hX2F0dHJbY10pKTtpZihoLmxlbmd0aCYmKGUuY2hpbGROb2Rlc1sxXS5jbGFzc05hbWU9XCJqc3RyZWUtYW5jaG9yIFwiK2gpLChzLmljb24mJiEwIT09cy5pY29ufHwhMT09PXMuaWNvbikmJighMT09PXMuaWNvbj9lLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWUrPVwiIGpzdHJlZS10aGVtZWljb24taGlkZGVuXCI6LTE9PT1zLmljb24uaW5kZXhPZihcIi9cIikmJi0xPT09cy5pY29uLmluZGV4T2YoXCIuXCIpP2UuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSs9XCIgXCIrcy5pY29uK1wiIGpzdHJlZS10aGVtZWljb24tY3VzdG9tXCI6KGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZT0ndXJsKFwiJytzLmljb24rJ1wiKScsZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPVwiY2VudGVyIGNlbnRlclwiLGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRTaXplPVwiYXV0b1wiLGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSs9XCIganN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikpLHRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0P2UuY2hpbGROb2Rlc1sxXS5hcHBlbmRDaGlsZChfLmNyZWF0ZVRleHROb2RlKHMudGV4dCkpOmUuY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwrPXMudGV4dCx0JiZzLmNoaWxkcmVuLmxlbmd0aCYmKHMuc3RhdGUub3BlbmVkfHxyKSYmcy5zdGF0ZS5sb2FkZWQpe2ZvcigobD1fLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSkuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JvdXBcIiksbC5jbGFzc05hbWU9XCJqc3RyZWUtY2hpbGRyZW5cIixkPTAsYz1zLmNoaWxkcmVuLmxlbmd0aDtkPGM7ZCsrKWwuYXBwZW5kQ2hpbGQodGhpcy5yZWRyYXdfbm9kZShzLmNoaWxkcmVuW2RdLHQsITApKTtlLmFwcGVuZENoaWxkKGwpfWlmKG8mJmUuYXBwZW5kQ2hpbGQobyksIWkpe2ZvcihkPTAsYz0oYT1hfHx0aGlzLmVsZW1lbnRbMF0pLmNoaWxkTm9kZXMubGVuZ3RoO2Q8YztkKyspaWYoYS5jaGlsZE5vZGVzW2RdJiZhLmNoaWxkTm9kZXNbZF0uY2xhc3NOYW1lJiYtMSE9PWEuY2hpbGROb2Rlc1tkXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1jaGlsZHJlblwiKSl7cD1hLmNoaWxkTm9kZXNbZF07YnJlYWt9cHx8KChwPV8uY3JlYXRlRWxlbWVudChcIlVMXCIpKS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncm91cFwiKSxwLmNsYXNzTmFtZT1cImpzdHJlZS1jaGlsZHJlblwiLGEuYXBwZW5kQ2hpbGQocCkpLG48KGE9cCkuY2hpbGROb2Rlcy5sZW5ndGg/YS5pbnNlcnRCZWZvcmUoZSxhLmNoaWxkTm9kZXNbbl0pOmEuYXBwZW5kQ2hpbGQoZSksdSYmKG09dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCx2PXRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0LGUuY2hpbGROb2Rlc1sxXS5mb2N1cygpLHRoaXMuZWxlbWVudFswXS5zY3JvbGxUb3A9bSx0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdD12KX1yZXR1cm4gcy5zdGF0ZS5vcGVuZWQmJiFzLnN0YXRlLmxvYWRlZCYmKHMuc3RhdGUub3BlbmVkPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLm9wZW5fbm9kZShzLmlkLCExLDApfS5iaW5kKHRoaXMpLDApKSxlfSxvcGVuX25vZGU6ZnVuY3Rpb24oZSxpLHIpe3ZhciB0LHMsYSxuO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLHM9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxzO3QrKyl0aGlzLm9wZW5fbm9kZShlW3RdLGkscik7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmKHI9cj09PVA/dGhpcy5zZXR0aW5ncy5jb3JlLmFuaW1hdGlvbjpyLHRoaXMuaXNfY2xvc2VkKGUpP3RoaXMuaXNfbG9hZGVkKGUpPyhhPXRoaXMuZ2V0X25vZGUoZSwhMCksbj10aGlzLGEubGVuZ3RoJiYociYmYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikubGVuZ3RoJiZhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5zdG9wKCEwLCEwKSxlLmNoaWxkcmVuLmxlbmd0aCYmIXRoaXMuX2ZpcnN0Q2hpbGQoYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIilbMF0pJiZ0aGlzLmRyYXdfY2hpbGRyZW4oZSkscj8odGhpcy50cmlnZ2VyKFwiYmVmb3JlX29wZW5cIix7bm9kZTplfSksYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKS5lbmQoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbG9zZWRcIikuYWRkQ2xhc3MoXCJqc3RyZWUtb3BlblwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLmVuZCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5zdG9wKCEwLCEwKS5zbGlkZURvd24ocixmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cIlwiLG4uZWxlbWVudCYmbi50cmlnZ2VyKFwiYWZ0ZXJfb3BlblwiLHtub2RlOmV9KX0pKToodGhpcy50cmlnZ2VyKFwiYmVmb3JlX29wZW5cIix7bm9kZTplfSksYVswXS5jbGFzc05hbWU9YVswXS5jbGFzc05hbWUucmVwbGFjZShcImpzdHJlZS1jbG9zZWRcIixcImpzdHJlZS1vcGVuXCIpLGFbMF0uY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsITApKSksZS5zdGF0ZS5vcGVuZWQ9ITAsaSYmaS5jYWxsKHRoaXMsZSwhMCksYS5sZW5ndGh8fHRoaXMudHJpZ2dlcihcImJlZm9yZV9vcGVuXCIse25vZGU6ZX0pLHRoaXMudHJpZ2dlcihcIm9wZW5fbm9kZVwiLHtub2RlOmV9KSxyJiZhLmxlbmd0aHx8dGhpcy50cmlnZ2VyKFwiYWZ0ZXJfb3BlblwiLHtub2RlOmV9KSwhMCk6dGhpcy5pc19sb2FkaW5nKGUpP3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLm9wZW5fbm9kZShlLGkscil9LmJpbmQodGhpcyksNTAwKTp2b2lkIHRoaXMubG9hZF9ub2RlKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD90aGlzLm9wZW5fbm9kZShlLGkscik6ISFpJiZpLmNhbGwodGhpcyxlLCExKX0pOihpJiZpLmNhbGwodGhpcyxlLCExKSwhMSkpfSxfb3Blbl90bzpmdW5jdGlvbihlKXtpZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2Zvcih2YXIgdCxpLHI9ZS5wYXJlbnRzLHQ9MCxpPXIubGVuZ3RoO3Q8aTt0Kz0xKXQhPT1FLmpzdHJlZS5yb290JiZ0aGlzLm9wZW5fbm9kZShyW3RdLCExLDApO3JldHVybiBFKFwiI1wiK2UuaWQucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCl9LGNsb3NlX25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLHMsYTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5jbG9zZV9ub2RlKGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmKCF0aGlzLmlzX2Nsb3NlZChlKSYmKHQ9dD09PVA/dGhpcy5zZXR0aW5ncy5jb3JlLmFuaW1hdGlvbjp0LGE9KHM9dGhpcykuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5vcGVuZWQ9ITEsdGhpcy50cmlnZ2VyKFwiY2xvc2Vfbm9kZVwiLHtub2RlOmV9KSx2b2lkKGEubGVuZ3RoP3Q/YS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuYXR0cihcInN0eWxlXCIsXCJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnRcIikuZW5kKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb3BlblwiKS5hZGRDbGFzcyhcImpzdHJlZS1jbG9zZWRcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKS5lbmQoKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCghMCwhMCkuc2xpZGVVcCh0LGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiXCIsYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikucmVtb3ZlKCkscy5lbGVtZW50JiZzLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLHtub2RlOmV9KX0pOihhWzBdLmNsYXNzTmFtZT1hWzBdLmNsYXNzTmFtZS5yZXBsYWNlKFwianN0cmVlLW9wZW5cIixcImpzdHJlZS1jbG9zZWRcIiksYS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLGEuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlcihcImFmdGVyX2Nsb3NlXCIse25vZGU6ZX0pKTp0aGlzLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLHtub2RlOmV9KSkpKX0sdG9nZ2xlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy50b2dnbGVfbm9kZShlW3RdKTtyZXR1cm4hMH1yZXR1cm4gdGhpcy5pc19jbG9zZWQoZSk/dGhpcy5vcGVuX25vZGUoZSk6dGhpcy5pc19vcGVuKGUpP3RoaXMuY2xvc2Vfbm9kZShlKTp2b2lkIDB9LG9wZW5fYWxsOmZ1bmN0aW9uKGUsaSxyKXtpZihlPWV8fEUuanN0cmVlLnJvb3QsIShlPXRoaXMuZ2V0X25vZGUoZSkpKXJldHVybiExO3ZhciB0PWUuaWQ9PT1FLmpzdHJlZS5yb290P3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpOnRoaXMuZ2V0X25vZGUoZSwhMCkscyxhLG47aWYoIXQubGVuZ3RoKXtmb3Iocz0wLGE9ZS5jaGlsZHJlbl9kLmxlbmd0aDtzPGE7cysrKXRoaXMuaXNfY2xvc2VkKHRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3NdXSkmJih0aGlzLl9tb2RlbC5kYXRhW2UuY2hpbGRyZW5fZFtzXV0uc3RhdGUub3BlbmVkPSEwKTtyZXR1cm4gdGhpcy50cmlnZ2VyKFwib3Blbl9hbGxcIix7bm9kZTplfSl9cj1yfHx0LCh0PShuPXRoaXMpLmlzX2Nsb3NlZChlKT90LmZpbmQoXCIuanN0cmVlLWNsb3NlZFwiKS5hZGRCYWNrKCk6dC5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikpLmVhY2goZnVuY3Rpb24oKXtuLm9wZW5fbm9kZSh0aGlzLGZ1bmN0aW9uKGUsdCl7dCYmdGhpcy5pc19wYXJlbnQoZSkmJnRoaXMub3Blbl9hbGwoZSxpLHIpfSxpfHwwKX0pLDA9PT1yLmZpbmQoXCIuanN0cmVlLWNsb3NlZFwiKS5sZW5ndGgmJnRoaXMudHJpZ2dlcihcIm9wZW5fYWxsXCIse25vZGU6dGhpcy5nZXRfbm9kZShyKX0pfSxjbG9zZV9hbGw6ZnVuY3Rpb24oZSx0KXtpZihlPWV8fEUuanN0cmVlLnJvb3QsIShlPXRoaXMuZ2V0X25vZGUoZSkpKXJldHVybiExO3ZhciBpPWUuaWQ9PT1FLmpzdHJlZS5yb290P3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpOnRoaXMuZ2V0X25vZGUoZSwhMCkscj10aGlzLHMsYTtmb3IoaS5sZW5ndGgmJihpPXRoaXMuaXNfb3BlbihlKT9pLmZpbmQoXCIuanN0cmVlLW9wZW5cIikuYWRkQmFjaygpOmkuZmluZChcIi5qc3RyZWUtb3BlblwiKSxFKGkuZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uKCl7ci5jbG9zZV9ub2RlKHRoaXMsdHx8MCl9KSkscz0wLGE9ZS5jaGlsZHJlbl9kLmxlbmd0aDtzPGE7cysrKXRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3NdXS5zdGF0ZS5vcGVuZWQ9ITE7dGhpcy50cmlnZ2VyKFwiY2xvc2VfYWxsXCIse25vZGU6ZX0pfSxpc19kaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZSYmZS5zdGF0ZS5kaXNhYmxlZH0sZW5hYmxlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5lbmFibGVfbm9kZShlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2Uuc3RhdGUuZGlzYWJsZWQ9ITEsdGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITEpLHRoaXMudHJpZ2dlcihcImVuYWJsZV9ub2RlXCIse25vZGU6ZX0pfSxkaXNhYmxlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5kaXNhYmxlX25vZGUoZVt0XSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtlLnN0YXRlLmRpc2FibGVkPSEwLHRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhcImpzdHJlZS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSx0aGlzLnRyaWdnZXIoXCJkaXNhYmxlX25vZGVcIix7bm9kZTplfSl9LGlzX2hpZGRlbjpmdW5jdGlvbihlKXtyZXR1cm4hMD09PShlPXRoaXMuZ2V0X25vZGUoZSkpLnN0YXRlLmhpZGRlbn0saGlkZV9ub2RlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscjtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5oaWRlX25vZGUoZVtpXSwhMCk7cmV0dXJuIHR8fHRoaXMucmVkcmF3KCksITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtlLnN0YXRlLmhpZGRlbnx8KGUuc3RhdGUuaGlkZGVuPSEwLHRoaXMuX25vZGVfY2hhbmdlZChlLnBhcmVudCksdHx8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJoaWRlX25vZGVcIix7bm9kZTplfSkpfSxzaG93X25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnNob3dfbm9kZShlW2ldLCEwKTtyZXR1cm4gdHx8dGhpcy5yZWRyYXcoKSwhMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2Uuc3RhdGUuaGlkZGVuJiYoZS5zdGF0ZS5oaWRkZW49ITEsdGhpcy5fbm9kZV9jaGFuZ2VkKGUucGFyZW50KSx0fHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcInNob3dfbm9kZVwiLHtub2RlOmV9KSl9LGhpZGVfYWxsOmZ1bmN0aW9uKGUpe3ZhciB0LGk9dGhpcy5fbW9kZWwuZGF0YSxyPVtdO2Zvcih0IGluIGkpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmdCE9PUUuanN0cmVlLnJvb3QmJiFpW3RdLnN0YXRlLmhpZGRlbiYmKGlbdF0uc3RhdGUuaGlkZGVuPSEwLHIucHVzaCh0KSk7cmV0dXJuIHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwLGV8fHRoaXMucmVkcmF3KCksdGhpcy50cmlnZ2VyKFwiaGlkZV9hbGxcIix7bm9kZXM6cn0pLHJ9LHNob3dfYWxsOmZ1bmN0aW9uKGUpe3ZhciB0LGk9dGhpcy5fbW9kZWwuZGF0YSxyPVtdO2Zvcih0IGluIGkpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmdCE9PUUuanN0cmVlLnJvb3QmJmlbdF0uc3RhdGUuaGlkZGVuJiYoaVt0XS5zdGF0ZS5oaWRkZW49ITEsci5wdXNoKHQpKTtyZXR1cm4gdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITAsZXx8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJzaG93X2FsbFwiLHtub2RlczpyfSkscn0sYWN0aXZhdGVfbm9kZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMuaXNfZGlzYWJsZWQoZSkpcmV0dXJuITE7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHR8fCh0PXt9KSx0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQmJnRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQhPT1QP3RoaXMuZ2V0X25vZGUodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5pZCk6bnVsbCx0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiYhdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5zdGF0ZS5zZWxlY3RlZCYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9bnVsbCksIXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQmJnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGgmJih0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPXRoaXMuZ2V0X25vZGUodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGgtMV0pKSx0aGlzLnNldHRpbmdzLmNvcmUubXVsdGlwbGUmJih0Lm1ldGFLZXl8fHQuY3RybEtleXx8dC5zaGlmdEtleSkmJighdC5zaGlmdEtleXx8dGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCYmdGhpcy5nZXRfcGFyZW50KGUpJiZ0aGlzLmdldF9wYXJlbnQoZSk9PT10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnBhcmVudCkpaWYodC5zaGlmdEtleSl7Zm9yKHZhciBpPXRoaXMuZ2V0X25vZGUoZSkuaWQscj10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkLHM9dGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnBhcmVudCkuY2hpbGRyZW4sYT0hMSxuLG8sbj0wLG89cy5sZW5ndGg7bjxvO24rPTEpc1tuXT09PWkmJihhPSFhKSxzW25dPT09ciYmKGE9IWEpLHRoaXMuaXNfZGlzYWJsZWQoc1tuXSl8fCFhJiZzW25dIT09aSYmc1tuXSE9PXI/dC5jdHJsS2V5fHx0aGlzLmRlc2VsZWN0X25vZGUoc1tuXSwhMCx0KTp0aGlzLmlzX2hpZGRlbihzW25dKXx8dGhpcy5zZWxlY3Rfbm9kZShzW25dLCEwLCExLHQpO3RoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwic2VsZWN0X25vZGVcIixub2RlOnRoaXMuZ2V0X25vZGUoZSksc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50OnR9KX1lbHNlIHRoaXMuaXNfc2VsZWN0ZWQoZSk/dGhpcy5kZXNlbGVjdF9ub2RlKGUsITEsdCk6KHQuY3RybEtleSYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9dGhpcy5nZXRfbm9kZShlKSksdGhpcy5zZWxlY3Rfbm9kZShlLCExLCExLHQpKTtlbHNlIXRoaXMuc2V0dGluZ3MuY29yZS5tdWx0aXBsZSYmKHQubWV0YUtleXx8dC5jdHJsS2V5fHx0LnNoaWZ0S2V5KSYmdGhpcy5pc19zZWxlY3RlZChlKT90aGlzLmRlc2VsZWN0X25vZGUoZSwhMSx0KTooIXRoaXMuc2V0dGluZ3MuY29yZS5hbGxvd19yZXNlbGVjdCYmdGhpcy5pc19zZWxlY3RlZChlKSYmMT09PXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGh8fCh0aGlzLmRlc2VsZWN0X2FsbCghMCksdGhpcy5zZWxlY3Rfbm9kZShlLCExLCExLHQpKSx0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPXRoaXMuZ2V0X25vZGUoZSkpO3RoaXMudHJpZ2dlcihcImFjdGl2YXRlX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGUpLGV2ZW50OnR9KX0saG92ZXJfbm9kZTpmdW5jdGlvbihlKXtpZighKGU9dGhpcy5nZXRfbm9kZShlLCEwKSl8fCFlLmxlbmd0aHx8ZS5jaGlsZHJlbihcIi5qc3RyZWUtaG92ZXJlZFwiKS5sZW5ndGgpcmV0dXJuITE7dmFyIHQ9dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWhvdmVyZWRcIiksaT10aGlzLmVsZW1lbnQ7dCYmdC5sZW5ndGgmJnRoaXMuZGVob3Zlcl9ub2RlKHQpLGUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhcImpzdHJlZS1ob3ZlcmVkXCIpLHRoaXMudHJpZ2dlcihcImhvdmVyX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGUpfSksc2V0VGltZW91dChmdW5jdGlvbigpe2kuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLGVbMF0uaWQpfSwwKX0sZGVob3Zlcl9ub2RlOmZ1bmN0aW9uKGUpe2lmKCEoZT10aGlzLmdldF9ub2RlKGUsITApKXx8IWUubGVuZ3RofHwhZS5jaGlsZHJlbihcIi5qc3RyZWUtaG92ZXJlZFwiKS5sZW5ndGgpcmV0dXJuITE7ZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWhvdmVyZWRcIiksdGhpcy50cmlnZ2VyKFwiZGVob3Zlcl9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZShlKX0pfSxzZWxlY3Rfbm9kZTpmdW5jdGlvbihlLHQsaSxyKXt2YXIgcyxhLG4sbztpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGE9MCxuPShlPWUuc2xpY2UoKSkubGVuZ3RoO2E8bjthKyspdGhpcy5zZWxlY3Rfbm9kZShlW2FdLHQsaSxyKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3M9dGhpcy5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLnNlbGVjdGVkfHwoZS5zdGF0ZS5zZWxlY3RlZD0hMCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChlLmlkKSwocz0haT90aGlzLl9vcGVuX3RvKGUpOnMpJiZzLmxlbmd0aCYmcy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWNsaWNrZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdGhpcy50cmlnZ2VyKFwic2VsZWN0X25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDpyfSksdHx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3Rfbm9kZVwiLG5vZGU6ZSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZXZlbnQ6cn0pKX0sZGVzZWxlY3Rfbm9kZTpmdW5jdGlvbihlLHQsaSl7dmFyIHIscyxhO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3Iocj0wLHM9KGU9ZS5zbGljZSgpKS5sZW5ndGg7cjxzO3IrKyl0aGlzLmRlc2VsZWN0X25vZGUoZVtyXSx0LGkpO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7YT10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuc2VsZWN0ZWQmJihlLnN0YXRlLnNlbGVjdGVkPSExLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZS5pZCksYS5sZW5ndGgmJmEuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLHRoaXMudHJpZ2dlcihcImRlc2VsZWN0X25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDppfSksdHx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJkZXNlbGVjdF9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDppfSkpfSxzZWxlY3RfYWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoW10pLGkscjtmb3IodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPXRoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZC5jb25jYXQoKSxpPTAscj10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoO2k8cjtpKyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dLnN0YXRlLnNlbGVjdGVkPSEwKTt0aGlzLnJlZHJhdyghMCksdGhpcy50cmlnZ2VyKFwic2VsZWN0X2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KSxlfHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcInNlbGVjdF9hbGxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsb2xkX3NlbGVjdGlvbjp0fSl9LGRlc2VsZWN0X2FsbDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSksaSxyLGk9MCxyPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7aTxyO2krKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0mJih0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0uc3RhdGUuc2VsZWN0ZWQ9ITEpO3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1bXSx0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtY2xpY2tlZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLHRoaXMudHJpZ2dlcihcImRlc2VsZWN0X2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsbm9kZTp0fSksZXx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJkZXNlbGVjdF9hbGxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsb2xkX3NlbGVjdGlvbjp0fSl9LGlzX3NlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJmUuc3RhdGUuc2VsZWN0ZWR9LGdldF9zZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZT9FLm1hcCh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LmJpbmQodGhpcykpOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpfSxnZXRfdG9wX3NlbGVjdGVkOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmdldF9zZWxlY3RlZCghMCksaT17fSxyLHMsYSxuLHI9MCxzPXQubGVuZ3RoO3I8cztyKyspaVt0W3JdLmlkXT10W3JdO2ZvcihyPTAscz10Lmxlbmd0aDtyPHM7cisrKWZvcihhPTAsbj10W3JdLmNoaWxkcmVuX2QubGVuZ3RoO2E8bjthKyspaVt0W3JdLmNoaWxkcmVuX2RbYV1dJiZkZWxldGUgaVt0W3JdLmNoaWxkcmVuX2RbYV1dO2ZvcihyIGluIHQ9W10saSlpLmhhc093blByb3BlcnR5KHIpJiZ0LnB1c2gocik7cmV0dXJuIGU/RS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0uYmluZCh0aGlzKSk6dH0sZ2V0X2JvdHRvbV9zZWxlY3RlZDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5nZXRfc2VsZWN0ZWQoITApLGk9W10scixzLHI9MCxzPXQubGVuZ3RoO3I8cztyKyspdFtyXS5jaGlsZHJlbi5sZW5ndGh8fGkucHVzaCh0W3JdLmlkKTtyZXR1cm4gZT9FLm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldF9ub2RlKGUpfS5iaW5kKHRoaXMpKTppfSxnZXRfc3RhdGU6ZnVuY3Rpb24oKXt2YXIgZT17Y29yZTp7b3BlbjpbXSxsb2FkZWQ6W10sc2Nyb2xsOntsZWZ0OnRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KCksdG9wOnRoaXMuZWxlbWVudC5zY3JvbGxUb3AoKX0sc2VsZWN0ZWQ6W119fSx0O2Zvcih0IGluIHRoaXMuX21vZGVsLmRhdGEpdGhpcy5fbW9kZWwuZGF0YS5oYXNPd25Qcm9wZXJ0eSh0KSYmdCE9PUUuanN0cmVlLnJvb3QmJih0aGlzLl9tb2RlbC5kYXRhW3RdLnN0YXRlLmxvYWRlZCYmdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmZS5jb3JlLmxvYWRlZC5wdXNoKHQpLHRoaXMuX21vZGVsLmRhdGFbdF0uc3RhdGUub3BlbmVkJiZlLmNvcmUub3Blbi5wdXNoKHQpLHRoaXMuX21vZGVsLmRhdGFbdF0uc3RhdGUuc2VsZWN0ZWQmJmUuY29yZS5zZWxlY3RlZC5wdXNoKHQpKTtyZXR1cm4gZX0sc2V0X3N0YXRlOmZ1bmN0aW9uKHQsaSl7aWYodCl7aWYodC5jb3JlJiZ0LmNvcmUuc2VsZWN0ZWQmJnQuY29yZS5pbml0aWFsX3NlbGVjdGlvbj09PVAmJih0LmNvcmUuaW5pdGlhbF9zZWxlY3Rpb249dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSkuc29ydCgpLmpvaW4oXCIsXCIpKSx0LmNvcmUpe3ZhciBlLHIscyxhLG47aWYodC5jb3JlLmxvYWRlZClyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmRS52YWthdGEuaXNfYXJyYXkodC5jb3JlLmxvYWRlZCkmJnQuY29yZS5sb2FkZWQubGVuZ3RoP3RoaXMuX2xvYWRfbm9kZXModC5jb3JlLmxvYWRlZCxmdW5jdGlvbihlKXtkZWxldGUgdC5jb3JlLmxvYWRlZCx0aGlzLnNldF9zdGF0ZSh0LGkpfSk6KGRlbGV0ZSB0LmNvcmUubG9hZGVkLHRoaXMuc2V0X3N0YXRlKHQsaSkpLCExO2lmKHQuY29yZS5vcGVuKXJldHVybiBFLnZha2F0YS5pc19hcnJheSh0LmNvcmUub3BlbikmJnQuY29yZS5vcGVuLmxlbmd0aD90aGlzLl9sb2FkX25vZGVzKHQuY29yZS5vcGVuLGZ1bmN0aW9uKGUpe3RoaXMub3Blbl9ub2RlKGUsITEsMCksZGVsZXRlIHQuY29yZS5vcGVuLHRoaXMuc2V0X3N0YXRlKHQsaSl9KTooZGVsZXRlIHQuY29yZS5vcGVuLHRoaXMuc2V0X3N0YXRlKHQsaSkpLCExO2lmKHQuY29yZS5zY3JvbGwpcmV0dXJuIHQuY29yZS5zY3JvbGwmJnQuY29yZS5zY3JvbGwubGVmdCE9PVAmJnRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KHQuY29yZS5zY3JvbGwubGVmdCksdC5jb3JlLnNjcm9sbCYmdC5jb3JlLnNjcm9sbC50b3AhPT1QJiZ0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wKHQuY29yZS5zY3JvbGwudG9wKSxkZWxldGUgdC5jb3JlLnNjcm9sbCx0aGlzLnNldF9zdGF0ZSh0LGkpLCExO2lmKHQuY29yZS5zZWxlY3RlZClyZXR1cm4gYT10aGlzLHQuY29yZS5pbml0aWFsX3NlbGVjdGlvbiE9PVAmJnQuY29yZS5pbml0aWFsX3NlbGVjdGlvbiE9PXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoW10pLnNvcnQoKS5qb2luKFwiLFwiKXx8KHRoaXMuZGVzZWxlY3RfYWxsKCksRS5lYWNoKHQuY29yZS5zZWxlY3RlZCxmdW5jdGlvbihlLHQpe2Euc2VsZWN0X25vZGUodCwhMSwhMCl9KSksZGVsZXRlIHQuY29yZS5pbml0aWFsX3NlbGVjdGlvbixkZWxldGUgdC5jb3JlLnNlbGVjdGVkLHRoaXMuc2V0X3N0YXRlKHQsaSksITE7Zm9yKG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZcImNvcmVcIiE9PW4mJi0xPT09RS5pbkFycmF5KG4sdGhpcy5zZXR0aW5ncy5wbHVnaW5zKSYmZGVsZXRlIHRbbl07aWYoRS5pc0VtcHR5T2JqZWN0KHQuY29yZSkpcmV0dXJuIGRlbGV0ZSB0LmNvcmUsdGhpcy5zZXRfc3RhdGUodCxpKSwhMX1yZXR1cm4gRS5pc0VtcHR5T2JqZWN0KHQpPyh0PW51bGwsaSYmaS5jYWxsKHRoaXMpLHRoaXMudHJpZ2dlcihcInNldF9zdGF0ZVwiKSwhMSk6ITB9cmV0dXJuITF9LHJlZnJlc2g6ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhLmNvcmUuc3RhdGU9ITA9PT10P3t9OnRoaXMuZ2V0X3N0YXRlKCksdCYmRS52YWthdGEuaXNfZnVuY3Rpb24odCkmJih0aGlzLl9kYXRhLmNvcmUuc3RhdGU9dC5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLnN0YXRlKSksdGhpcy5fY250PTAsdGhpcy5fbW9kZWwuZGF0YT17fSx0aGlzLl9tb2RlbC5kYXRhW0UuanN0cmVlLnJvb3RdPXtpZDpFLmpzdHJlZS5yb290LHBhcmVudDpudWxsLHBhcmVudHM6W10sY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxzdGF0ZTp7bG9hZGVkOiExfX0sdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPVtdLHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQ9bnVsbCx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1udWxsO3ZhciBpPXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZTtlfHwodGhpcy5lbGVtZW50Lmh0bWwoXCI8dWwgY2xhc3M9J1wiK2krXCInIHJvbGU9J2dyb3VwJz48bGkgY2xhc3M9J2pzdHJlZS1pbml0aWFsLW5vZGUganN0cmVlLWxvYWRpbmcganN0cmVlLWxlYWYganN0cmVlLWxhc3QnIHJvbGU9J25vbmUnIGlkPSdqXCIrdGhpcy5faWQrXCJfbG9hZGluZyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS1vY2wnPjwvaT48YSBjbGFzcz0nanN0cmVlLWFuY2hvcicgcm9sZT0ndHJlZWl0ZW0nIGhyZWY9JyMnPjxpIGNsYXNzPSdqc3RyZWUtaWNvbiBqc3RyZWUtdGhlbWVpY29uLWhpZGRlbic+PC9pPlwiK3RoaXMuZ2V0X3N0cmluZyhcIkxvYWRpbmcgLi4uXCIpK1wiPC9hPjwvbGk+PC91bD5cIiksdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixcImpcIit0aGlzLl9pZCtcIl9sb2FkaW5nXCIpKSx0aGlzLmxvYWRfbm9kZShFLmpzdHJlZS5yb290LGZ1bmN0aW9uKGUsdCl7dCYmKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZT1pLHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pJiZ0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pLmlkKSx0aGlzLnNldF9zdGF0ZShFLmV4dGVuZCghMCx7fSx0aGlzLl9kYXRhLmNvcmUuc3RhdGUpLGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFwicmVmcmVzaFwiKX0pKSx0aGlzLl9kYXRhLmNvcmUuc3RhdGU9bnVsbH0pfSxyZWZyZXNoX25vZGU6ZnVuY3Rpb24odCl7aWYoISh0PXRoaXMuZ2V0X25vZGUodCkpfHx0LmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTt2YXIgaT1bXSxlPVtdLHI9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSk7ZS5wdXNoKHQuaWQpLCEwPT09dC5zdGF0ZS5vcGVuZWQmJmkucHVzaCh0LmlkKSx0aGlzLmdldF9ub2RlKHQsITApLmZpbmQoXCIuanN0cmVlLW9wZW5cIikuZWFjaChmdW5jdGlvbigpe2UucHVzaCh0aGlzLmlkKSxpLnB1c2godGhpcy5pZCl9KSx0aGlzLl9sb2FkX25vZGVzKGUsZnVuY3Rpb24oZSl7dGhpcy5vcGVuX25vZGUoaSwhMSwwKSx0aGlzLnNlbGVjdF9ub2RlKHIpLHRoaXMudHJpZ2dlcihcInJlZnJlc2hfbm9kZVwiLHtub2RlOnQsbm9kZXM6ZX0pfS5iaW5kKHRoaXMpLCExLCEwKX0sc2V0X2lkOmZ1bmN0aW9uKGUsdCl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTt2YXIgaSxyLHM9dGhpcy5fbW9kZWwuZGF0YSxhPWUuaWQ7Zm9yKHQ9dC50b1N0cmluZygpLHNbZS5wYXJlbnRdLmNoaWxkcmVuW0UuaW5BcnJheShlLmlkLHNbZS5wYXJlbnRdLmNoaWxkcmVuKV09dCxpPTAscj1lLnBhcmVudHMubGVuZ3RoO2k8cjtpKyspc1tlLnBhcmVudHNbaV1dLmNoaWxkcmVuX2RbRS5pbkFycmF5KGUuaWQsc1tlLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QpXT10O2ZvcihpPTAscj1lLmNoaWxkcmVuLmxlbmd0aDtpPHI7aSsrKXNbZS5jaGlsZHJlbltpXV0ucGFyZW50PXQ7Zm9yKGk9MCxyPWUuY2hpbGRyZW5fZC5sZW5ndGg7aTxyO2krKylzW2UuY2hpbGRyZW5fZFtpXV0ucGFyZW50c1tFLmluQXJyYXkoZS5pZCxzW2UuY2hpbGRyZW5fZFtpXV0ucGFyZW50cyldPXQ7cmV0dXJuLTEhPT0oaT1FLmluQXJyYXkoZS5pZCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQpKSYmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXT10KSwoaT10aGlzLmdldF9ub2RlKGUuaWQsITApKSYmKGkuYXR0cihcImlkXCIsdCksdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIik9PT1lLmlkJiZ0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHQpKSxkZWxldGUgc1tlLmlkXSxlLmlkPXQsc1tlLmxpX2F0dHIuaWQ9dF09ZSx0aGlzLnRyaWdnZXIoXCJzZXRfaWRcIix7bm9kZTplLG5ldzplLmlkLG9sZDphfSksITB9LGdldF90ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJmUudGV4dH0sc2V0X3RleHQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnNldF90ZXh0KGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmKGUudGV4dD10LHRoaXMuZ2V0X25vZGUoZSwhMCkubGVuZ3RoJiZ0aGlzLnJlZHJhd19ub2RlKGUuaWQpLHRoaXMudHJpZ2dlcihcInNldF90ZXh0XCIse29iajplLHRleHQ6dH0pLCEwKX0sZ2V0X2pzb246ZnVuY3Rpb24oZSx0LGkpe2lmKCEoZT10aGlzLmdldF9ub2RlKGV8fEUuanN0cmVlLnJvb3QpKSlyZXR1cm4hMTt0JiZ0LmZsYXQmJiFpJiYoaT1bXSk7dmFyIHI9e2lkOmUuaWQsdGV4dDplLnRleHQsaWNvbjp0aGlzLmdldF9pY29uKGUpLGxpX2F0dHI6RS5leHRlbmQoITAse30sZS5saV9hdHRyKSxhX2F0dHI6RS5leHRlbmQoITAse30sZS5hX2F0dHIpLHN0YXRlOnt9LGRhdGE6KCF0fHwhdC5ub19kYXRhKSYmRS5leHRlbmQoITAsRS52YWthdGEuaXNfYXJyYXkoZS5kYXRhKT9bXTp7fSxlLmRhdGEpfSxzLGE7aWYodCYmdC5mbGF0P3IucGFyZW50PWUucGFyZW50OnIuY2hpbGRyZW49W10sdCYmdC5ub19zdGF0ZSlkZWxldGUgci5zdGF0ZTtlbHNlIGZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKHIuc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYodCYmdC5ub19saV9hdHRyJiZkZWxldGUgci5saV9hdHRyLHQmJnQubm9fYV9hdHRyJiZkZWxldGUgci5hX2F0dHIsdCYmdC5ub19pZCYmKGRlbGV0ZSByLmlkLHIubGlfYXR0ciYmci5saV9hdHRyLmlkJiZkZWxldGUgci5saV9hdHRyLmlkLHIuYV9hdHRyJiZyLmFfYXR0ci5pZCYmZGVsZXRlIHIuYV9hdHRyLmlkKSx0JiZ0LmZsYXQmJmUuaWQhPT1FLmpzdHJlZS5yb290JiZpLnB1c2gociksIXR8fCF0Lm5vX2NoaWxkcmVuKWZvcihzPTAsYT1lLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKXQmJnQuZmxhdD90aGlzLmdldF9qc29uKGUuY2hpbGRyZW5bc10sdCxpKTpyLmNoaWxkcmVuLnB1c2godGhpcy5nZXRfanNvbihlLmNoaWxkcmVuW3NdLHQpKTtyZXR1cm4gdCYmdC5mbGF0P2k6ZS5pZD09PUUuanN0cmVlLnJvb3Q/ci5jaGlsZHJlbjpyfSxjcmVhdGVfbm9kZTpmdW5jdGlvbihlLHQsaSxyLHMpe2lmKG51bGw9PT1lJiYoZT1FLmpzdHJlZS5yb290KSwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7aWYoIShpPWk9PT1QP1wibGFzdFwiOmkpLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIXMmJiF0aGlzLmlzX2xvYWRlZChlKSlyZXR1cm4gdGhpcy5sb2FkX25vZGUoZSxmdW5jdGlvbigpe3RoaXMuY3JlYXRlX25vZGUoZSx0LGksciwhMCl9KTt2YXIgYSxuLG8sZDtzd2l0Y2goKHQ9XCJzdHJpbmdcIj09dHlwZW9mKHQ9dHx8e3RleHQ6dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIil9KT97dGV4dDp0fTpFLmV4dGVuZCghMCx7fSx0KSkudGV4dD09PVAmJih0LnRleHQ9dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIikpLGk9ZS5pZD09PUUuanN0cmVlLnJvb3QmJlwiYWZ0ZXJcIj09PShpPVwiYmVmb3JlXCI9PT1pP1wiZmlyc3RcIjppKT9cImxhc3RcIjppKXtjYXNlXCJiZWZvcmVcIjphPXRoaXMuZ2V0X25vZGUoZS5wYXJlbnQpLGk9RS5pbkFycmF5KGUuaWQsYS5jaGlsZHJlbiksZT1hO2JyZWFrO2Nhc2VcImFmdGVyXCI6YT10aGlzLmdldF9ub2RlKGUucGFyZW50KSxpPUUuaW5BcnJheShlLmlkLGEuY2hpbGRyZW4pKzEsZT1hO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6aT0wO2JyZWFrO2Nhc2VcImxhc3RcIjppPWUuY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6aT1pfHwwfWlmKGk+ZS5jaGlsZHJlbi5sZW5ndGgmJihpPWUuY2hpbGRyZW4ubGVuZ3RoKSx0LmlkPT09UCYmKHQuaWQ9ITApLCF0aGlzLmNoZWNrKFwiY3JlYXRlX25vZGVcIix0LGUsaSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKCEwPT09dC5pZCYmZGVsZXRlIHQuaWQsISh0PXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbih0LGUuaWQsZS5wYXJlbnRzLmNvbmNhdCgpKSkpcmV0dXJuITE7Zm9yKGE9dGhpcy5nZXRfbm9kZSh0KSwobj1bXSkucHVzaCh0KSxuPW4uY29uY2F0KGEuY2hpbGRyZW5fZCksdGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6bixwYXJlbnQ6ZS5pZH0pLGUuY2hpbGRyZW5fZD1lLmNoaWxkcmVuX2QuY29uY2F0KG4pLG89MCxkPWUucGFyZW50cy5sZW5ndGg7bzxkO28rKyl0aGlzLl9tb2RlbC5kYXRhW2UucGFyZW50c1tvXV0uY2hpbGRyZW5fZD10aGlzLl9tb2RlbC5kYXRhW2UucGFyZW50c1tvXV0uY2hpbGRyZW5fZC5jb25jYXQobik7Zm9yKHQ9YSxhPVtdLG89MCxkPWUuY2hpbGRyZW4ubGVuZ3RoO288ZDtvKyspYVtpPD1vP28rMTpvXT1lLmNoaWxkcmVuW29dO3JldHVybiBhW2ldPXQuaWQsZS5jaGlsZHJlbj1hLHRoaXMucmVkcmF3X25vZGUoZSwhMCksdGhpcy50cmlnZ2VyKFwiY3JlYXRlX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKHQpLHBhcmVudDplLmlkLHBvc2l0aW9uOml9KSxyJiZyLmNhbGwodGhpcyx0aGlzLmdldF9ub2RlKHQpKSx0LmlkfSxyZW5hbWVfbm9kZTpmdW5jdGlvbihlLHQpe3ZhciBpLHIscztpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5yZW5hbWVfbm9kZShlW2ldLHQpO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJihzPWUudGV4dCx0aGlzLmNoZWNrKFwicmVuYW1lX25vZGVcIixlLHRoaXMuZ2V0X3BhcmVudChlKSx0KT8odGhpcy5zZXRfdGV4dChlLHQpLHRoaXMudHJpZ2dlcihcInJlbmFtZV9ub2RlXCIse25vZGU6ZSx0ZXh0OnQsb2xkOnN9KSwhMCk6KHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExKSl9LGRlbGV0ZV9ub2RlOmZ1bmN0aW9uKGUpe3ZhciB0LGkscixzLGEsbixvLGQsYyxsLGgscztpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5kZWxldGVfbm9kZShlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2lmKHI9dGhpcy5nZXRfbm9kZShlLnBhcmVudCkscz1FLmluQXJyYXkoZS5pZCxyLmNoaWxkcmVuKSxsPSExLCF0aGlzLmNoZWNrKFwiZGVsZXRlX25vZGVcIixlLHIscykpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2ZvcigtMSE9PXMmJihyLmNoaWxkcmVuPUUudmFrYXRhLmFycmF5X3JlbW92ZShyLmNoaWxkcmVuLHMpKSwoYT1lLmNoaWxkcmVuX2QuY29uY2F0KFtdKSkucHVzaChlLmlkKSxuPTAsbz1lLnBhcmVudHMubGVuZ3RoO248bztuKyspdGhpcy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbbl1dLmNoaWxkcmVuX2Q9RS52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX21vZGVsLmRhdGFbZS5wYXJlbnRzW25dXS5jaGlsZHJlbl9kLGZ1bmN0aW9uKGUpe3JldHVybi0xPT09RS5pbkFycmF5KGUsYSl9KTtmb3IoZD0wLGM9YS5sZW5ndGg7ZDxjO2QrKylpZih0aGlzLl9tb2RlbC5kYXRhW2FbZF1dLnN0YXRlLnNlbGVjdGVkKXtsPSEwO2JyZWFrfWZvcihsJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPUUudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1FLmluQXJyYXkoZSxhKX0pKSx0aGlzLnRyaWdnZXIoXCJkZWxldGVfbm9kZVwiLHtub2RlOmUscGFyZW50OnIuaWR9KSxsJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImRlbGV0ZV9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxwYXJlbnQ6ci5pZH0pLGQ9MCxjPWEubGVuZ3RoO2Q8YztkKyspZGVsZXRlIHRoaXMuX21vZGVsLmRhdGFbYVtkXV07cmV0dXJuLTEhPT1FLmluQXJyYXkodGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQsYSkmJih0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1udWxsLGg9dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCxzPXRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0LHIuaWQ9PT1FLmpzdHJlZS5yb290P3RoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF0uY2hpbGRyZW5bMF0mJnRoaXMuZ2V0X25vZGUodGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS5jaGlsZHJlblswXSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIik6dGhpcy5nZXRfbm9kZShyLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSx0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wPWgsdGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQ9cyksdGhpcy5yZWRyYXdfbm9kZShyLCEwKSwhMH0sY2hlY2s6ZnVuY3Rpb24oZSx0LGkscixzKXt0PXQmJnQuaWQ/dDp0aGlzLmdldF9ub2RlKHQpLGk9aSYmaS5pZD9pOnRoaXMuZ2V0X25vZGUoaSk7dmFyIGE9ZS5tYXRjaCgvXihtb3ZlX25vZGV8Y29weV9ub2RlfGNyZWF0ZV9ub2RlKSQvaSk/aTp0LG49dGhpcy5zZXR0aW5ncy5jb3JlLmNoZWNrX2NhbGxiYWNrO2lmKFwibW92ZV9ub2RlXCI9PT1lfHxcImNvcHlfbm9kZVwiPT09ZSl7aWYoIShzJiZzLmlzX211bHRpfHxcIm1vdmVfbm9kZVwiIT09ZXx8RS5pbkFycmF5KHQuaWQsaS5jaGlsZHJlbikhPT1yKSlyZXR1cm4hKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wOFwiLHJlYXNvbjpcIk1vdmluZyBub2RlIHRvIGl0cyBjdXJyZW50IHBvc2l0aW9uXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQpJiZpLmlkfSl9KTtpZighKHMmJnMuaXNfbXVsdGl8fHQuaWQhPT1pLmlkJiYoXCJtb3ZlX25vZGVcIiE9PWV8fEUuaW5BcnJheSh0LmlkLGkuY2hpbGRyZW4pIT09cikmJi0xPT09RS5pbkFycmF5KGkuaWQsdC5jaGlsZHJlbl9kKSkpcmV0dXJuISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDFcIixyZWFzb246XCJNb3ZpbmcgcGFyZW50IGluc2lkZSBjaGlsZFwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSl9cmV0dXJuKGE9YSYmYS5kYXRhP2EuZGF0YTphKSYmYS5mdW5jdGlvbnMmJighMT09PWEuZnVuY3Rpb25zW2VdfHwhMD09PWEuZnVuY3Rpb25zW2VdKT8oITE9PT1hLmZ1bmN0aW9uc1tlXSYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wMlwiLHJlYXNvbjpcIk5vZGUgZGF0YSBwcmV2ZW50cyBmdW5jdGlvbjogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pLGEuZnVuY3Rpb25zW2VdKTohKCExPT09bnx8RS52YWthdGEuaXNfZnVuY3Rpb24obikmJiExPT09bi5jYWxsKHRoaXMsZSx0LGkscixzKXx8biYmITE9PT1uW2VdKXx8ISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDNcIixyZWFzb246XCJVc2VyIGNvbmZpZyBmb3IgY29yZS5jaGVja19jYWxsYmFjayBwcmV2ZW50cyBmdW5jdGlvbjogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pfSxsYXN0X2Vycm9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yfSxtb3ZlX25vZGU6ZnVuY3Rpb24oZSx0LGkscixzLGEsbil7dmFyIG8sZCxjLGwsaCxfLGcsdSxmLHAsbSx2LGosaztpZih0PXRoaXMuZ2V0X25vZGUodCksaT1pPT09UD8wOmksIXQpcmV0dXJuITE7aWYoIWkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiYhcyYmIXRoaXMuaXNfbG9hZGVkKHQpKXJldHVybiB0aGlzLmxvYWRfbm9kZSh0LGZ1bmN0aW9uKCl7dGhpcy5tb3ZlX25vZGUoZSx0LGksciwhMCwhMSxuKX0pO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtpZigxIT09ZS5sZW5ndGgpe2ZvcihvPTAsZD1lLmxlbmd0aDtvPGQ7bysrKShmPXRoaXMubW92ZV9ub2RlKGVbb10sdCxpLHIscywhMSxuKSkmJih0PWYsaT1cImFmdGVyXCIpO3JldHVybiB0aGlzLnJlZHJhdygpLCEwfWU9ZVswXX1pZighKGU9ZSYmZS5pZCE9PVA/ZTp0aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7aWYoYz0oZS5wYXJlbnR8fEUuanN0cmVlLnJvb3QpLnRvU3RyaW5nKCksaD1pLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmdC5pZCE9PUUuanN0cmVlLnJvb3Q/dGhpcy5nZXRfbm9kZSh0LnBhcmVudCk6dCxnPSEoXz1ufHwodGhpcy5fbW9kZWwuZGF0YVtlLmlkXT90aGlzOkUuanN0cmVlLnJlZmVyZW5jZShlLmlkKSkpfHwhXy5faWR8fHRoaXMuX2lkIT09Xy5faWQsbD1fJiZfLl9pZCYmYyYmXy5fbW9kZWwuZGF0YVtjXSYmXy5fbW9kZWwuZGF0YVtjXS5jaGlsZHJlbj9FLmluQXJyYXkoZS5pZCxfLl9tb2RlbC5kYXRhW2NdLmNoaWxkcmVuKTotMSxfJiZfLl9pZCYmKGU9Xy5fbW9kZWwuZGF0YVtlLmlkXSksZylyZXR1cm4hIShmPXRoaXMuY29weV9ub2RlKGUsdCxpLHIscywhMSxuKSkmJihfJiZfLmRlbGV0ZV9ub2RlKGUpLGYpO3N3aXRjaChpPXQuaWQ9PT1FLmpzdHJlZS5yb290JiZcImFmdGVyXCI9PT0oaT1cImJlZm9yZVwiPT09aT9cImZpcnN0XCI6aSk/XCJsYXN0XCI6aSl7Y2FzZVwiYmVmb3JlXCI6aT1FLmluQXJyYXkodC5pZCxoLmNoaWxkcmVuKTticmVhaztjYXNlXCJhZnRlclwiOmk9RS5pbkFycmF5KHQuaWQsaC5jaGlsZHJlbikrMTticmVhaztjYXNlXCJpbnNpZGVcIjpjYXNlXCJmaXJzdFwiOmk9MDticmVhaztjYXNlXCJsYXN0XCI6aT1oLmNoaWxkcmVuLmxlbmd0aDticmVhaztkZWZhdWx0Omk9aXx8MH1pZihpPmguY2hpbGRyZW4ubGVuZ3RoJiYoaT1oLmNoaWxkcmVuLmxlbmd0aCksIXRoaXMuY2hlY2soXCJtb3ZlX25vZGVcIixlLGgsaSx7Y29yZTohMCxvcmlnaW46bixpc19tdWx0aTpfJiZfLl9pZCYmXy5faWQhPT10aGlzLl9pZCxpc19mb3JlaWduOiFffHwhXy5faWR9KSlyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITE7aWYoZS5wYXJlbnQ9PT1oLmlkKXtmb3IodT1oLmNoaWxkcmVuLmNvbmNhdCgpLC0xIT09KGY9RS5pbkFycmF5KGUuaWQsdSkpJiYodT1FLnZha2F0YS5hcnJheV9yZW1vdmUodSxmKSxmPGkmJmktLSksZj1bXSxwPTAsbT11Lmxlbmd0aDtwPG07cCsrKWZbaTw9cD9wKzE6cF09dVtwXTtmW2ldPWUuaWQsaC5jaGlsZHJlbj1mLHRoaXMuX25vZGVfY2hhbmdlZChoLmlkKSx0aGlzLnJlZHJhdyhoLmlkPT09RS5qc3RyZWUucm9vdCl9ZWxzZXtmb3IoKGY9ZS5jaGlsZHJlbl9kLmNvbmNhdCgpKS5wdXNoKGUuaWQpLHA9MCxtPWUucGFyZW50cy5sZW5ndGg7cDxtO3ArKyl7Zm9yKHU9W10sdj0wLGo9KGs9Xy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbcF1dLmNoaWxkcmVuX2QpLmxlbmd0aDt2PGo7disrKS0xPT09RS5pbkFycmF5KGtbdl0sZikmJnUucHVzaChrW3ZdKTtfLl9tb2RlbC5kYXRhW2UucGFyZW50c1twXV0uY2hpbGRyZW5fZD11fWZvcihfLl9tb2RlbC5kYXRhW2NdLmNoaWxkcmVuPUUudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKF8uX21vZGVsLmRhdGFbY10uY2hpbGRyZW4sZS5pZCkscD0wLG09aC5wYXJlbnRzLmxlbmd0aDtwPG07cCsrKXRoaXMuX21vZGVsLmRhdGFbaC5wYXJlbnRzW3BdXS5jaGlsZHJlbl9kPXRoaXMuX21vZGVsLmRhdGFbaC5wYXJlbnRzW3BdXS5jaGlsZHJlbl9kLmNvbmNhdChmKTtmb3IodT1bXSxwPTAsbT1oLmNoaWxkcmVuLmxlbmd0aDtwPG07cCsrKXVbaTw9cD9wKzE6cF09aC5jaGlsZHJlbltwXTtmb3IodVtpXT1lLmlkLGguY2hpbGRyZW49dSxoLmNoaWxkcmVuX2QucHVzaChlLmlkKSxoLmNoaWxkcmVuX2Q9aC5jaGlsZHJlbl9kLmNvbmNhdChlLmNoaWxkcmVuX2QpLGUucGFyZW50PWguaWQsKGY9aC5wYXJlbnRzLmNvbmNhdCgpKS51bnNoaWZ0KGguaWQpLGs9ZS5wYXJlbnRzLmxlbmd0aCxmPShlLnBhcmVudHM9ZikuY29uY2F0KCkscD0wLG09ZS5jaGlsZHJlbl9kLmxlbmd0aDtwPG07cCsrKXRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3BdXS5wYXJlbnRzPXRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3BdXS5wYXJlbnRzLnNsaWNlKDAsLTEqayksQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2RbcF1dLnBhcmVudHMsZik7YyE9PUUuanN0cmVlLnJvb3QmJmguaWQhPT1FLmpzdHJlZS5yb290fHwodGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITApLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3fHwodGhpcy5fbm9kZV9jaGFuZ2VkKGMpLHRoaXMuX25vZGVfY2hhbmdlZChoLmlkKSksYXx8dGhpcy5yZWRyYXcoKX1yZXR1cm4gciYmci5jYWxsKHRoaXMsZSxoLGkpLHRoaXMudHJpZ2dlcihcIm1vdmVfbm9kZVwiLHtub2RlOmUscGFyZW50OmguaWQscG9zaXRpb246aSxvbGRfcGFyZW50OmMsb2xkX3Bvc2l0aW9uOmwsaXNfbXVsdGk6XyYmXy5faWQmJl8uX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohX3x8IV8uX2lkLG9sZF9pbnN0YW5jZTpfLG5ld19pbnN0YW5jZTp0aGlzfSksZS5pZH0sY29weV9ub2RlOmZ1bmN0aW9uKGUsdCxpLHIscyxhLG4pe3ZhciBvLGQsYyxsLGgsXyxnLHUsZixwLG07aWYodD10aGlzLmdldF9ub2RlKHQpLGk9aT09PVA/MDppLCF0KXJldHVybiExO2lmKCFpLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIXMmJiF0aGlzLmlzX2xvYWRlZCh0KSlyZXR1cm4gdGhpcy5sb2FkX25vZGUodCxmdW5jdGlvbigpe3RoaXMuY29weV9ub2RlKGUsdCxpLHIsITAsITEsbil9KTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7aWYoMSE9PWUubGVuZ3RoKXtmb3Iobz0wLGQ9ZS5sZW5ndGg7bzxkO28rKykobD10aGlzLmNvcHlfbm9kZShlW29dLHQsaSxyLHMsITAsbikpJiYodD1sLGk9XCJhZnRlclwiKTtyZXR1cm4gdGhpcy5yZWRyYXcoKSwhMH1lPWVbMF19aWYoIShlPWUmJmUuaWQhPT1QP2U6dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3N3aXRjaCh1PShlLnBhcmVudHx8RS5qc3RyZWUucm9vdCkudG9TdHJpbmcoKSxmPWkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiZ0LmlkIT09RS5qc3RyZWUucm9vdD90aGlzLmdldF9ub2RlKHQucGFyZW50KTp0LG09IShwPW58fCh0aGlzLl9tb2RlbC5kYXRhW2UuaWRdP3RoaXM6RS5qc3RyZWUucmVmZXJlbmNlKGUuaWQpKSl8fCFwLl9pZHx8dGhpcy5faWQhPT1wLl9pZCxwJiZwLl9pZCYmKGU9cC5fbW9kZWwuZGF0YVtlLmlkXSksaT10LmlkPT09RS5qc3RyZWUucm9vdCYmXCJhZnRlclwiPT09KGk9XCJiZWZvcmVcIj09PWk/XCJmaXJzdFwiOmkpP1wibGFzdFwiOmkpe2Nhc2VcImJlZm9yZVwiOmk9RS5pbkFycmF5KHQuaWQsZi5jaGlsZHJlbik7YnJlYWs7Y2FzZVwiYWZ0ZXJcIjppPUUuaW5BcnJheSh0LmlkLGYuY2hpbGRyZW4pKzE7YnJlYWs7Y2FzZVwiaW5zaWRlXCI6Y2FzZVwiZmlyc3RcIjppPTA7YnJlYWs7Y2FzZVwibGFzdFwiOmk9Zi5jaGlsZHJlbi5sZW5ndGg7YnJlYWs7ZGVmYXVsdDppPWl8fDB9aWYoaT5mLmNoaWxkcmVuLmxlbmd0aCYmKGk9Zi5jaGlsZHJlbi5sZW5ndGgpLCF0aGlzLmNoZWNrKFwiY29weV9ub2RlXCIsZSxmLGkse2NvcmU6ITAsb3JpZ2luOm4saXNfbXVsdGk6cCYmcC5faWQmJnAuX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohcHx8IXAuX2lkfSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKCEoZz1wP3AuZ2V0X2pzb24oZSx7bm9faWQ6ITAsbm9fZGF0YTohMCxub19zdGF0ZTohMH0pOmUpKXJldHVybiExO2lmKCEwPT09Zy5pZCYmZGVsZXRlIGcuaWQsIShnPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbihnLGYuaWQsZi5wYXJlbnRzLmNvbmNhdCgpKSkpcmV0dXJuITE7Zm9yKGw9dGhpcy5nZXRfbm9kZShnKSxlJiZlLnN0YXRlJiYhMT09PWUuc3RhdGUubG9hZGVkJiYobC5zdGF0ZS5sb2FkZWQ9ITEpLChjPVtdKS5wdXNoKGcpLGM9Yy5jb25jYXQobC5jaGlsZHJlbl9kKSx0aGlzLnRyaWdnZXIoXCJtb2RlbFwiLHtub2RlczpjLHBhcmVudDpmLmlkfSksaD0wLF89Zi5wYXJlbnRzLmxlbmd0aDtoPF87aCsrKXRoaXMuX21vZGVsLmRhdGFbZi5wYXJlbnRzW2hdXS5jaGlsZHJlbl9kPXRoaXMuX21vZGVsLmRhdGFbZi5wYXJlbnRzW2hdXS5jaGlsZHJlbl9kLmNvbmNhdChjKTtmb3IoYz1bXSxoPTAsXz1mLmNoaWxkcmVuLmxlbmd0aDtoPF87aCsrKWNbaTw9aD9oKzE6aF09Zi5jaGlsZHJlbltoXTtyZXR1cm4gY1tpXT1sLmlkLGYuY2hpbGRyZW49YyxmLmNoaWxkcmVuX2QucHVzaChsLmlkKSxmLmNoaWxkcmVuX2Q9Zi5jaGlsZHJlbl9kLmNvbmNhdChsLmNoaWxkcmVuX2QpLGYuaWQ9PT1FLmpzdHJlZS5yb290JiYodGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITApLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3fHx0aGlzLl9ub2RlX2NoYW5nZWQoZi5pZCksYXx8dGhpcy5yZWRyYXcoZi5pZD09PUUuanN0cmVlLnJvb3QpLHImJnIuY2FsbCh0aGlzLGwsZixpKSx0aGlzLnRyaWdnZXIoXCJjb3B5X25vZGVcIix7bm9kZTpsLG9yaWdpbmFsOmUscGFyZW50OmYuaWQscG9zaXRpb246aSxvbGRfcGFyZW50OnUsb2xkX3Bvc2l0aW9uOnAmJnAuX2lkJiZ1JiZwLl9tb2RlbC5kYXRhW3VdJiZwLl9tb2RlbC5kYXRhW3VdLmNoaWxkcmVuP0UuaW5BcnJheShlLmlkLHAuX21vZGVsLmRhdGFbdV0uY2hpbGRyZW4pOi0xLGlzX211bHRpOnAmJnAuX2lkJiZwLl9pZCE9PXRoaXMuX2lkLGlzX2ZvcmVpZ246IXB8fCFwLl9pZCxvbGRfaW5zdGFuY2U6cCxuZXdfaW5zdGFuY2U6dGhpc30pLGwuaWR9LGN1dDpmdW5jdGlvbihlKXtpZihlPWV8fHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoKSwhKGU9IUUudmFrYXRhLmlzX2FycmF5KGUpP1tlXTplKS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB0PVtdLGkscixzLHI9MCxzPWUubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5nZXRfbm9kZShlW3JdKSkmJihpLmlkfHwwPT09aS5pZCkmJmkuaWQhPT1FLmpzdHJlZS5yb290JiZ0LnB1c2goaSk7aWYoIXQubGVuZ3RoKXJldHVybiExO2E9dCxuPVwibW92ZV9ub2RlXCIsKG89dGhpcykudHJpZ2dlcihcImN1dFwiLHtub2RlOmV9KX0sY29weTpmdW5jdGlvbihlKXtpZihlPWV8fHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoKSwhKGU9IUUudmFrYXRhLmlzX2FycmF5KGUpP1tlXTplKS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB0PVtdLGkscixzLHI9MCxzPWUubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5nZXRfbm9kZShlW3JdKSkmJmkuaWQhPT1QJiZpLmlkIT09RS5qc3RyZWUucm9vdCYmdC5wdXNoKGkpO2lmKCF0Lmxlbmd0aClyZXR1cm4hMTthPXQsbj1cImNvcHlfbm9kZVwiLChvPXRoaXMpLnRyaWdnZXIoXCJjb3B5XCIse25vZGU6ZX0pfSxnZXRfYnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJue21vZGU6bixub2RlOmEsaW5zdDpvfX0sY2FuX3Bhc3RlOmZ1bmN0aW9uKCl7cmV0dXJuITEhPT1uJiYhMSE9PWF9LHBhc3RlOmZ1bmN0aW9uKGUsdCl7aWYoISgoZT10aGlzLmdldF9ub2RlKGUpKSYmbiYmbi5tYXRjaCgvXihjb3B5X25vZGV8bW92ZV9ub2RlKSQvKSYmYSkpcmV0dXJuITE7dGhpc1tuXShhLGUsdCwhMSwhMSwhMSxvKSYmdGhpcy50cmlnZ2VyKFwicGFzdGVcIix7cGFyZW50OmUuaWQsbm9kZTphLG1vZGU6bn0pLG89bj1hPSExfSxjbGVhcl9idWZmZXI6ZnVuY3Rpb24oKXtvPW49YT0hMSx0aGlzLnRyaWdnZXIoXCJjbGVhcl9idWZmZXJcIil9LGVkaXQ6ZnVuY3Rpb24ocixlLHMpe3ZhciB0LGksYSxuLG8sZCxjLHQsbCxoPSExO3JldHVybiEhKHI9dGhpcy5nZXRfbm9kZShyKSkmJih0aGlzLmNoZWNrKFwiZWRpdFwiLHIsdGhpcy5nZXRfcGFyZW50KHIpKT8obD1yLGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpyLnRleHQsdGhpcy5zZXRfdGV4dChyLFwiXCIpLHI9dGhpcy5fb3Blbl90byhyKSxsLnRleHQ9ZSx0PXRoaXMuX2RhdGEuY29yZS5ydGwsaT10aGlzLmVsZW1lbnQud2lkdGgoKSx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1sLmlkLGE9ci5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxuPUUoXCI8c3Bhbj48L3NwYW4+XCIpLG89ZSxkPUUoXCI8ZGl2PjwvZGl2PlwiLHtjc3M6e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMjAwcHhcIixsZWZ0OnQ/XCIwcHhcIjpcIi0xMDAwcHhcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9fSkuYXBwZW5kVG8oYi5ib2R5KSxjPUUoXCI8aW5wdXQgLz5cIix7dmFsdWU6byxjbGFzczpcImpzdHJlZS1yZW5hbWUtaW5wdXRcIixjc3M6e3BhZGRpbmc6XCIwXCIsYm9yZGVyOlwiMXB4IHNvbGlkIHNpbHZlclwiLFwiYm94LXNpemluZ1wiOlwiYm9yZGVyLWJveFwiLGRpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixoZWlnaHQ6dGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCtcInB4XCIsbGluZUhlaWdodDp0aGlzLl9kYXRhLmNvcmUubGlfaGVpZ2h0K1wicHhcIix3aWR0aDpcIjE1MHB4XCJ9LGJsdXI6ZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQsaT1uLmNoaWxkcmVuKFwiLmpzdHJlZS1yZW5hbWUtaW5wdXRcIikudmFsKCksZT10aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCxlO1wiXCI9PT1pJiYoaT1vKSxkLnJlbW92ZSgpLG4ucmVwbGFjZVdpdGgoYSksbi5yZW1vdmUoKSxvPWU/bzpFKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKEUucGFyc2VIVE1MKG8pKS5odG1sKCkscj10aGlzLmdldF9ub2RlKHIpLHRoaXMuc2V0X3RleHQocixvKSwoZT0hIXRoaXMucmVuYW1lX25vZGUocixlP0UoXCI8ZGl2PjwvZGl2PlwiKS50ZXh0KGkpLnRleHQoKTpFKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKEUucGFyc2VIVE1MKGkpKS5odG1sKCkpKXx8dGhpcy5zZXRfdGV4dChyLG8pLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPWwuaWQsc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0X25vZGUobC5pZCwhMCk7ZS5sZW5ndGgmJih0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1sLmlkLGUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIikpfS5iaW5kKHRoaXMpLDApLHMmJnMuY2FsbCh0aGlzLGwsZSxoLGkpLGM9bnVsbH0uYmluZCh0aGlzKSxrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PWUud2hpY2g7Mjc9PT10JiYoaD0hMCx0aGlzLnZhbHVlPW8pLDI3IT09dCYmMTMhPT10JiYzNyE9PXQmJjM4IT09dCYmMzkhPT10JiY0MCE9PXQmJjMyIT09dHx8ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwyNyE9PXQmJjEzIT09dHx8KGUucHJldmVudERlZmF1bHQoKSx0aGlzLmJsdXIoKSl9LGNsaWNrOmZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9LG1vdXNlZG93bjpmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSxrZXl1cDpmdW5jdGlvbihlKXtjLndpZHRoKE1hdGgubWluKGQudGV4dChcInBXXCIrdGhpcy52YWx1ZSkud2lkdGgoKSxpKSl9LGtleXByZXNzOmZ1bmN0aW9uKGUpe2lmKDEzPT09ZS53aGljaClyZXR1cm4hMX19KSx0PXtmb250RmFtaWx5OmEuY3NzKFwiZm9udEZhbWlseVwiKXx8XCJcIixmb250U2l6ZTphLmNzcyhcImZvbnRTaXplXCIpfHxcIlwiLGZvbnRXZWlnaHQ6YS5jc3MoXCJmb250V2VpZ2h0XCIpfHxcIlwiLGZvbnRTdHlsZTphLmNzcyhcImZvbnRTdHlsZVwiKXx8XCJcIixmb250U3RyZXRjaDphLmNzcyhcImZvbnRTdHJldGNoXCIpfHxcIlwiLGZvbnRWYXJpYW50OmEuY3NzKFwiZm9udFZhcmlhbnRcIil8fFwiXCIsbGV0dGVyU3BhY2luZzphLmNzcyhcImxldHRlclNwYWNpbmdcIil8fFwiXCIsd29yZFNwYWNpbmc6YS5jc3MoXCJ3b3JkU3BhY2luZ1wiKXx8XCJcIn0sbi5hdHRyKFwiY2xhc3NcIixhLmF0dHIoXCJjbGFzc1wiKSkuYXBwZW5kKGEuY29udGVudHMoKS5jbG9uZSgpKS5hcHBlbmQoYyksYS5yZXBsYWNlV2l0aChuKSxkLmNzcyh0KSxjLmNzcyh0KS53aWR0aChNYXRoLm1pbihkLnRleHQoXCJwV1wiK2NbMF0udmFsdWUpLndpZHRoKCksaSkpWzBdLnNlbGVjdCgpLHZvaWQgRShiKS5vbmUoXCJtb3VzZWRvd24uanN0cmVlIHRvdWNoc3RhcnQuanN0cmVlIGRuZF9zdGFydC52YWthdGFcIixmdW5jdGlvbihlKXtjJiZlLnRhcmdldCE9PWMmJkUoYykudHJpZ2dlcihcImJsdXJcIil9KSk6KHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExKSl9LHNldF90aGVtZTpmdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybiExO3ZhciBpLGk7KHQ9ITA9PT10PyhpPShpPXRoaXMuc2V0dGluZ3MuY29yZS50aGVtZXMuZGlyKXx8RS5qc3RyZWUucGF0aCtcIi90aGVtZXNcIikrXCIvXCIrZStcIi9zdHlsZS5jc3NcIjp0KSYmLTE9PT1FLmluQXJyYXkodCxyKSYmKEUoXCJoZWFkXCIpLmFwcGVuZCgnPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCInK3QrJ1wiIHR5cGU9XCJ0ZXh0L2Nzc1wiIC8+Jyksci5wdXNoKHQpKSx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcImpzdHJlZS1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUpLHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZT1lLHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImpzdHJlZS1cIitlKSx0aGlzLmVsZW1lbnRbdGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianN0cmVlLVwiK2UrXCItcmVzcG9uc2l2ZVwiKSx0aGlzLnRyaWdnZXIoXCJzZXRfdGhlbWVcIix7dGhlbWU6ZX0pfSxnZXRfdGhlbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lfSxzZXRfdGhlbWVfdmFyaWFudDpmdW5jdGlvbihlKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcImpzdHJlZS1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUrXCItXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50KSwodGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50PWUpJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lK1wiLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudCl9LGdldF90aGVtZV92YXJpYW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudH0sc2hvd19zdHJpcGVzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLXN0cmlwZWRcIiksdGhpcy50cmlnZ2VyKFwic2hvd19zdHJpcGVzXCIpfSxoaWRlX3N0cmlwZXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM9ITEsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtc3RyaXBlZFwiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX3N0cmlwZXNcIil9LHRvZ2dsZV9zdHJpcGVzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzP3RoaXMuaGlkZV9zdHJpcGVzKCk6dGhpcy5zaG93X3N0cmlwZXMoKX0sc2hvd19kb3RzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW5vLWRvdHNcIiksdGhpcy50cmlnZ2VyKFwic2hvd19kb3RzXCIpfSxoaWRlX2RvdHM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM9ITEsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtbm8tZG90c1wiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2RvdHNcIil9LHRvZ2dsZV9kb3RzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzP3RoaXMuaGlkZV9kb3RzKCk6dGhpcy5zaG93X2RvdHMoKX0sc2hvd19pY29uczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbm8taWNvbnNcIiksdGhpcy50cmlnZ2VyKFwic2hvd19pY29uc1wiKX0saGlkZV9pY29uczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnM9ITEsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtbm8taWNvbnNcIiksdGhpcy50cmlnZ2VyKFwiaGlkZV9pY29uc1wiKX0sdG9nZ2xlX2ljb25zOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz90aGlzLmhpZGVfaWNvbnMoKTp0aGlzLnNob3dfaWNvbnMoKX0sc2hvd19lbGxpcHNpczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZWxsaXBzaXM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtZWxsaXBzaXNcIiksdGhpcy50cmlnZ2VyKFwic2hvd19lbGxpcHNpc1wiKX0saGlkZV9lbGxpcHNpczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZWxsaXBzaXM9ITEsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZWxsaXBzaXNcIiksdGhpcy50cmlnZ2VyKFwiaGlkZV9lbGxpcHNpc1wiKX0sdG9nZ2xlX2VsbGlwc2lzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz90aGlzLmhpZGVfZWxsaXBzaXMoKTp0aGlzLnNob3dfZWxsaXBzaXMoKX0sc2V0X2ljb246ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLHMsYTtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5zZXRfaWNvbihlW2ldLHQpO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdCkmJihhPWUuaWNvbixlLmljb249ITA9PT10fHxudWxsPT09dHx8dD09PVB8fFwiXCI9PT10fHx0LHM9dGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIiksITE9PT10PyhzLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b20gXCIrYSkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLnJlbW92ZUF0dHIoXCJyZWxcIiksdGhpcy5oaWRlX2ljb24oZSkpOighMD09PXR8fG51bGw9PT10fHx0PT09UHx8XCJcIj09PXQ/cy5yZW1vdmVDbGFzcyhcImpzdHJlZS10aGVtZWljb24tY3VzdG9tIFwiK2EpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKS5yZW1vdmVBdHRyKFwicmVsXCIpOi0xPT09dC5pbmRleE9mKFwiL1wiKSYmLTE9PT10LmluZGV4T2YoXCIuXCIpPyhzLnJlbW92ZUNsYXNzKGEpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKSxzLmFkZENsYXNzKHQrXCIganN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikuYXR0cihcInJlbFwiLHQpKToocy5yZW1vdmVDbGFzcyhhKS5jc3MoXCJiYWNrZ3JvdW5kXCIsXCJcIikscy5hZGRDbGFzcyhcImpzdHJlZS10aGVtZWljb24tY3VzdG9tXCIpLmNzcyhcImJhY2tncm91bmRcIixcInVybCgnXCIrdCtcIicpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0XCIpLmF0dHIoXCJyZWxcIix0KSksITE9PT1hJiZ0aGlzLnNob3dfaWNvbihlKSksITApfSxnZXRfaWNvbjpmdW5jdGlvbihlKXtyZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpJiZlLmljb259LGhpZGVfaWNvbjpmdW5jdGlvbihlKXt2YXIgdCxpO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmhpZGVfaWNvbihlW3RdKTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZT09PUUuanN0cmVlLnJvb3QpJiYoZS5pY29uPSExLHRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLmFkZENsYXNzKFwianN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIiksITApfSxzaG93X2ljb246ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLnNob3dfaWNvbihlW3RdKTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZT09PUUuanN0cmVlLnJvb3QpJiYocj10aGlzLmdldF9ub2RlKGUsITApLGUuaWNvbj0hci5sZW5ndGh8fHIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLmF0dHIoXCJyZWxcIiksZS5pY29ufHwoZS5pY29uPSEwKSxyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS10aGVtZWljb24taGlkZGVuXCIpLCEwKX19LEUudmFrYXRhPXt9LEUudmFrYXRhLmF0dHJpYnV0ZXM9ZnVuY3Rpb24oZSxpKXtlPUUoZSlbMF07dmFyIHI9aT97fTpbXTtyZXR1cm4gZSYmZS5hdHRyaWJ1dGVzJiZFLmVhY2goZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUsdCl7LTE9PT1FLmluQXJyYXkodC5uYW1lLnRvTG93ZXJDYXNlKCksW1wic3R5bGVcIixcImNvbnRlbnRlZGl0YWJsZVwiLFwiaGFzZm9jdXNcIixcInRhYmluZGV4XCJdKSYmbnVsbCE9PXQudmFsdWUmJlwiXCIhPT1FLnZha2F0YS50cmltKHQudmFsdWUpJiYoaT9yW3QubmFtZV09dC52YWx1ZTpyLnB1c2godC5uYW1lKSl9KSxyfSxFLnZha2F0YS5hcnJheV91bmlxdWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLGkscixzLGE9e30saT0wLHM9ZS5sZW5ndGg7aTxzO2krKylhW2VbaV1dPT09UCYmKHQucHVzaChlW2ldKSxhW2VbaV1dPSEwKTtyZXR1cm4gdH0sRS52YWthdGEuYXJyYXlfcmVtb3ZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3BsaWNlKHQsMSksZX0sRS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW09ZnVuY3Rpb24oZSx0KXt2YXIgdD1FLmluQXJyYXkodCxlKTtyZXR1cm4tMSE9PXQ/RS52YWthdGEuYXJyYXlfcmVtb3ZlKGUsdCk6ZX0sRS52YWthdGEuYXJyYXlfZmlsdGVyPWZ1bmN0aW9uKGUsdCxpLHIscyl7aWYoZS5maWx0ZXIpcmV0dXJuIGUuZmlsdGVyKHQsaSk7Zm9yKHMgaW4gcj1bXSxlKX5+cytcIlwiPT1zK1wiXCImJjA8PXMmJnQuY2FsbChpLGVbc10sK3MsZSkmJnIucHVzaChlW3NdKTtyZXR1cm4gcn0sRS52YWthdGEudHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltP1N0cmluZy5wcm90b3R5cGUudHJpbS5jYWxsKGUudG9TdHJpbmcoKSk6ZS50b1N0cmluZygpLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpfSxFLnZha2F0YS5pc19mdW5jdGlvbj1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZcIm51bWJlclwiIT10eXBlb2YgZS5ub2RlVHlwZX0sRS52YWthdGEuaXNfYXJyYXk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPWFyZ3VtZW50c1swXSxyPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZVwiKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1yLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdC5hcHBseShpLGUpfX0pLEUuanN0cmVlLnBsdWdpbnMuY2hhbmdlZD1mdW5jdGlvbihlLGEpe3ZhciBuPVtdO3RoaXMudHJpZ2dlcj1mdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYodD10fHx7fSxcImNoYW5nZWRcIj09PWUucmVwbGFjZShcIi5qc3RyZWVcIixcIlwiKSl7dC5jaGFuZ2VkPXtzZWxlY3RlZDpbXSxkZXNlbGVjdGVkOltdfTtmb3IodmFyIHM9e30saT0wLHI9bi5sZW5ndGg7aTxyO2krKylzW25baV1dPTE7Zm9yKGk9MCxyPXQuc2VsZWN0ZWQubGVuZ3RoO2k8cjtpKyspc1t0LnNlbGVjdGVkW2ldXT9zW3Quc2VsZWN0ZWRbaV1dPTI6dC5jaGFuZ2VkLnNlbGVjdGVkLnB1c2godC5zZWxlY3RlZFtpXSk7Zm9yKGk9MCxyPW4ubGVuZ3RoO2k8cjtpKyspMT09PXNbbltpXV0mJnQuY2hhbmdlZC5kZXNlbGVjdGVkLnB1c2gobltpXSk7bj10LnNlbGVjdGVkLnNsaWNlKCl9YS50cmlnZ2VyLmNhbGwodGhpcyxlLHQpfSx0aGlzLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbj1bXSxhLnJlZnJlc2guYXBwbHkodGhpcyxhcmd1bWVudHMpfX07dmFyIGw9Yi5jcmVhdGVFbGVtZW50KFwiSVwiKSxoLF8sZyxkLHUsZixwLHc7bC5jbGFzc05hbWU9XCJqc3RyZWUtaWNvbiBqc3RyZWUtY2hlY2tib3hcIixsLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxFLmpzdHJlZS5kZWZhdWx0cy5jaGVja2JveD17dmlzaWJsZTohMCx0aHJlZV9zdGF0ZTohMCx3aG9sZV9ub2RlOiEwLGtlZXBfc2VsZWN0ZWRfc3R5bGU6ITAsY2FzY2FkZTpcIlwiLHRpZV9zZWxlY3Rpb246ITAsY2FzY2FkZV90b19kaXNhYmxlZDohMCxjYXNjYWRlX3RvX2hpZGRlbjohMH0sRS5qc3RyZWUucGx1Z2lucy5jaGVja2JveD1mdW5jdGlvbihlLGQpe3RoaXMuYmluZD1mdW5jdGlvbigpe2QuYmluZC5jYWxsKHRoaXMpLHRoaXMuX2RhdGEuY2hlY2tib3gudXRvPSExLHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9W10sdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aHJlZV9zdGF0ZSYmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZT1cInVwK2Rvd24rdW5kZXRlcm1pbmVkXCIpLHRoaXMuZWxlbWVudC5vbihcImluaXQuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNoZWNrYm94LnZpc2libGU9dGhpcy5zZXR0aW5ncy5jaGVja2JveC52aXNpYmxlLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gua2VlcF9zZWxlY3RlZF9zdHlsZXx8dGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLWNoZWNrYm94LW5vLWNsaWNrZWRcIiksdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtc2VsZWN0aW9uXCIpfS5iaW5kKHRoaXMpKS5vbihcImxvYWRpbmcuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzW3RoaXMuX2RhdGEuY2hlY2tib3gudmlzaWJsZT9cInNob3dfY2hlY2tib3hlc1wiOlwiaGlkZV9jaGVja2JveGVzXCJdKCl9LmJpbmQodGhpcykpLC0xIT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1bmRldGVybWluZWRcIikmJnRoaXMuZWxlbWVudC5vbihcImNoYW5nZWQuanN0cmVlIHVuY2hlY2tfbm9kZS5qc3RyZWUgY2hlY2tfbm9kZS5qc3RyZWUgdW5jaGVja19hbGwuanN0cmVlIGNoZWNrX2FsbC5qc3RyZWUgbW92ZV9ub2RlLmpzdHJlZSBjb3B5X25vZGUuanN0cmVlIHJlZHJhdy5qc3RyZWUgb3Blbl9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jaGVja2JveC51dG8mJmNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byksdGhpcy5fZGF0YS5jaGVja2JveC51dG89c2V0VGltZW91dCh0aGlzLl91bmRldGVybWluZWQuYmluZCh0aGlzKSw1MCl9LmJpbmQodGhpcykpLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8dGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyPWlbdC5wYXJlbnRdLHM9dC5ub2RlcyxhLG4sYT0wLG49cy5sZW5ndGg7YTxuO2ErKylpW3NbYV1dLnN0YXRlLmNoZWNrZWQ9aVtzW2FdXS5zdGF0ZS5jaGVja2VkfHxpW3NbYV1dLm9yaWdpbmFsJiZpW3NbYV1dLm9yaWdpbmFsLnN0YXRlJiZpW3NbYV1dLm9yaWdpbmFsLnN0YXRlLmNoZWNrZWQsaVtzW2FdXS5zdGF0ZS5jaGVja2VkJiZ0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2goc1thXSl9LmJpbmQodGhpcykpLC0xPT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1cFwiKSYmLTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcImRvd25cIil8fHRoaXMuZWxlbWVudC5vbihcIm1vZGVsLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyPWlbdC5wYXJlbnRdLHM9dC5ub2RlcyxhPVtdLG4sbyxkLGMsbCxoLHQ9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLF89dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uO2lmKC0xIT09dC5pbmRleE9mKFwiZG93blwiKSlpZihyLnN0YXRlW18/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKG89MCxkPXMubGVuZ3RoO288ZDtvKyspaVtzW29dXS5zdGF0ZVtfP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITA7dGhpcy5fZGF0YVtfP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ9dGhpcy5fZGF0YVtfP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQuY29uY2F0KHMpfWVsc2UgZm9yKG89MCxkPXMubGVuZ3RoO288ZDtvKyspaWYoaVtzW29dXS5zdGF0ZVtfP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl0pe2ZvcihjPTAsbD1pW3Nbb11dLmNoaWxkcmVuX2QubGVuZ3RoO2M8bDtjKyspaVtpW3Nbb11dLmNoaWxkcmVuX2RbY11dLnN0YXRlW18/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMDt0aGlzLl9kYXRhW18/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD10aGlzLl9kYXRhW18/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5jb25jYXQoaVtzW29dXS5jaGlsZHJlbl9kKX1pZigtMSE9PXQuaW5kZXhPZihcInVwXCIpKXtmb3Iobz0wLGQ9ci5jaGlsZHJlbl9kLmxlbmd0aDtvPGQ7bysrKWlbci5jaGlsZHJlbl9kW29dXS5jaGlsZHJlbi5sZW5ndGh8fGEucHVzaChpW3IuY2hpbGRyZW5fZFtvXV0ucGFyZW50KTtmb3IoYz0wLGw9KGE9RS52YWthdGEuYXJyYXlfdW5pcXVlKGEpKS5sZW5ndGg7YzxsO2MrKyl7cj1pW2FbY11dO3doaWxlKHImJnIuaWQhPT1FLmpzdHJlZS5yb290KXtmb3Iobz1uPTAsZD1yLmNoaWxkcmVuLmxlbmd0aDtvPGQ7bysrKW4rPWlbci5jaGlsZHJlbltvXV0uc3RhdGVbXz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKG4hPT1kKWJyZWFrO3Iuc3RhdGVbXz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLHRoaXMuX2RhdGFbXz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLnB1c2goci5pZCksKGg9dGhpcy5nZXRfbm9kZShyLCEwKSkmJmgubGVuZ3RoJiZoLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYWRkQ2xhc3MoXz9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxyPXRoaXMuZ2V0X25vZGUoci5wYXJlbnQpfX19dGhpcy5fZGF0YVtfP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ9RS52YWthdGEuYXJyYXlfdW5pcXVlKHRoaXMuX2RhdGFbXz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkKX0uYmluZCh0aGlzKSkub24odGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP1wic2VsZWN0X25vZGUuanN0cmVlXCI6XCJjaGVja19ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPXQubm9kZSxzPXRoaXMuX21vZGVsLmRhdGEsYT10aGlzLmdldF9ub2RlKHIucGFyZW50KSxuLG8sZCxjLHQ9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGw9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLGg9e30sXz10aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZDtmb3Iobj0wLG89Xy5sZW5ndGg7bjxvO24rKyloW19bbl1dPSEwO2lmKC0xIT09dC5pbmRleE9mKFwiZG93blwiKSlmb3IodmFyIGc9dGhpcy5fY2FzY2FkZV9uZXdfY2hlY2tlZF9zdGF0ZShyLmlkLCEwKSx1PXIuY2hpbGRyZW5fZC5jb25jYXQoci5pZCksbj0wLG89dS5sZW5ndGg7bjxvO24rKyktMTxnLmluZGV4T2YodVtuXSk/aFt1W25dXT0hMDpkZWxldGUgaFt1W25dXTtpZigtMSE9PXQuaW5kZXhPZihcInVwXCIpKXdoaWxlKGEmJmEuaWQhPT1FLmpzdHJlZS5yb290KXtmb3Iobj1kPTAsbz1hLmNoaWxkcmVuLmxlbmd0aDtuPG87bisrKWQrPXNbYS5jaGlsZHJlbltuXV0uc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKGQhPT1vKWJyZWFrO2Euc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLGhbYS5pZF09ITAsKGM9dGhpcy5nZXRfbm9kZShhLCEwKSkmJmMubGVuZ3RoJiZjLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYWRkQ2xhc3MobD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxhPXRoaXMuZ2V0X25vZGUoYS5wYXJlbnQpfWZvcihuIGluIF89W10saCloLmhhc093blByb3BlcnR5KG4pJiZfLnB1c2gobik7dGhpcy5fZGF0YVtsP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ9X30uYmluZCh0aGlzKSkub24odGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP1wiZGVzZWxlY3RfYWxsLmpzdHJlZVwiOlwidW5jaGVja19hbGwuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9dGhpcy5nZXRfbm9kZShFLmpzdHJlZS5yb290KSxyPXRoaXMuX21vZGVsLmRhdGEscyxhLG4scz0wLGE9aS5jaGlsZHJlbl9kLmxlbmd0aDtzPGE7cysrKShuPXJbaS5jaGlsZHJlbl9kW3NdXSkmJm4ub3JpZ2luYWwmJm4ub3JpZ2luYWwuc3RhdGUmJm4ub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkJiYobi5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQ9ITEpfS5iaW5kKHRoaXMpKS5vbih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/XCJkZXNlbGVjdF9ub2RlLmpzdHJlZVwiOlwidW5jaGVja19ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPXQubm9kZSxzPXRoaXMuZ2V0X25vZGUociwhMCksYSxuLG8sZD10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUsYz10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sdD10aGlzLl9kYXRhW2M/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxsPXt9LGg9W10sXz1yLmNoaWxkcmVuX2QuY29uY2F0KHIuaWQpLGcsdDtpZigtMSE9PWQuaW5kZXhPZihcImRvd25cIikmJihnPXRoaXMuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUoci5pZCwhMSksdD1FLnZha2F0YS5hcnJheV9maWx0ZXIodCxmdW5jdGlvbihlKXtyZXR1cm4tMT09PV8uaW5kZXhPZihlKXx8LTE8Zy5pbmRleE9mKGUpfSkpLC0xIT09ZC5pbmRleE9mKFwidXBcIikmJi0xPT09dC5pbmRleE9mKHIuaWQpKXtmb3IoYT0wLG49ci5wYXJlbnRzLmxlbmd0aDthPG47YSsrKShvPXRoaXMuX21vZGVsLmRhdGFbci5wYXJlbnRzW2FdXSkuc3RhdGVbYz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLG8mJm8ub3JpZ2luYWwmJm8ub3JpZ2luYWwuc3RhdGUmJm8ub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkJiYoby5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQ9ITEpLChvPXRoaXMuZ2V0X25vZGUoci5wYXJlbnRzW2FdLCEwKSkmJm8ubGVuZ3RoJiZvLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkucmVtb3ZlQ2xhc3MoYz9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKTt0PUUudmFrYXRhLmFycmF5X2ZpbHRlcih0LGZ1bmN0aW9uKGUpe3JldHVybi0xPT09ci5wYXJlbnRzLmluZGV4T2YoZSl9KX10aGlzLl9kYXRhW2M/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD10fS5iaW5kKHRoaXMpKSwtMSE9PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidXBcIikmJnRoaXMuZWxlbWVudC5vbihcImRlbGV0ZV9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5nZXRfbm9kZSh0LnBhcmVudCkscj10aGlzLl9tb2RlbC5kYXRhLHMsYSxuLG8sZD10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb247d2hpbGUoaSYmaS5pZCE9PUUuanN0cmVlLnJvb3QmJiFpLnN0YXRlW2Q/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKHM9bj0wLGE9aS5jaGlsZHJlbi5sZW5ndGg7czxhO3MrKyluKz1yW2kuY2hpbGRyZW5bc11dLnN0YXRlW2Q/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZighKDA8YSYmbj09PWEpKWJyZWFrO2kuc3RhdGVbZD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLHRoaXMuX2RhdGFbZD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLnB1c2goaS5pZCksKG89dGhpcy5nZXRfbm9kZShpLCEwKSkmJm8ubGVuZ3RoJiZvLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYWRkQ2xhc3MoZD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxpPXRoaXMuZ2V0X25vZGUoaS5wYXJlbnQpfX0uYmluZCh0aGlzKSkub24oXCJtb3ZlX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt2YXIgaT10LmlzX211bHRpLHI9dC5vbGRfcGFyZW50LHQ9dGhpcy5nZXRfbm9kZSh0LnBhcmVudCkscz10aGlzLl9tb2RlbC5kYXRhLGEsbixvLGQsYyxsPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjtpZighaSl7YT10aGlzLmdldF9ub2RlKHIpO3doaWxlKGEmJmEuaWQhPT1FLmpzdHJlZS5yb290JiYhYS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl0pe2ZvcihvPW49MCxkPWEuY2hpbGRyZW4ubGVuZ3RoO288ZDtvKyspbis9c1thLmNoaWxkcmVuW29dXS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYoISgwPGQmJm49PT1kKSlicmVhazthLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGEuaWQpLChjPXRoaXMuZ2V0X25vZGUoYSwhMCkpJiZjLmxlbmd0aCYmYy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmFkZENsYXNzKGw/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksYT10aGlzLmdldF9ub2RlKGEucGFyZW50KX19YT10O3doaWxlKGEmJmEuaWQhPT1FLmpzdHJlZS5yb290KXtmb3Iobz1uPTAsZD1hLmNoaWxkcmVuLmxlbmd0aDtvPGQ7bysrKW4rPXNbYS5jaGlsZHJlbltvXV0uc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKG49PT1kKWEuc3RhdGVbbD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdfHwoYS5zdGF0ZVtsP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITAsdGhpcy5fZGF0YVtsP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQucHVzaChhLmlkKSwoYz10aGlzLmdldF9ub2RlKGEsITApKSYmYy5sZW5ndGgmJmMuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5hZGRDbGFzcyhsP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpKTtlbHNle2lmKCFhLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSlicmVhazthLnN0YXRlW2w/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMSx0aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD1FLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhW2w/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxhLmlkKSwoYz10aGlzLmdldF9ub2RlKGEsITApKSYmYy5sZW5ndGgmJmMuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhsP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpfWE9dGhpcy5nZXRfbm9kZShhLnBhcmVudCl9fS5iaW5kKHRoaXMpKX0sdGhpcy5nZXRfdW5kZXRlcm1pbmVkPWZ1bmN0aW9uKGUpe2lmKC0xPT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1bmRldGVybWluZWRcIikpcmV0dXJuW107Zm9yKHZhciBpLHIscyxhLG49e30sbz10aGlzLl9tb2RlbC5kYXRhLHQ9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLGQ9dGhpcy5fZGF0YVt0P1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQsYz1bXSxsPXRoaXMsaD1bXSxpPTAscj1kLmxlbmd0aDtpPHI7aSsrKWlmKG9bZFtpXV0mJm9bZFtpXV0ucGFyZW50cylmb3Iocz0wLGE9b1tkW2ldXS5wYXJlbnRzLmxlbmd0aDtzPGE7cysrKXtpZihuW29bZFtpXV0ucGFyZW50c1tzXV0hPT1QKWJyZWFrO29bZFtpXV0ucGFyZW50c1tzXSE9PUUuanN0cmVlLnJvb3QmJihuW29bZFtpXV0ucGFyZW50c1tzXV09ITAsYy5wdXNoKG9bZFtpXV0ucGFyZW50c1tzXSkpfWZvcih0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtY2xvc2VkXCIpLm5vdChcIjpoYXMoLmpzdHJlZS1jaGlsZHJlbilcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPWwuZ2V0X25vZGUodGhpcyksdDtpZihlKWlmKGUuc3RhdGUubG9hZGVkKXtmb3IoaT0wLHI9ZS5jaGlsZHJlbl9kLmxlbmd0aDtpPHI7aSsrKWlmKCEodD1vW2UuY2hpbGRyZW5fZFtpXV0pLnN0YXRlLmxvYWRlZCYmdC5vcmlnaW5hbCYmdC5vcmlnaW5hbC5zdGF0ZSYmdC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJiEwPT09dC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQpZm9yKG5bdC5pZF09PT1QJiZ0LmlkIT09RS5qc3RyZWUucm9vdCYmKG5bdC5pZF09ITAsYy5wdXNoKHQuaWQpKSxzPTAsYT10LnBhcmVudHMubGVuZ3RoO3M8YTtzKyspblt0LnBhcmVudHNbc11dPT09UCYmdC5wYXJlbnRzW3NdIT09RS5qc3RyZWUucm9vdCYmKG5bdC5wYXJlbnRzW3NdXT0hMCxjLnB1c2godC5wYXJlbnRzW3NdKSl9ZWxzZSBpZihlLm9yaWdpbmFsJiZlLm9yaWdpbmFsLnN0YXRlJiZlLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmITA9PT1lLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZClmb3IobltlLmlkXT09PVAmJmUuaWQhPT1FLmpzdHJlZS5yb290JiYobltlLmlkXT0hMCxjLnB1c2goZS5pZCkpLHM9MCxhPWUucGFyZW50cy5sZW5ndGg7czxhO3MrKyluW2UucGFyZW50c1tzXV09PT1QJiZlLnBhcmVudHNbc10hPT1FLmpzdHJlZS5yb290JiYobltlLnBhcmVudHNbc11dPSEwLGMucHVzaChlLnBhcmVudHNbc10pKX0pLGk9MCxyPWMubGVuZ3RoO2k8cjtpKyspb1tjW2ldXS5zdGF0ZVt0P1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fGgucHVzaChlP29bY1tpXV06Y1tpXSk7cmV0dXJuIGh9LHRoaXMuX3VuZGV0ZXJtaW5lZD1mdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLmVsZW1lbnQpe3ZhciBlPXRoaXMuZ2V0X3VuZGV0ZXJtaW5lZCghMSksdCxpLHI7Zm9yKHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS11bmRldGVybWluZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtdW5kZXRlcm1pbmVkXCIpLHQ9MCxpPWUubGVuZ3RoO3Q8aTt0KyspKHI9dGhpcy5nZXRfbm9kZShlW3RdLCEwKSkmJnIubGVuZ3RoJiZyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLWNoZWNrYm94XCIpLmFkZENsYXNzKFwianN0cmVlLXVuZGV0ZXJtaW5lZFwiKX19LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7aWYoZT1kLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7Zm9yKHZhciBzLGEsbj1udWxsLG89bnVsbCxzPTAsYT1lLmNoaWxkTm9kZXMubGVuZ3RoO3M8YTtzKyspaWYoZS5jaGlsZE5vZGVzW3NdJiZlLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lJiYtMSE9PWUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikpe249ZS5jaGlsZE5vZGVzW3NdO2JyZWFrfW4mJighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiZ0aGlzLl9tb2RlbC5kYXRhW2UuaWRdLnN0YXRlLmNoZWNrZWQmJihuLmNsYXNzTmFtZSs9XCIganN0cmVlLWNoZWNrZWRcIiksbz1sLmNsb25lTm9kZSghMSksdGhpcy5fbW9kZWwuZGF0YVtlLmlkXS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCYmKG8uY2xhc3NOYW1lKz1cIiBqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksbi5pbnNlcnRCZWZvcmUobyxuLmNoaWxkTm9kZXNbMF0pKX1yZXR1cm4gaXx8LTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVuZGV0ZXJtaW5lZFwiKXx8KHRoaXMuX2RhdGEuY2hlY2tib3gudXRvJiZjbGVhclRpbWVvdXQodGhpcy5fZGF0YS5jaGVja2JveC51dG8pLHRoaXMuX2RhdGEuY2hlY2tib3gudXRvPXNldFRpbWVvdXQodGhpcy5fdW5kZXRlcm1pbmVkLmJpbmQodGhpcyksNTApKSxlfSx0aGlzLnNob3dfY2hlY2tib3hlcz1mdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuY2hlY2tib3hlcz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1jaGVja2JveGVzXCIpfSx0aGlzLmhpZGVfY2hlY2tib3hlcz1mdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuY2hlY2tib3hlcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1jaGVja2JveGVzXCIpfSx0aGlzLnRvZ2dsZV9jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzP3RoaXMuaGlkZV9jaGVja2JveGVzKCk6dGhpcy5zaG93X2NoZWNrYm94ZXMoKX0sdGhpcy5pc191bmRldGVybWluZWQ9ZnVuY3Rpb24oZSl7ZT10aGlzLmdldF9ub2RlKGUpO3ZhciB0PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSxpLHIscz10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sYT10aGlzLl9kYXRhW3M/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxuPXRoaXMuX21vZGVsLmRhdGE7aWYoIWV8fCEwPT09ZS5zdGF0ZVtzP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fC0xPT09dC5pbmRleE9mKFwidW5kZXRlcm1pbmVkXCIpfHwtMT09PXQuaW5kZXhPZihcImRvd25cIikmJi0xPT09dC5pbmRleE9mKFwidXBcIikpcmV0dXJuITE7aWYoIWUuc3RhdGUubG9hZGVkJiYhMD09PWUub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKXJldHVybiEwO2ZvcihpPTAscj1lLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspaWYoLTEhPT1FLmluQXJyYXkoZS5jaGlsZHJlbl9kW2ldLGEpfHwhbltlLmNoaWxkcmVuX2RbaV1dLnN0YXRlLmxvYWRlZCYmbltlLmNoaWxkcmVuX2RbaV1dLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZClyZXR1cm4hMDtyZXR1cm4hMX0sdGhpcy5kaXNhYmxlX2NoZWNrYm94PWZ1bmN0aW9uKGUpe3ZhciB0LGkscjtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5kaXNhYmxlX2NoZWNrYm94KGVbdF0pO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7cj10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWR8fChlLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkPSEwLHImJnIubGVuZ3RoJiZyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLWNoZWNrYm94XCIpLmFkZENsYXNzKFwianN0cmVlLWNoZWNrYm94LWRpc2FibGVkXCIpLHRoaXMudHJpZ2dlcihcImRpc2FibGVfY2hlY2tib3hcIix7bm9kZTplfSkpfSx0aGlzLmVuYWJsZV9jaGVja2JveD1mdW5jdGlvbihlKXt2YXIgdCxpLHI7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2Zvcih0PTAsaT0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PGk7dCsrKXRoaXMuZW5hYmxlX2NoZWNrYm94KGVbdF0pO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PUUuanN0cmVlLnJvb3QpcmV0dXJuITE7cj10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQmJihlLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkPSExLHImJnIubGVuZ3RoJiZyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLWNoZWNrYm94XCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNoZWNrYm94LWRpc2FibGVkXCIpLHRoaXMudHJpZ2dlcihcImVuYWJsZV9jaGVja2JveFwiLHtub2RlOmV9KSl9LHRoaXMuYWN0aXZhdGVfbm9kZT1mdW5jdGlvbihlLHQpe3JldHVybiFFKHQudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKSYmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiYmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gud2hvbGVfbm9kZXx8RSh0LnRhcmdldCkuaGFzQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3hcIikpJiYodC5jdHJsS2V5PSEwKSx0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb258fCF0aGlzLnNldHRpbmdzLmNoZWNrYm94Lndob2xlX25vZGUmJiFFKHQudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveFwiKT9kLmFjdGl2YXRlX25vZGUuY2FsbCh0aGlzLGUsdCk6IXRoaXMuaXNfZGlzYWJsZWQoZSkmJih0aGlzLmlzX2NoZWNrZWQoZSk/dGhpcy51bmNoZWNrX25vZGUoZSx0KTp0aGlzLmNoZWNrX25vZGUoZSx0KSx2b2lkIHRoaXMudHJpZ2dlcihcImFjdGl2YXRlX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGUpfSkpKX0sdGhpcy5kZWxldGVfbm9kZT1mdW5jdGlvbihlKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb258fEUudmFrYXRhLmlzX2FycmF5KGUpKXJldHVybiBkLmRlbGV0ZV9ub2RlLmNhbGwodGhpcyxlKTt2YXIgdCxpLHIscz0hMTtpZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2ZvcigodD1lLmNoaWxkcmVuX2QuY29uY2F0KFtdKSkucHVzaChlLmlkKSxpPTAscj10Lmxlbmd0aDtpPHI7aSsrKWlmKHRoaXMuX21vZGVsLmRhdGFbdFtpXV0uc3RhdGUuY2hlY2tlZCl7cz0hMDticmVha31yZXR1cm4gcyYmKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9RS52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1FLmluQXJyYXkoZSx0KX0pKSxkLmRlbGV0ZV9ub2RlLmNhbGwodGhpcyxlKX0sdGhpcy5fY2FzY2FkZV9uZXdfY2hlY2tlZF9zdGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMscj10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24scz10aGlzLl9tb2RlbC5kYXRhW2VdLGE9W10sbj1bXSxvLGQsYztpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlX3RvX2Rpc2FibGVkJiZzLnN0YXRlLmRpc2FibGVkfHwhdGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlX3RvX2hpZGRlbiYmcy5zdGF0ZS5oaWRkZW4pYz10aGlzLmdldF9jaGVja2VkX2Rlc2NlbmRhbnRzKGUpLHMuc3RhdGVbcj9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdJiZjLnB1c2gocy5pZCksYT1hLmNvbmNhdChjKTtlbHNle2lmKHMuY2hpbGRyZW4pZm9yKG89MCxkPXMuY2hpbGRyZW4ubGVuZ3RoO288ZDtvKyspe3ZhciBsPXMuY2hpbGRyZW5bb10sYz1pLl9jYXNjYWRlX25ld19jaGVja2VkX3N0YXRlKGwsdCksYT1hLmNvbmNhdChjKTstMTxjLmluZGV4T2YobCkmJm4ucHVzaChsKX12YXIgaD1pLmdldF9ub2RlKHMsITApLGU9MDxuLmxlbmd0aCYmbi5sZW5ndGg8cy5jaGlsZHJlbi5sZW5ndGg7cy5vcmlnaW5hbCYmcy5vcmlnaW5hbC5zdGF0ZSYmcy5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihzLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD1lKSwhZSYmdCYmbi5sZW5ndGg9PT1zLmNoaWxkcmVuLmxlbmd0aD8ocy5zdGF0ZVtyP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09dCxhLnB1c2gocy5pZCksaC5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmFkZENsYXNzKHI/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIikpOihzLnN0YXRlW3I/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMSxoLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkucmVtb3ZlQ2xhc3Mocj9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSl9cmV0dXJuIGF9LHRoaXMuZ2V0X2NoZWNrZWRfZGVzY2VuZGFudHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXQuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixlPXQuX21vZGVsLmRhdGFbZV07cmV0dXJuIEUudmFrYXRhLmFycmF5X2ZpbHRlcihlLmNoaWxkcmVuX2QsZnVuY3Rpb24oZSl7cmV0dXJuIHQuX21vZGVsLmRhdGFbZV0uc3RhdGVbaT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdfSl9LHRoaXMuY2hlY2tfbm9kZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5zZWxlY3Rfbm9kZShlLCExLCEwLHQpO3ZhciBpLHIscyxhO2lmKEUudmFrYXRhLmlzX2FycmF5KGUpKXtmb3Iocj0wLHM9KGU9ZS5zbGljZSgpKS5sZW5ndGg7cjxzO3IrKyl0aGlzLmNoZWNrX25vZGUoZVtyXSx0KTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO2k9dGhpcy5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLmNoZWNrZWR8fChlLnN0YXRlLmNoZWNrZWQ9ITAsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5wdXNoKGUuaWQpLGkmJmkubGVuZ3RoJiZpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJjaGVja19ub2RlXCIse25vZGU6ZSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGV2ZW50OnR9KSl9LHRoaXMudW5jaGVja19ub2RlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLmRlc2VsZWN0X25vZGUoZSwhMSx0KTt2YXIgaSxyLHM7aWYoRS52YWthdGEuaXNfYXJyYXkoZSkpe2ZvcihpPTAscj0oZT1lLnNsaWNlKCkpLmxlbmd0aDtpPHI7aSsrKXRoaXMudW5jaGVja19ub2RlKGVbaV0sdCk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09RS5qc3RyZWUucm9vdClyZXR1cm4hMTtzPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5jaGVja2VkJiYoZS5zdGF0ZS5jaGVja2VkPSExLHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9RS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0odGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxlLmlkKSxzLmxlbmd0aCYmcy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNoZWNrZWRcIiksdGhpcy50cmlnZ2VyKFwidW5jaGVja19ub2RlXCIse25vZGU6ZSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGV2ZW50OnR9KSl9LHRoaXMuY2hlY2tfYWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLnNlbGVjdF9hbGwoKTt2YXIgZT10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmNvbmNhdChbXSksdCxpO2Zvcih0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPXRoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZC5jb25jYXQoKSx0PTAsaT10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmxlbmd0aDt0PGk7dCsrKXRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFt0XV0mJih0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbdF1dLnN0YXRlLmNoZWNrZWQ9ITApO3RoaXMucmVkcmF3KCEwKSx0aGlzLnRyaWdnZXIoXCJjaGVja19hbGxcIix7c2VsZWN0ZWQ6dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZH0pfSx0aGlzLnVuY2hlY2tfYWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLmRlc2VsZWN0X2FsbCgpO2Zvcih2YXIgZT10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmNvbmNhdChbXSksdCxpLHQ9MCxpPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQubGVuZ3RoO3Q8aTt0KyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW3RdXSYmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFt0XV0uc3RhdGUuY2hlY2tlZD0hMSk7dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1bXSx0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtY2hlY2tlZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jaGVja2VkXCIpLHRoaXMudHJpZ2dlcihcInVuY2hlY2tfYWxsXCIse3NlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsbm9kZTplfSl9LHRoaXMuaXNfY2hlY2tlZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP3RoaXMuaXNfc2VsZWN0ZWQoZSk6ISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1FLmpzdHJlZS5yb290KSYmZS5zdGF0ZS5jaGVja2VkfSx0aGlzLmdldF9jaGVja2VkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/dGhpcy5nZXRfc2VsZWN0ZWQoZSk6ZT9FLm1hcCh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldF9ub2RlKGUpfS5iaW5kKHRoaXMpKTp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnNsaWNlKCl9LHRoaXMuZ2V0X3RvcF9jaGVja2VkPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5nZXRfdG9wX3NlbGVjdGVkKGUpO2Zvcih2YXIgdD10aGlzLmdldF9jaGVja2VkKCEwKSxpPXt9LHIscyxhLG4scj0wLHM9dC5sZW5ndGg7cjxzO3IrKylpW3Rbcl0uaWRdPXRbcl07Zm9yKHI9MCxzPXQubGVuZ3RoO3I8cztyKyspZm9yKGE9MCxuPXRbcl0uY2hpbGRyZW5fZC5sZW5ndGg7YTxuO2ErKylpW3Rbcl0uY2hpbGRyZW5fZFthXV0mJmRlbGV0ZSBpW3Rbcl0uY2hpbGRyZW5fZFthXV07Zm9yKHIgaW4gdD1bXSxpKWkuaGFzT3duUHJvcGVydHkocikmJnQucHVzaChyKTtyZXR1cm4gZT9FLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldF9ub2RlKGUpfS5iaW5kKHRoaXMpKTp0fSx0aGlzLmdldF9ib3R0b21fY2hlY2tlZD1mdW5jdGlvbihlKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZ2V0X2JvdHRvbV9zZWxlY3RlZChlKTtmb3IodmFyIHQ9dGhpcy5nZXRfY2hlY2tlZCghMCksaT1bXSxyLHMscj0wLHM9dC5sZW5ndGg7cjxzO3IrKyl0W3JdLmNoaWxkcmVuLmxlbmd0aHx8aS5wdXNoKHRbcl0uaWQpO3JldHVybiBlP0UubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LmJpbmQodGhpcykpOml9LHRoaXMubG9hZF9ub2RlPWZ1bmN0aW9uKGUsdCl7dmFyIGkscixzLGEsbixvO2lmKCFFLnZha2F0YS5pc19hcnJheShlKSYmIXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiYmKG89dGhpcy5nZXRfbm9kZShlKSkmJm8uc3RhdGUubG9hZGVkKWZvcihpPTAscj1vLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspdGhpcy5fbW9kZWwuZGF0YVtvLmNoaWxkcmVuX2RbaV1dLnN0YXRlLmNoZWNrZWQmJih0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPUUudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsby5jaGlsZHJlbl9kW2ldKSk7cmV0dXJuIGQubG9hZF9ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdGhpcy5nZXRfc3RhdGU9ZnVuY3Rpb24oKXt2YXIgZT1kLmdldF9zdGF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8KGUuY2hlY2tib3g9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5zbGljZSgpKSxlfSx0aGlzLnNldF9zdGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBpPWQuc2V0X3N0YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxyO3JldHVybiBpJiZlLmNoZWNrYm94Pyh0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb258fCh0aGlzLnVuY2hlY2tfYWxsKCkscj10aGlzLEUuZWFjaChlLmNoZWNrYm94LGZ1bmN0aW9uKGUsdCl7ci5jaGVja19ub2RlKHQpfSkpLGRlbGV0ZSBlLmNoZWNrYm94LHRoaXMuc2V0X3N0YXRlKGUsdCksITEpOml9LHRoaXMucmVmcmVzaD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJih0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPVtdKSxkLnJlZnJlc2guYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sRS5qc3RyZWUuZGVmYXVsdHMuY29uZGl0aW9uYWxzZWxlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sRS5qc3RyZWUucGx1Z2lucy5jb25kaXRpb25hbHNlbGVjdD1mdW5jdGlvbihlLGkpe3RoaXMuYWN0aXZhdGVfbm9kZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuc2V0dGluZ3MuY29uZGl0aW9uYWxzZWxlY3QuY2FsbCh0aGlzLHRoaXMuZ2V0X25vZGUoZSksdCkpcmV0dXJuIGkuYWN0aXZhdGVfbm9kZS5jYWxsKHRoaXMsZSx0KX19LEUuanN0cmVlLmRlZmF1bHRzLmNvbnRleHRtZW51PXtzZWxlY3Rfbm9kZTohMCxzaG93X2F0X25vZGU6ITAsaXRlbXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm57Y3JlYXRlOntzZXBhcmF0b3JfYmVmb3JlOiExLHNlcGFyYXRvcl9hZnRlcjohMCxfZGlzYWJsZWQ6ITEsbGFiZWw6XCJDcmVhdGVcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIGk9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPWkuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO2kuY3JlYXRlX25vZGUoZSx7fSxcImxhc3RcIixmdW5jdGlvbih0KXt0cnl7aS5lZGl0KHQpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmVkaXQodCl9LDApfX0pfX0scmVuYW1lOntzZXBhcmF0b3JfYmVmb3JlOiExLHNlcGFyYXRvcl9hZnRlcjohMSxfZGlzYWJsZWQ6ITEsbGFiZWw6XCJSZW5hbWVcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPXQuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO3QuZWRpdChlKX19LHJlbW92ZTp7c2VwYXJhdG9yX2JlZm9yZTohMSxpY29uOiExLHNlcGFyYXRvcl9hZnRlcjohMSxfZGlzYWJsZWQ6ITEsbGFiZWw6XCJEZWxldGVcIixhY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9RS5qc3RyZWUucmVmZXJlbmNlKGUucmVmZXJlbmNlKSxlPXQuZ2V0X25vZGUoZS5yZWZlcmVuY2UpO3QuaXNfc2VsZWN0ZWQoZSk/dC5kZWxldGVfbm9kZSh0LmdldF9zZWxlY3RlZCgpKTp0LmRlbGV0ZV9ub2RlKGUpfX0sY2NwOntzZXBhcmF0b3JfYmVmb3JlOiEwLGljb246ITEsc2VwYXJhdG9yX2FmdGVyOiExLGxhYmVsOlwiRWRpdFwiLGFjdGlvbjohMSxzdWJtZW51OntjdXQ6e3NlcGFyYXRvcl9iZWZvcmU6ITEsc2VwYXJhdG9yX2FmdGVyOiExLGxhYmVsOlwiQ3V0XCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PUUuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksZT10LmdldF9ub2RlKGUucmVmZXJlbmNlKTt0LmlzX3NlbGVjdGVkKGUpP3QuY3V0KHQuZ2V0X3RvcF9zZWxlY3RlZCgpKTp0LmN1dChlKX19LGNvcHk6e3NlcGFyYXRvcl9iZWZvcmU6ITEsaWNvbjohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJDb3B5XCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PUUuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksZT10LmdldF9ub2RlKGUucmVmZXJlbmNlKTt0LmlzX3NlbGVjdGVkKGUpP3QuY29weSh0LmdldF90b3Bfc2VsZWN0ZWQoKSk6dC5jb3B5KGUpfX0scGFzdGU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsaWNvbjohMSxfZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIUUuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSkuY2FuX3Bhc3RlKCl9LHNlcGFyYXRvcl9hZnRlcjohMSxsYWJlbDpcIlBhc3RlXCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PUUuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksZT10LmdldF9ub2RlKGUucmVmZXJlbmNlKTt0LnBhc3RlKGUpfX19fX19fSxFLmpzdHJlZS5wbHVnaW5zLmNvbnRleHRtZW51PWZ1bmN0aW9uKGUsYSl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7YS5iaW5kLmNhbGwodGhpcyk7dmFyIGk9MCxyPW51bGwsdCxzO3RoaXMuZWxlbWVudC5vbihcImluaXQuanN0cmVlIGxvYWRpbmcuanN0cmVlIHJlYWR5LmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtY29udGV4dG1lbnVcIil9LmJpbmQodGhpcykpLm9uKFwiY29udGV4dG1lbnUuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUsdCl7XCJpbnB1dFwiIT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGk9ZS5jdHJsS2V5PytuZXcgRGF0ZTowLCh0fHxyKSYmKGk9K25ldyBEYXRlKzFlNCksciYmY2xlYXJUaW1lb3V0KHIpLHRoaXMuaXNfbG9hZGluZyhlLmN1cnJlbnRUYXJnZXQpfHx0aGlzLnNob3dfY29udGV4dG1lbnUoZS5jdXJyZW50VGFyZ2V0LGUucGFnZVgsZS5wYWdlWSxlKSl9LmJpbmQodGhpcykpLm9uKFwiY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe3RoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZSYmKCFpfHwyNTA8K25ldyBEYXRlLWkpJiZFLnZha2F0YS5jb250ZXh0LmhpZGUoKSxpPTB9LmJpbmQodGhpcykpLm9uKFwidG91Y2hzdGFydC5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oZSl7ZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKHQ9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgscz1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSxyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtFKGUuY3VycmVudFRhcmdldCkudHJpZ2dlcihcImNvbnRleHRtZW51XCIsITApfSw3NTApKX0pLm9uKFwidG91Y2htb3ZlLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlKXtyJiZlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdJiYoMTA8TWF0aC5hYnModC1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCl8fDEwPE1hdGguYWJzKHMtZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpKSYmKGNsZWFyVGltZW91dChyKSxFLnZha2F0YS5jb250ZXh0LmhpZGUoKSl9KS5vbihcInRvdWNoZW5kLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlKXtyJiZjbGVhclRpbWVvdXQocil9KSxFKGIpLm9uKFwiY29udGV4dF9oaWRlLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZT0hMSxFKHQucmVmZXJlbmNlKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jb250ZXh0XCIpfS5iaW5kKHRoaXMpKX0sdGhpcy50ZWFyZG93bj1mdW5jdGlvbigpe3RoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZSYmRS52YWthdGEuY29udGV4dC5oaWRlKCksRShiKS5vZmYoXCJjb250ZXh0X2hpZGUudmFrYXRhLmpzdHJlZVwiKSxhLnRlYXJkb3duLmNhbGwodGhpcyl9LHRoaXMuc2hvd19jb250ZXh0bWVudT1mdW5jdGlvbih0LGkscixlKXtpZighKHQ9dGhpcy5nZXRfbm9kZSh0KSl8fHQuaWQ9PT1FLmpzdHJlZS5yb290KXJldHVybiExO3ZhciBzPXRoaXMuc2V0dGluZ3MuY29udGV4dG1lbnUsYSxuPXRoaXMuZ2V0X25vZGUodCwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKSxvPSExLGQ9ITE7IXMuc2hvd19hdF9ub2RlJiZpIT09UCYmciE9PVB8fChvPW4ub2Zmc2V0KCksaT1vLmxlZnQscj1vLnRvcCt0aGlzLl9kYXRhLmNvcmUubGlfaGVpZ2h0KSx0aGlzLnNldHRpbmdzLmNvbnRleHRtZW51LnNlbGVjdF9ub2RlJiYhdGhpcy5pc19zZWxlY3RlZCh0KSYmdGhpcy5hY3RpdmF0ZV9ub2RlKHQsZSksZD1zLml0ZW1zLEUudmFrYXRhLmlzX2Z1bmN0aW9uKGQpJiYoZD1kLmNhbGwodGhpcyx0LGZ1bmN0aW9uKGUpe3RoaXMuX3Nob3dfY29udGV4dG1lbnUodCxpLHIsZSl9LmJpbmQodGhpcykpKSxFLmlzUGxhaW5PYmplY3QoZCkmJnRoaXMuX3Nob3dfY29udGV4dG1lbnUodCxpLHIsZCl9LHRoaXMuX3Nob3dfY29udGV4dG1lbnU9ZnVuY3Rpb24oZSx0LGkscil7dmFyIHMsYT10aGlzLmdldF9ub2RlKGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIik7RShiKS5vbmUoXCJjb250ZXh0X3Nob3cudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9XCJqc3RyZWUtY29udGV4dG1lbnUganN0cmVlLVwiK3RoaXMuZ2V0X3RoZW1lKCkrXCItY29udGV4dG1lbnVcIjtFKHQuZWxlbWVudCkuYWRkQ2xhc3MoaSksYS5hZGRDbGFzcyhcImpzdHJlZS1jb250ZXh0XCIpfS5iaW5kKHRoaXMpKSx0aGlzLl9kYXRhLmNvbnRleHRtZW51LnZpc2libGU9ITAsRS52YWthdGEuY29udGV4dC5zaG93KGEse3g6dCx5Oml9LHIpLHRoaXMudHJpZ2dlcihcInNob3dfY29udGV4dG1lbnVcIix7bm9kZTplLHg6dCx5Oml9KX19LGc9e2VsZW1lbnQ6Xz0hMSxyZWZlcmVuY2U6ITEscG9zaXRpb25feDowLHBvc2l0aW9uX3k6MCxpdGVtczpbXSxodG1sOlwiXCIsaXNfdmlzaWJsZTohMX0sKGg9RSkudmFrYXRhLmNvbnRleHQ9e3NldHRpbmdzOntoaWRlX29ubW91c2VsZWF2ZTowLGljb25zOiEwfSxfdHJpZ2dlcjpmdW5jdGlvbihlKXtoKGIpLnRyaWdnZXJIYW5kbGVyKFwiY29udGV4dF9cIitlK1wiLnZha2F0YVwiLHtyZWZlcmVuY2U6Zy5yZWZlcmVuY2UsZWxlbWVudDpnLmVsZW1lbnQscG9zaXRpb246e3g6Zy5wb3NpdGlvbl94LHk6Zy5wb3NpdGlvbl95fX0pfSxfZXhlY3V0ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCEoZT1nLml0ZW1zW2VdKXx8ZS5fZGlzYWJsZWQmJighaC52YWthdGEuaXNfZnVuY3Rpb24oZS5fZGlzYWJsZWQpfHxlLl9kaXNhYmxlZCh7aXRlbTplLHJlZmVyZW5jZTpnLnJlZmVyZW5jZSxlbGVtZW50OmcuZWxlbWVudH0pKXx8IWUuYWN0aW9uKSYmZS5hY3Rpb24uY2FsbChudWxsLHtpdGVtOmUscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50LHBvc2l0aW9uOnt4OmcucG9zaXRpb25feCx5OmcucG9zaXRpb25feX19KX0sX3BhcnNlOmZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuITE7dHx8KGcuaHRtbD1cIlwiLGcuaXRlbXM9W10pO3ZhciBpPVwiXCIscj0hMSxzO3JldHVybiB0JiYoaSs9XCI8dWw+XCIpLGguZWFjaChlLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIXR8fChnLml0ZW1zLnB1c2godCksIXImJnQuc2VwYXJhdG9yX2JlZm9yZSYmKGkrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhoLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J2NsYXNzPVwidmFrYXRhLWNvbnRleHQtbm8taWNvbnNcIicpK1wiPiYjMTYwOzwvYT48L2xpPlwiKSxyPSExLGkrPVwiPGxpIGNsYXNzPSdcIisodC5fY2xhc3N8fFwiXCIpKyghMD09PXQuX2Rpc2FibGVkfHxoLnZha2F0YS5pc19mdW5jdGlvbih0Ll9kaXNhYmxlZCkmJnQuX2Rpc2FibGVkKHtpdGVtOnQscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50fSk/XCIgdmFrYXRhLWNvbnRleHRtZW51LWRpc2FibGVkIFwiOlwiXCIpK1wiJyBcIisodC5zaG9ydGN1dD9cIiBkYXRhLXNob3J0Y3V0PSdcIit0LnNob3J0Y3V0K1wiJyBcIjpcIlwiKStcIj5cIixpKz1cIjxhIGhyZWY9JyMnIHJlbD0nXCIrKGcuaXRlbXMubGVuZ3RoLTEpK1wiJyBcIisodC50aXRsZT9cInRpdGxlPSdcIit0LnRpdGxlK1wiJ1wiOlwiXCIpK1wiPlwiLGgudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaWNvbnMmJihpKz1cIjxpIFwiLHQuaWNvbiYmKC0xIT09dC5pY29uLmluZGV4T2YoXCIvXCIpfHwtMSE9PXQuaWNvbi5pbmRleE9mKFwiLlwiKT9pKz1cIiBzdHlsZT0nYmFja2dyb3VuZDp1cmwoXFxcIlwiK3QuaWNvbitcIlxcXCIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0JyBcIjppKz1cIiBjbGFzcz0nXCIrdC5pY29uK1wiJyBcIiksaSs9XCI+PC9pPjxzcGFuIGNsYXNzPSd2YWthdGEtY29udGV4dG1lbnUtc2VwJz4mIzE2MDs8L3NwYW4+XCIpLGkrPShoLnZha2F0YS5pc19mdW5jdGlvbih0LmxhYmVsKT90LmxhYmVsKHtpdGVtOmUscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50fSk6dC5sYWJlbCkrKHQuc2hvcnRjdXQ/JyA8c3BhbiBjbGFzcz1cInZha2F0YS1jb250ZXh0bWVudS1zaG9ydGN1dCB2YWthdGEtY29udGV4dG1lbnUtc2hvcnRjdXQtJyt0LnNob3J0Y3V0KydcIj4nKyh0LnNob3J0Y3V0X2xhYmVsfHxcIlwiKStcIjwvc3Bhbj5cIjpcIlwiKStcIjwvYT5cIix0LnN1Ym1lbnUmJihzPWgudmFrYXRhLmNvbnRleHQuX3BhcnNlKHQuc3VibWVudSwhMCkpJiYoaSs9cyksaSs9XCI8L2xpPlwiLHZvaWQodC5zZXBhcmF0b3JfYWZ0ZXImJihpKz1cIjxsaSBjbGFzcz0ndmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yJz48YSBocmVmPScjJyBcIisoaC52YWthdGEuY29udGV4dC5zZXR0aW5ncy5pY29ucz9cIlwiOidjbGFzcz1cInZha2F0YS1jb250ZXh0LW5vLWljb25zXCInKStcIj4mIzE2MDs8L2E+PC9saT5cIixyPSEwKSkpfSksaT1pLnJlcGxhY2UoLzxsaSBjbGFzc1xcPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InXFw+PFxcL2xpXFw+JC8sXCJcIiksdCYmKGkrPVwiPC91bD5cIiksdHx8KGcuaHRtbD1pLGgudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJwYXJzZVwiKSksMTA8aS5sZW5ndGgmJml9LF9zaG93X3N1Ym1lbnU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyLHMsYSxuLG8sZDsoZT1oKGUpKS5sZW5ndGgmJmUuY2hpbGRyZW4oXCJ1bFwiKS5sZW5ndGgmJih0PWUuY2hpbGRyZW4oXCJ1bFwiKSxyPShpPWUub2Zmc2V0KCkubGVmdCkrZS5vdXRlcldpZHRoKCkscz1lLm9mZnNldCgpLnRvcCxhPXQud2lkdGgoKSxuPXQuaGVpZ2h0KCksbz1oKHdpbmRvdykud2lkdGgoKStoKHdpbmRvdykuc2Nyb2xsTGVmdCgpLGQ9aCh3aW5kb3cpLmhlaWdodCgpK2god2luZG93KS5zY3JvbGxUb3AoKSxfP2Vbci0oYSsxMCtlLm91dGVyV2lkdGgoKSk8MD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcInZha2F0YS1jb250ZXh0LWxlZnRcIik6ZVtvPHIrYSYmby1yPGk/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJ2YWthdGEtY29udGV4dC1yaWdodFwiKSxkPHMrbisxMCYmdC5jc3MoXCJib3R0b21cIixcIi0xcHhcIiksZS5oYXNDbGFzcyhcInZha2F0YS1jb250ZXh0LXJpZ2h0XCIpP2k8YSYmdC5jc3MoXCJtYXJnaW4tcmlnaHRcIixpLWEpOm8tcjxhJiZ0LmNzcyhcIm1hcmdpbi1sZWZ0XCIsby1yLWEpLHQuc2hvdygpKX0sc2hvdzpmdW5jdGlvbihlLHQsaSl7dmFyIHIscyxhLG4sbyxkLGMsaSxsPSEwO3N3aXRjaChnLmVsZW1lbnQmJmcuZWxlbWVudC5sZW5ndGgmJmcuZWxlbWVudC53aWR0aChcIlwiKSwhMCl7Y2FzZSF0JiYhZTpyZXR1cm4hMTtjYXNlISF0JiYhIWU6Zy5yZWZlcmVuY2U9ZSxnLnBvc2l0aW9uX3g9dC54LGcucG9zaXRpb25feT10Lnk7YnJlYWs7Y2FzZSF0JiYhIWU6cj0oZy5yZWZlcmVuY2U9ZSkub2Zmc2V0KCksZy5wb3NpdGlvbl94PXIubGVmdCtlLm91dGVySGVpZ2h0KCksZy5wb3NpdGlvbl95PXIudG9wO2JyZWFrO2Nhc2UhIXQmJiFlOmcucG9zaXRpb25feD10LngsZy5wb3NpdGlvbl95PXQueX1lJiYhaSYmaChlKS5kYXRhKFwidmFrYXRhX2NvbnRleHRtZW51XCIpJiYoaT1oKGUpLmRhdGEoXCJ2YWthdGFfY29udGV4dG1lbnVcIikpLGgudmFrYXRhLmNvbnRleHQuX3BhcnNlKGkpJiZnLmVsZW1lbnQuaHRtbChnLmh0bWwpLGcuaXRlbXMubGVuZ3RoJiYoZy5lbGVtZW50LmFwcGVuZFRvKGIuYm9keSkscz1nLmVsZW1lbnQsYT1nLnBvc2l0aW9uX3gsbj1nLnBvc2l0aW9uX3ksbz1zLndpZHRoKCksZD1zLmhlaWdodCgpLGM9aCh3aW5kb3cpLndpZHRoKCkraCh3aW5kb3cpLnNjcm9sbExlZnQoKSxpPWgod2luZG93KS5oZWlnaHQoKStoKHdpbmRvdykuc2Nyb2xsVG9wKCksXyYmKGEtPXMub3V0ZXJXaWR0aCgpLWgoZSkub3V0ZXJXaWR0aCgpKTxoKHdpbmRvdykuc2Nyb2xsTGVmdCgpKzIwJiYoYT1oKHdpbmRvdykuc2Nyb2xsTGVmdCgpKzIwKSxnLmVsZW1lbnQuY3NzKHtsZWZ0OmE9YzxhK28rMjA/Yy0obysyMCk6YSx0b3A6bj1pPG4rZCsyMD9pLShkKzIwKTpufSkuc2hvdygpLmZpbmQoXCJhXCIpLmZpcnN0KCkudHJpZ2dlcihcImZvY3VzXCIpLnBhcmVudCgpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksZy5pc192aXNpYmxlPSEwLGgudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJzaG93XCIpKX0saGlkZTpmdW5jdGlvbigpe2cuaXNfdmlzaWJsZSYmKGcuZWxlbWVudC5oaWRlKCkuZmluZChcInVsXCIpLmhpZGUoKS5lbmQoKS5maW5kKFwiOmZvY3VzXCIpLnRyaWdnZXIoXCJibHVyXCIpLmVuZCgpLmRldGFjaCgpLGcuaXNfdmlzaWJsZT0hMSxoLnZha2F0YS5jb250ZXh0Ll90cmlnZ2VyKFwiaGlkZVwiKSl9fSxoKGZ1bmN0aW9uKCl7Xz1cInJ0bFwiPT09aChiLmJvZHkpLmNzcyhcImRpcmVjdGlvblwiKTt2YXIgaT0hMTtnLmVsZW1lbnQ9aChcIjx1bCBjbGFzcz0ndmFrYXRhLWNvbnRleHQnPjwvdWw+XCIpLGcuZWxlbWVudC5vbihcIm1vdXNlZW50ZXJcIixcImxpXCIsZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxoLmNvbnRhaW5zKHRoaXMsZS5yZWxhdGVkVGFyZ2V0KXx8KGkmJmNsZWFyVGltZW91dChpKSxnLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmVuZCgpLGgodGhpcykuc2libGluZ3MoKS5maW5kKFwidWxcIikuaGlkZSgpLmVuZCgpLmVuZCgpLnBhcmVudHNVbnRpbChcIi52YWthdGEtY29udGV4dFwiLFwibGlcIikuYWRkQmFjaygpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksaC52YWthdGEuY29udGV4dC5fc2hvd19zdWJtZW51KHRoaXMpKX0pLm9uKFwibW91c2VsZWF2ZVwiLFwibGlcIixmdW5jdGlvbihlKXtoLmNvbnRhaW5zKHRoaXMsZS5yZWxhdGVkVGFyZ2V0KXx8aCh0aGlzKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmFkZEJhY2soKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpfSkub24oXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oZSl7dmFyIHQ7aCh0aGlzKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksaC52YWthdGEuY29udGV4dC5zZXR0aW5ncy5oaWRlX29ubW91c2VsZWF2ZSYmKGk9c2V0VGltZW91dCgodD10aGlzLGZ1bmN0aW9uKCl7aC52YWthdGEuY29udGV4dC5oaWRlKCl9KSxoLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmhpZGVfb25tb3VzZWxlYXZlKSl9KS5vbihcImNsaWNrXCIsXCJhXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGgodGhpcykudHJpZ2dlcihcImJsdXJcIikucGFyZW50KCkuaGFzQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1kaXNhYmxlZFwiKXx8ITE9PT1oLnZha2F0YS5jb250ZXh0Ll9leGVjdXRlKGgodGhpcykuYXR0cihcInJlbFwiKSl8fGgudmFrYXRhLmNvbnRleHQuaGlkZSgpfSkub24oXCJrZXlkb3duXCIsXCJhXCIsZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtzd2l0Y2goZS53aGljaCl7Y2FzZSAxMzpjYXNlIDMyOmUudHlwZT1cImNsaWNrXCIsZS5wcmV2ZW50RGVmYXVsdCgpLGgoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKGUpO2JyZWFrO2Nhc2UgMzc6Zy5pc192aXNpYmxlJiYoZy5lbGVtZW50LmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikubGFzdCgpLmNsb3Nlc3QoXCJsaVwiKS5maXJzdCgpLmZpbmQoXCJ1bFwiKS5oaWRlKCkuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmVuZCgpLmVuZCgpLmNoaWxkcmVuKFwiYVwiKS50cmlnZ2VyKFwiZm9jdXNcIiksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCkpO2JyZWFrO2Nhc2UgMzg6Zy5pc192aXNpYmxlJiYoKHQ9ISh0PWcuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikucHJldkFsbChcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpKS5sZW5ndGg/Zy5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikubGFzdCgpOnQpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuY2hpbGRyZW4oXCJhXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSAzOTpnLmlzX3Zpc2libGUmJihnLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5sYXN0KCkuY2hpbGRyZW4oXCJ1bFwiKS5zaG93KCkuY2hpbGRyZW4oXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5maXJzdCgpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuY2hpbGRyZW4oXCJhXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSA0MDpnLmlzX3Zpc2libGUmJigodD0hKHQ9Zy5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5uZXh0QWxsKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmZpcnN0KCkpLmxlbmd0aD9nLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpOnQpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuY2hpbGRyZW4oXCJhXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSAyNzpoLnZha2F0YS5jb250ZXh0LmhpZGUoKSxlLnByZXZlbnREZWZhdWx0KCl9fSkub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPWcuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0bWVudS1zaG9ydGN1dC1cIitlLndoaWNoKS5wYXJlbnQoKTtlLnBhcmVudCgpLm5vdChcIi52YWthdGEtY29udGV4dC1kaXNhYmxlZFwiKSYmZS50cmlnZ2VyKFwiY2xpY2tcIil9KSxoKGIpLm9uKFwibW91c2Vkb3duLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlKXtnLmlzX3Zpc2libGUmJmcuZWxlbWVudFswXSE9PWUudGFyZ2V0JiYhaC5jb250YWlucyhnLmVsZW1lbnRbMF0sZS50YXJnZXQpJiZoLnZha2F0YS5jb250ZXh0LmhpZGUoKX0pLm9uKFwiY29udGV4dF9zaG93LnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe2cuZWxlbWVudC5maW5kKFwibGk6aGFzKHVsKVwiKS5jaGlsZHJlbihcImFcIikuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1wYXJlbnRcIiksXyYmZy5lbGVtZW50LmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtcnRsXCIpLmNzcyhcImRpcmVjdGlvblwiLFwicnRsXCIpLGcuZWxlbWVudC5maW5kKFwidWxcIikuaGlkZSgpLmVuZCgpfSl9KSxFLmpzdHJlZS5kZWZhdWx0cy5kbmQ9e2NvcHk6ITAsb3Blbl90aW1lb3V0OjUwMCxpc19kcmFnZ2FibGU6ITAsY2hlY2tfd2hpbGVfZHJhZ2dpbmc6ITAsYWx3YXlzX2NvcHk6ITEsaW5zaWRlX3BvczowLGRyYWdfc2VsZWN0aW9uOiEwLHRvdWNoOiEwLGxhcmdlX2Ryb3BfdGFyZ2V0OiExLGxhcmdlX2RyYWdfdGFyZ2V0OiExLHVzZV9odG1sNTohMSxibGFua19zcGFjZV9kcm9wOiExfSxFLmpzdHJlZS5wbHVnaW5zLmRuZD1mdW5jdGlvbihlLG8pe3RoaXMuaW5pdD1mdW5jdGlvbihlLHQpe28uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDU9dGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1JiZcImRyYWdnYWJsZVwiaW4gYi5jcmVhdGVFbGVtZW50KFwic3BhblwiKX0sdGhpcy5iaW5kPWZ1bmN0aW9uKCl7by5iaW5kLmNhbGwodGhpcyksdGhpcy5lbGVtZW50Lm9uKHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNT9cImRyYWdzdGFydC5qc3RyZWVcIjpcIm1vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWVcIix0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldD9cIi5qc3RyZWUtbm9kZVwiOlwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihlKXtpZih0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldCYmRShlLnRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKVswXSE9PWUuY3VycmVudFRhcmdldClyZXR1cm4hMDtpZihcInRvdWNoc3RhcnRcIj09PWUudHlwZSYmKCF0aGlzLnNldHRpbmdzLmRuZC50b3VjaHx8XCJzZWxlY3RlZFwiPT09dGhpcy5zZXR0aW5ncy5kbmQudG91Y2gmJiFFKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmhhc0NsYXNzKFwianN0cmVlLWNsaWNrZWRcIikpKXJldHVybiEwO3ZhciB0PXRoaXMuZ2V0X25vZGUoZS50YXJnZXQpLGk9dGhpcy5pc19zZWxlY3RlZCh0KSYmdGhpcy5zZXR0aW5ncy5kbmQuZHJhZ19zZWxlY3Rpb24/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCkubGVuZ3RoOjEscj0xPGk/aStcIiBcIit0aGlzLmdldF9zdHJpbmcoXCJub2Rlc1wiKTp0aGlzLmdldF90ZXh0KGUuY3VycmVudFRhcmdldCk7aWYodGhpcy5zZXR0aW5ncy5jb3JlLmZvcmNlX3RleHQmJihyPUUudmFrYXRhLmh0bWwuZXNjYXBlKHIpKSx0JiYodC5pZHx8MD09PXQuaWQpJiZ0LmlkIT09RS5qc3RyZWUucm9vdCYmKDE9PT1lLndoaWNofHxcInRvdWNoc3RhcnRcIj09PWUudHlwZXx8XCJkcmFnc3RhcnRcIj09PWUudHlwZSkmJighMD09PXRoaXMuc2V0dGluZ3MuZG5kLmlzX2RyYWdnYWJsZXx8RS52YWthdGEuaXNfZnVuY3Rpb24odGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlKSYmdGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlLmNhbGwodGhpcywxPGk/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCEwKTpbdF0sZSkpKXtpZihkPXtqc3RyZWU6ITAsb3JpZ2luOnRoaXMsb2JqOnRoaXMuZ2V0X25vZGUodCwhMCksbm9kZXM6MTxpP3RoaXMuZ2V0X3RvcF9zZWxlY3RlZCgpOlt0LmlkXX0sdT1lLmN1cnJlbnRUYXJnZXQsIXRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSlyZXR1cm4gdGhpcy5lbGVtZW50LnRyaWdnZXIoXCJtb3VzZWRvd24uanN0cmVlXCIpLEUudmFrYXRhLmRuZC5zdGFydChlLGQsJzxkaXYgaWQ9XCJqc3RyZWUtZG5kXCIgY2xhc3M9XCJqc3RyZWUtJyt0aGlzLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIit0aGlzLmdldF90aGVtZSgpK1wiLVwiK3RoaXMuZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisodGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKydcIj48aSBjbGFzcz1cImpzdHJlZS1pY29uIGpzdHJlZS1lclwiPjwvaT4nK3IrJzxpbnMgY2xhc3M9XCJqc3RyZWUtY29weVwiPis8L2lucz48L2Rpdj4nKTtFLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdGFydFwiLGUse2hlbHBlcjpFKCksZWxlbWVudDp1LGRhdGE6ZH0pfX0uYmluZCh0aGlzKSksdGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1JiZ0aGlzLmVsZW1lbnQub24oXCJkcmFnb3Zlci5qc3RyZWVcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLEUudmFrYXRhLmRuZC5fdHJpZ2dlcihcIm1vdmVcIixlLHtoZWxwZXI6RSgpLGVsZW1lbnQ6dSxkYXRhOmR9KSwhMX0pLm9uKFwiZHJvcC5qc3RyZWVcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLEUudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0b3BcIixlLHtoZWxwZXI6RSgpLGVsZW1lbnQ6dSxkYXRhOmR9KSwhMX0uYmluZCh0aGlzKSl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7aWYoKGU9by5yZWRyYXdfbm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpJiZ0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDUpaWYodGhpcy5zZXR0aW5ncy5kbmQubGFyZ2VfZHJhZ190YXJnZXQpZS5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwhMCk7ZWxzZXtmb3IodmFyIHMsYSxuPW51bGwscz0wLGE9ZS5jaGlsZE5vZGVzLmxlbmd0aDtzPGE7cysrKWlmKGUuY2hpbGROb2Rlc1tzXSYmZS5jaGlsZE5vZGVzW3NdLmNsYXNzTmFtZSYmLTEhPT1lLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtYW5jaG9yXCIpKXtuPWUuY2hpbGROb2Rlc1tzXTticmVha31uJiZuLnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCEwKX1yZXR1cm4gZX19LEUoZnVuY3Rpb24oKXt2YXIgTj0hMSxUPSExLE89ITEsQT0hMSxTPUUoJzxkaXYgaWQ9XCJqc3RyZWUtbWFya2VyXCI+JiMxNjA7PC9kaXY+JykuaGlkZSgpO0UoYikub24oXCJkcmFnb3Zlci52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSl7dSYmRS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGUse2hlbHBlcjpFKCksZWxlbWVudDp1LGRhdGE6ZH0pfSkub24oXCJkcm9wLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlKXt1JiYoRS52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RvcFwiLGUse2hlbHBlcjpFKCksZWxlbWVudDp1LGRhdGE6ZH0pLGQ9dT1udWxsKX0pLm9uKFwiZG5kX3N0YXJ0LnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe089Tj0hMSx0JiZ0LmRhdGEmJnQuZGF0YS5qc3RyZWUmJlMuYXBwZW5kVG8oYi5ib2R5KX0pLm9uKFwiZG5kX21vdmUudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUscyl7dmFyIGE9cy5ldmVudC50YXJnZXQhPT1PLnRhcmdldDtpZihBJiYocy5ldmVudCYmXCJkcmFnb3ZlclwiPT09cy5ldmVudC50eXBlJiYhYXx8Y2xlYXJUaW1lb3V0KEEpKSxzJiZzLmRhdGEmJnMuZGF0YS5qc3RyZWUmJighcy5ldmVudC50YXJnZXQuaWR8fFwianN0cmVlLW1hcmtlclwiIT09cy5ldmVudC50YXJnZXQuaWQpKXtPPXMuZXZlbnQ7dmFyIG49RS5qc3RyZWUucmVmZXJlbmNlKHMuZXZlbnQudGFyZ2V0KSxvPSExLGQ9ITEsdD0hMSxpLGMsbCxoLF8sZyx1LGYscCxtLHYsaixrLGIseSx4LHcsQztpZihuJiZuLl9kYXRhJiZuLl9kYXRhLmRuZClpZihTLmF0dHIoXCJjbGFzc1wiLFwianN0cmVlLVwiK24uZ2V0X3RoZW1lKCkrKG4uc2V0dGluZ3MuY29yZS50aGVtZXMucmVzcG9uc2l2ZT9cIiBqc3RyZWUtZG5kLXJlc3BvbnNpdmVcIjpcIlwiKSkseD1zLmRhdGEub3JpZ2luJiYocy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihzLmV2ZW50Lm1ldGFLZXl8fHMuZXZlbnQuY3RybEtleSkpLHMuaGVscGVyLmNoaWxkcmVuKCkuYXR0cihcImNsYXNzXCIsXCJqc3RyZWUtXCIrbi5nZXRfdGhlbWUoKStcIiBqc3RyZWUtXCIrbi5nZXRfdGhlbWUoKStcIi1cIituLmdldF90aGVtZV92YXJpYW50KCkrXCIgXCIrKG4uc2V0dGluZ3MuY29yZS50aGVtZXMucmVzcG9uc2l2ZT9cIiBqc3RyZWUtZG5kLXJlc3BvbnNpdmVcIjpcIlwiKSkuZmluZChcIi5qc3RyZWUtY29weVwiKS5maXJzdCgpW3g/XCJzaG93XCI6XCJoaWRlXCJdKCkscy5ldmVudC50YXJnZXQhPT1uLmVsZW1lbnRbMF0mJnMuZXZlbnQudGFyZ2V0IT09bi5nZXRfY29udGFpbmVyX3VsKClbMF18fDAhPT1uLmdldF9jb250YWluZXJfdWwoKS5jaGlsZHJlbigpLmxlbmd0aCYmIW4uc2V0dGluZ3MuZG5kLmJsYW5rX3NwYWNlX2Ryb3Ape2lmKChvPW4uc2V0dGluZ3MuZG5kLmxhcmdlX2Ryb3BfdGFyZ2V0P0Uocy5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTpFKHMuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1hbmNob3JcIikpJiZvLmxlbmd0aCYmby5wYXJlbnQoKS5pcyhcIi5qc3RyZWUtY2xvc2VkLCAuanN0cmVlLW9wZW4sIC5qc3RyZWUtbGVhZlwiKSYmKGQ9by5vZmZzZXQoKSx0PShzLmV2ZW50LnBhZ2VZIT09UD9zLmV2ZW50OnMuZXZlbnQub3JpZ2luYWxFdmVudCkucGFnZVktZC50b3AsaD1vLm91dGVySGVpZ2h0KCksdT10PGgvMz9bXCJiXCIsXCJpXCIsXCJhXCJdOmgtaC8zPHQ/W1wiYVwiLFwiaVwiLFwiYlwiXTpoLzI8dD9bXCJpXCIsXCJhXCIsXCJiXCJdOltcImlcIixcImJcIixcImFcIl0sRS5lYWNoKHUsZnVuY3Rpb24oZSx0KXtzd2l0Y2godCl7Y2FzZVwiYlwiOmM9ZC5sZWZ0LTYsbD1kLnRvcCxfPW4uZ2V0X3BhcmVudChvKSxnPW8ucGFyZW50KCkuaW5kZXgoKSxDPVwianN0cmVlLWJlbG93XCI7YnJlYWs7Y2FzZVwiaVwiOmI9bi5zZXR0aW5ncy5kbmQuaW5zaWRlX3Bvcyx5PW4uZ2V0X25vZGUoby5wYXJlbnQoKSksYz1kLmxlZnQtMixsPWQudG9wK2gvMisxLF89eS5pZCxnPVwiZmlyc3RcIj09PWI/MDpcImxhc3RcIj09PWI/eS5jaGlsZHJlbi5sZW5ndGg6TWF0aC5taW4oYix5LmNoaWxkcmVuLmxlbmd0aCksQz1cImpzdHJlZS1pbnNpZGVcIjticmVhaztjYXNlXCJhXCI6Yz1kLmxlZnQtNixsPWQudG9wK2gsXz1uLmdldF9wYXJlbnQobyksZz1vLnBhcmVudCgpLmluZGV4KCkrMSxDPVwianN0cmVlLWFib3ZlXCJ9Zm9yKGY9ITAscD0wLG09cy5kYXRhLm5vZGVzLmxlbmd0aDtwPG07cCsrKWlmKHY9cy5kYXRhLm9yaWdpbiYmKHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHxzLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYocy5ldmVudC5tZXRhS2V5fHxzLmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCIsaj1nLFwibW92ZV9ub2RlXCI9PXYmJlwiYVwiPT09dCYmcy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbj09PW4mJl89PT1uLmdldF9wYXJlbnQocy5kYXRhLm5vZGVzW3BdKSYmKGs9bi5nZXRfbm9kZShfKSxqPkUuaW5BcnJheShzLmRhdGEubm9kZXNbcF0say5jaGlsZHJlbikmJi0taiksIShmPWYmJihuJiZuLnNldHRpbmdzJiZuLnNldHRpbmdzLmRuZCYmITE9PT1uLnNldHRpbmdzLmRuZC5jaGVja193aGlsZV9kcmFnZ2luZ3x8bi5jaGVjayh2LHMuZGF0YS5vcmlnaW4mJnMuZGF0YS5vcmlnaW4hPT1uP3MuZGF0YS5vcmlnaW4uZ2V0X25vZGUocy5kYXRhLm5vZGVzW3BdKTpzLmRhdGEubm9kZXNbcF0sXyxqLHtkbmQ6ITAscmVmOm4uZ2V0X25vZGUoby5wYXJlbnQoKSkscG9zOnQsb3JpZ2luOnMuZGF0YS5vcmlnaW4saXNfbXVsdGk6cy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbiE9PW4saXNfZm9yZWlnbjohcy5kYXRhLm9yaWdpbn0pKSkpe24mJm4ubGFzdF9lcnJvciYmKFQ9bi5sYXN0X2Vycm9yKCkpO2JyZWFrfXZhciBpLHI7aWYoXCJpXCI9PT10JiZvLnBhcmVudCgpLmlzKFwiLmpzdHJlZS1jbG9zZWRcIikmJm4uc2V0dGluZ3MuZG5kLm9wZW5fdGltZW91dCYmKHMuZXZlbnQmJlwiZHJhZ292ZXJcIj09PXMuZXZlbnQudHlwZSYmIWF8fChBJiZjbGVhclRpbWVvdXQoQSksQT1zZXRUaW1lb3V0KChyPW8sZnVuY3Rpb24oKXtpLm9wZW5fbm9kZShyKX0pLChpPW4pLnNldHRpbmdzLmRuZC5vcGVuX3RpbWVvdXQpKSksZilyZXR1cm4odz1uLmdldF9ub2RlKF8sITApKS5oYXNDbGFzcyhcIi5qc3RyZWUtZG5kLXBhcmVudFwiKXx8KEUoXCIuanN0cmVlLWRuZC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZG5kLXBhcmVudFwiKSx3LmFkZENsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIikpLE49e2luczpuLHBhcjpfLHBvczpcImlcIiE9PXR8fFwibGFzdFwiIT09Ynx8MCE9PWd8fG4uaXNfbG9hZGVkKHkpP2c6XCJsYXN0XCJ9LFMuY3NzKHtsZWZ0OmMrXCJweFwiLHRvcDpsK1wicHhcIn0pLnNob3coKSxTLnJlbW92ZUNsYXNzKFwianN0cmVlLWFib3ZlIGpzdHJlZS1pbnNpZGUganN0cmVlLWJlbG93XCIpLmFkZENsYXNzKEMpLHMuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikuZmlyc3QoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lclwiKS5hZGRDbGFzcyhcImpzdHJlZS1va1wiKSxzLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJnMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXImJihzLmV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9eD9cImNvcHlcIjpcIm1vdmVcIiksVD17fSwhKHU9ITApfSksITA9PT11KSlyZXR1cm59ZWxzZXtmb3IoZj0hMCxwPTAsbT1zLmRhdGEubm9kZXMubGVuZ3RoO3A8bTtwKyspaWYoIShmPWYmJm4uY2hlY2socy5kYXRhLm9yaWdpbiYmKHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHxzLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYocy5ldmVudC5tZXRhS2V5fHxzLmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCIscy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbiE9PW4/cy5kYXRhLm9yaWdpbi5nZXRfbm9kZShzLmRhdGEubm9kZXNbcF0pOnMuZGF0YS5ub2Rlc1twXSxFLmpzdHJlZS5yb290LFwibGFzdFwiLHtkbmQ6ITAscmVmOm4uZ2V0X25vZGUoRS5qc3RyZWUucm9vdCkscG9zOlwiaVwiLG9yaWdpbjpzLmRhdGEub3JpZ2luLGlzX211bHRpOnMuZGF0YS5vcmlnaW4mJnMuZGF0YS5vcmlnaW4hPT1uLGlzX2ZvcmVpZ246IXMuZGF0YS5vcmlnaW59KSkpYnJlYWs7aWYoZilyZXR1cm4gTj17aW5zOm4scGFyOkUuanN0cmVlLnJvb3QscG9zOlwibGFzdFwifSxTLmhpZGUoKSxzLmhlbHBlci5maW5kKFwiLmpzdHJlZS1pY29uXCIpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZXJcIikuYWRkQ2xhc3MoXCJqc3RyZWUtb2tcIiksdm9pZChzLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJnMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXImJihzLmV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9eD9cImNvcHlcIjpcIm1vdmVcIikpfUUoXCIuanN0cmVlLWRuZC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZG5kLXBhcmVudFwiKSxOPSExLHMuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb2tcIikuYWRkQ2xhc3MoXCJqc3RyZWUtZXJcIikscy5ldmVudC5vcmlnaW5hbEV2ZW50JiZzLmV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLFMuaGlkZSgpfX0pLm9uKFwiZG5kX3Njcm9sbC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0JiZ0LmRhdGEmJnQuZGF0YS5qc3RyZWUmJihTLmhpZGUoKSxPPU49ITEsdC5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5maXJzdCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW9rXCIpLmFkZENsYXNzKFwianN0cmVlLWVyXCIpKX0pLm9uKFwiZG5kX3N0b3AudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7aWYoRShcIi5qc3RyZWUtZG5kLXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpLEEmJmNsZWFyVGltZW91dChBKSx0JiZ0LmRhdGEmJnQuZGF0YS5qc3RyZWUpe1MuaGlkZSgpLmRldGFjaCgpO3ZhciBpLHIscz1bXTtpZihOKXtmb3IoaT0wLHI9dC5kYXRhLm5vZGVzLmxlbmd0aDtpPHI7aSsrKXNbaV09dC5kYXRhLm9yaWdpbj90LmRhdGEub3JpZ2luLmdldF9ub2RlKHQuZGF0YS5ub2Rlc1tpXSk6dC5kYXRhLm5vZGVzW2ldO04uaW5zW3QuZGF0YS5vcmlnaW4mJih0LmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5hbHdheXNfY29weXx8dC5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuY29weSYmKHQuZXZlbnQubWV0YUtleXx8dC5ldmVudC5jdHJsS2V5KSk/XCJjb3B5X25vZGVcIjpcIm1vdmVfbm9kZVwiXShzLE4ucGFyLE4ucG9zLCExLCExLCExLHQuZGF0YS5vcmlnaW4pfWVsc2UoaT1FKHQuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZVwiKSkubGVuZ3RoJiZUJiZULmVycm9yJiZcImNoZWNrXCI9PT1ULmVycm9yJiYoaT1pLmpzdHJlZSghMCkpJiZpLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLFQpO049Tz0hMX19KS5vbihcImtleXVwLmpzdHJlZSBrZXlkb3duLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7KHQ9RS52YWthdGEuZG5kLl9nZXQoKSkmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSYmKFwia2V5dXBcIj09PWUudHlwZSYmMjc9PT1lLndoaWNoPyhBJiZjbGVhclRpbWVvdXQoQSksQT1PPVQ9Tj0hMSxTLmhpZGUoKS5kZXRhY2goKSxFLnZha2F0YS5kbmQuX2NsZWFuKCkpOih0LmhlbHBlci5maW5kKFwiLmpzdHJlZS1jb3B5XCIpLmZpcnN0KClbdC5kYXRhLm9yaWdpbiYmKHQuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHx0LmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKT9cInNob3dcIjpcImhpZGVcIl0oKSxPJiYoTy5tZXRhS2V5PWUubWV0YUtleSxPLmN0cmxLZXk9ZS5jdHJsS2V5LEUudmFrYXRhLmRuZC5fdHJpZ2dlcihcIm1vdmVcIixPKSkpKX0pfSkscD17ZWxlbWVudDohKChmPUUpLnZha2F0YS5odG1sPXtkaXY6ZihcIjxkaXY+PC9kaXY+XCIpLGVzY2FwZTpmdW5jdGlvbihlKXtyZXR1cm4gZi52YWthdGEuaHRtbC5kaXYudGV4dChlKS5odG1sKCl9LHN0cmlwOmZ1bmN0aW9uKGUpe3JldHVybiBmLnZha2F0YS5odG1sLmRpdi5lbXB0eSgpLmFwcGVuZChmLnBhcnNlSFRNTChlKSkudGV4dCgpfX0pLHRhcmdldDohMSxpc19kb3duOiExLGlzX2RyYWc6ITEsaGVscGVyOiExLGhlbHBlcl93OjAsZGF0YTohMSxpbml0X3g6MCxpbml0X3k6MCxzY3JvbGxfbDowLHNjcm9sbF90OjAsc2Nyb2xsX2U6ITEsc2Nyb2xsX2k6ITEsaXNfdG91Y2g6ITF9LGYudmFrYXRhLmRuZD17c2V0dGluZ3M6e3Njcm9sbF9zcGVlZDoxMCxzY3JvbGxfcHJveGltaXR5OjIwLGhlbHBlcl9sZWZ0OjUsaGVscGVyX3RvcDoxMCx0aHJlc2hvbGQ6NSx0aHJlc2hvbGRfdG91Y2g6MTB9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsdCxpKXsoaT1pPT09UD9mLnZha2F0YS5kbmQuX2dldCgpOmkpLmV2ZW50PXQsZihiKS50cmlnZ2VySGFuZGxlcihcImRuZF9cIitlK1wiLnZha2F0YVwiLGkpfSxfZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2RhdGE6cC5kYXRhLGVsZW1lbnQ6cC5lbGVtZW50LGhlbHBlcjpwLmhlbHBlcn19LF9jbGVhbjpmdW5jdGlvbigpe3AuaGVscGVyJiZwLmhlbHBlci5yZW1vdmUoKSxwLnNjcm9sbF9pJiYoY2xlYXJJbnRlcnZhbChwLnNjcm9sbF9pKSxwLnNjcm9sbF9pPSExKSxwPXtlbGVtZW50OiExLHRhcmdldDohMSxpc19kb3duOiExLGlzX2RyYWc6ITEsaGVscGVyOiExLGhlbHBlcl93OjAsZGF0YTohMSxpbml0X3g6MCxpbml0X3k6MCxzY3JvbGxfbDowLHNjcm9sbF90OjAsc2Nyb2xsX2U6ITEsc2Nyb2xsX2k6ITEsaXNfdG91Y2g6ITF9LHU9bnVsbCxmKGIpLm9mZihcIm1vdXNlbW92ZS52YWthdGEuanN0cmVlIHRvdWNobW92ZS52YWthdGEuanN0cmVlXCIsZi52YWthdGEuZG5kLmRyYWcpLGYoYikub2ZmKFwibW91c2V1cC52YWthdGEuanN0cmVlIHRvdWNoZW5kLnZha2F0YS5qc3RyZWVcIixmLnZha2F0YS5kbmQuc3RvcCl9LF9zY3JvbGw6ZnVuY3Rpb24oZSl7aWYoIXAuc2Nyb2xsX2V8fCFwLnNjcm9sbF9sJiYhcC5zY3JvbGxfdClyZXR1cm4gcC5zY3JvbGxfaSYmKGNsZWFySW50ZXJ2YWwocC5zY3JvbGxfaSkscC5zY3JvbGxfaT0hMSksITE7aWYoIXAuc2Nyb2xsX2kpcmV0dXJuIHAuc2Nyb2xsX2k9c2V0SW50ZXJ2YWwoZi52YWthdGEuZG5kLl9zY3JvbGwsMTAwKSwhMTtpZighMD09PWUpcmV0dXJuITE7dmFyIHQ9cC5zY3JvbGxfZS5zY3JvbGxUb3AoKSxlPXAuc2Nyb2xsX2Uuc2Nyb2xsTGVmdCgpO3Auc2Nyb2xsX2Uuc2Nyb2xsVG9wKHQrcC5zY3JvbGxfdCpmLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3NwZWVkKSxwLnNjcm9sbF9lLnNjcm9sbExlZnQoZStwLnNjcm9sbF9sKmYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfc3BlZWQpLHQ9PT1wLnNjcm9sbF9lLnNjcm9sbFRvcCgpJiZlPT09cC5zY3JvbGxfZS5zY3JvbGxMZWZ0KCl8fGYudmFrYXRhLmRuZC5fdHJpZ2dlcihcInNjcm9sbFwiLHAuc2Nyb2xsX2UpfSxzdGFydDpmdW5jdGlvbihlLHQsaSl7XCJ0b3VjaHN0YXJ0XCI9PT1lLnR5cGUmJmUub3JpZ2luYWxFdmVudCYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJihlLnBhZ2VYPWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxlLnBhZ2VZPWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSxlLnRhcmdldD1iLmVsZW1lbnRGcm9tUG9pbnQoZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLXdpbmRvdy5wYWdlWE9mZnNldCxlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KSkscC5pc19kcmFnJiZmLnZha2F0YS5kbmQuc3RvcCh7fSk7dHJ5e2UuY3VycmVudFRhcmdldC51bnNlbGVjdGFibGU9XCJvblwiLGUuY3VycmVudFRhcmdldC5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGUuY3VycmVudFRhcmdldC5zdHlsZSYmKGUuY3VycmVudFRhcmdldC5zdHlsZS50b3VjaEFjdGlvbj1cIm5vbmVcIixlLmN1cnJlbnRUYXJnZXQuc3R5bGUubXNUb3VjaEFjdGlvbj1cIm5vbmVcIixlLmN1cnJlbnRUYXJnZXQuc3R5bGUuTW96VXNlclNlbGVjdD1cIm5vbmVcIil9Y2F0Y2goZSl7fXJldHVybiBwLmluaXRfeD1lLnBhZ2VYLHAuaW5pdF95PWUucGFnZVkscC5kYXRhPXQscC5pc19kb3duPSEwLHAuZWxlbWVudD1lLmN1cnJlbnRUYXJnZXQscC50YXJnZXQ9ZS50YXJnZXQscC5pc190b3VjaD1cInRvdWNoc3RhcnRcIj09PWUudHlwZSwhMSE9PWkmJihwLmhlbHBlcj1mKFwiPGRpdiBpZD0ndmFrYXRhLWRuZCc+PC9kaXY+XCIpLmh0bWwoaSkuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIixtYXJnaW46XCIwXCIscGFkZGluZzpcIjBcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiLTIwMDBweFwiLGxpbmVIZWlnaHQ6XCIxNnB4XCIsekluZGV4OlwiMTAwMDBcIn0pKSxmKGIpLm9uKFwibW91c2Vtb3ZlLnZha2F0YS5qc3RyZWUgdG91Y2htb3ZlLnZha2F0YS5qc3RyZWVcIixmLnZha2F0YS5kbmQuZHJhZyksZihiKS5vbihcIm1vdXNldXAudmFrYXRhLmpzdHJlZSB0b3VjaGVuZC52YWthdGEuanN0cmVlXCIsZi52YWthdGEuZG5kLnN0b3ApLCExfSxkcmFnOmZ1bmN0aW9uKGkpe2lmKFwidG91Y2htb3ZlXCI9PT1pLnR5cGUmJmkub3JpZ2luYWxFdmVudCYmaS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZpLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJihpLnBhZ2VYPWkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxpLnBhZ2VZPWkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSxpLnRhcmdldD1iLmVsZW1lbnRGcm9tUG9pbnQoaS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLXdpbmRvdy5wYWdlWE9mZnNldCxpLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KSkscC5pc19kb3duKXtpZighcC5pc19kcmFnKXtpZighKE1hdGguYWJzKGkucGFnZVgtcC5pbml0X3gpPihwLmlzX3RvdWNoP2YudmFrYXRhLmRuZC5zZXR0aW5ncy50aHJlc2hvbGRfdG91Y2g6Zi52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZCl8fE1hdGguYWJzKGkucGFnZVktcC5pbml0X3kpPihwLmlzX3RvdWNoP2YudmFrYXRhLmRuZC5zZXR0aW5ncy50aHJlc2hvbGRfdG91Y2g6Zi52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZCkpKXJldHVybjtwLmhlbHBlciYmKHAuaGVscGVyLmFwcGVuZFRvKGIuYm9keSkscC5oZWxwZXJfdz1wLmhlbHBlci5vdXRlcldpZHRoKCkpLHAuaXNfZHJhZz0hMCxmKHAudGFyZ2V0KS5vbmUoXCJjbGljay52YWthdGFcIiwhMSksZi52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RhcnRcIixpKX12YXIgZT0hMSx0PSExLHI9ITEscz0hMSxhPSExLG49ITEsbz0hMSxkPSExLGM9ITEsbD0hMTtyZXR1cm4gcC5zY3JvbGxfdD0wLHAuc2Nyb2xsX2w9MCxwLnNjcm9sbF9lPSExLGYoZihpLnRhcmdldCkucGFyZW50c1VudGlsKFwiYm9keVwiKS5hZGRCYWNrKCkuZ2V0KCkucmV2ZXJzZSgpKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50JiYvXmF1dG98c2Nyb2xsJC8udGVzdChmKHRoaXMpLmNzcyhcIm92ZXJmbG93XCIpKSYmKHRoaXMuc2Nyb2xsSGVpZ2h0PnRoaXMub2Zmc2V0SGVpZ2h0fHx0aGlzLnNjcm9sbFdpZHRoPnRoaXMub2Zmc2V0V2lkdGgpfSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPWYodGhpcyksdD1lLm9mZnNldCgpO2lmKHRoaXMuc2Nyb2xsSGVpZ2h0PnRoaXMub2Zmc2V0SGVpZ2h0JiYodC50b3ArZS5oZWlnaHQoKS1pLnBhZ2VZPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfdD0xKSxpLnBhZ2VZLXQudG9wPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfdD0tMSkpLHRoaXMuc2Nyb2xsV2lkdGg+dGhpcy5vZmZzZXRXaWR0aCYmKHQubGVmdCtlLndpZHRoKCktaS5wYWdlWDxmLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKHAuc2Nyb2xsX2w9MSksaS5wYWdlWC10LmxlZnQ8Zi52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihwLnNjcm9sbF9sPS0xKSkscC5zY3JvbGxfdHx8cC5zY3JvbGxfbClyZXR1cm4gcC5zY3JvbGxfZT1mKHRoaXMpLCExfSkscC5zY3JvbGxfZXx8KGU9ZihiKSx0PWYod2luZG93KSxyPWUuaGVpZ2h0KCkscz10LmhlaWdodCgpLGE9ZS53aWR0aCgpLG49dC53aWR0aCgpLG89ZS5zY3JvbGxUb3AoKSxkPWUuc2Nyb2xsTGVmdCgpLHM8ciYmaS5wYWdlWS1vPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfdD0tMSksczxyJiZzLShpLnBhZ2VZLW8pPGYudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYocC5zY3JvbGxfdD0xKSxuPGEmJmkucGFnZVgtZDxmLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKHAuc2Nyb2xsX2w9LTEpLG48YSYmbi0oaS5wYWdlWC1kKTxmLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKHAuc2Nyb2xsX2w9MSksKHAuc2Nyb2xsX3R8fHAuc2Nyb2xsX2wpJiYocC5zY3JvbGxfZT1lKSkscC5zY3JvbGxfZSYmZi52YWthdGEuZG5kLl9zY3JvbGwoITApLHAuaGVscGVyJiYoYz1wYXJzZUludChpLnBhZ2VZK2YudmFrYXRhLmRuZC5zZXR0aW5ncy5oZWxwZXJfdG9wLDEwKSxsPXBhcnNlSW50KGkucGFnZVgrZi52YWthdGEuZG5kLnNldHRpbmdzLmhlbHBlcl9sZWZ0LDEwKSxhJiZsK3AuaGVscGVyX3c+YSYmKGw9YS0ocC5oZWxwZXJfdysyKSkscC5oZWxwZXIuY3NzKHtsZWZ0OmwrXCJweFwiLHRvcDooYz1yJiZyPGMrMjU/ci01MDpjKStcInB4XCJ9KSksZi52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGkpLCExfX0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cInRvdWNoZW5kXCI9PT1lLnR5cGUmJmUub3JpZ2luYWxFdmVudCYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJihlLnBhZ2VYPWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxlLnBhZ2VZPWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSxlLnRhcmdldD1iLmVsZW1lbnRGcm9tUG9pbnQoZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLXdpbmRvdy5wYWdlWE9mZnNldCxlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KSkscC5pc19kcmFnPyhlLnRhcmdldCE9PXAudGFyZ2V0JiZmKHAudGFyZ2V0KS5vZmYoXCJjbGljay52YWthdGFcIiksZi52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RvcFwiLGUpKTpcInRvdWNoZW5kXCI9PT1lLnR5cGUmJmUudGFyZ2V0PT09cC50YXJnZXQmJih0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmKGUudGFyZ2V0KS50cmlnZ2VyKFwiY2xpY2tcIil9LDEwMCksZihlLnRhcmdldCkub25lKFwiY2xpY2tcIixmdW5jdGlvbigpe3QmJmNsZWFyVGltZW91dCh0KX0pKSxmLnZha2F0YS5kbmQuX2NsZWFuKCksITF9fSxFLmpzdHJlZS5kZWZhdWx0cy5tYXNzbG9hZD1udWxsLEUuanN0cmVlLnBsdWdpbnMubWFzc2xvYWQ9ZnVuY3Rpb24oZSxsKXt0aGlzLmluaXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhLm1hc3Nsb2FkPXt9LGwuaW5pdC5jYWxsKHRoaXMsZSx0KX0sdGhpcy5fbG9hZF9ub2Rlcz1mdW5jdGlvbihhLG4sbyxkKXt2YXIgZT10aGlzLnNldHRpbmdzLm1hc3Nsb2FkLHQ9W10saT10aGlzLl9tb2RlbC5kYXRhLHIscyxjO2lmKCFvKXtmb3Iocj0wLHM9YS5sZW5ndGg7cjxzO3IrKylpW2Fbcl1dJiYoaVthW3JdXS5zdGF0ZS5sb2FkZWR8fGlbYVtyXV0uc3RhdGUuZmFpbGVkKSYmIWR8fCh0LnB1c2goYVtyXSksKGM9dGhpcy5nZXRfbm9kZShhW3JdLCEwKSkmJmMubGVuZ3RoJiZjLmFkZENsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCEwKSk7aWYodGhpcy5fZGF0YS5tYXNzbG9hZD17fSx0Lmxlbmd0aCl7aWYoRS52YWthdGEuaXNfZnVuY3Rpb24oZSkpcmV0dXJuIGUuY2FsbCh0aGlzLHQsZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihlKWZvcih0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKHRoaXMuX2RhdGEubWFzc2xvYWRbdF09ZVt0XSk7Zm9yKHQ9MCxpPWEubGVuZ3RoO3Q8aTt0KyspKGM9dGhpcy5nZXRfbm9kZShhW3RdLCEwKSkmJmMubGVuZ3RoJiZjLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKTtsLl9sb2FkX25vZGVzLmNhbGwodGhpcyxhLG4sbyxkKX0uYmluZCh0aGlzKSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUudXJsKXJldHVybiBlPUUuZXh0ZW5kKCEwLHt9LGUpLEUudmFrYXRhLmlzX2Z1bmN0aW9uKGUudXJsKSYmKGUudXJsPWUudXJsLmNhbGwodGhpcyx0KSksRS52YWthdGEuaXNfZnVuY3Rpb24oZS5kYXRhKSYmKGUuZGF0YT1lLmRhdGEuY2FsbCh0aGlzLHQpKSxFLmFqYXgoZSkuZG9uZShmdW5jdGlvbihlLHQsaSl7dmFyIHIscztpZihlKWZvcihyIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRoaXMuX2RhdGEubWFzc2xvYWRbcl09ZVtyXSk7Zm9yKHI9MCxzPWEubGVuZ3RoO3I8cztyKyspKGM9dGhpcy5nZXRfbm9kZShhW3JdLCEwKSkmJmMubGVuZ3RoJiZjLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKTtsLl9sb2FkX25vZGVzLmNhbGwodGhpcyxhLG4sbyxkKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbihlKXtsLl9sb2FkX25vZGVzLmNhbGwodGhpcyxhLG4sbyxkKX0uYmluZCh0aGlzKSl9fXJldHVybiBsLl9sb2FkX25vZGVzLmNhbGwodGhpcyxhLG4sbyxkKX0sdGhpcy5fbG9hZF9ub2RlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fZGF0YS5tYXNzbG9hZFtlLmlkXSxyPW51bGwsaTtyZXR1cm4gaT8ocj10aGlzW1wic3RyaW5nXCI9PXR5cGVvZiBpP1wiX2FwcGVuZF9odG1sX2RhdGFcIjpcIl9hcHBlbmRfanNvbl9kYXRhXCJdKGUsXCJzdHJpbmdcIj09dHlwZW9mIGk/RShFLnBhcnNlSFRNTChpKSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDMhPT10aGlzLm5vZGVUeXBlfSk6aSxmdW5jdGlvbihlKXt0LmNhbGwodGhpcyxlKX0pLChpPXRoaXMuZ2V0X25vZGUoZS5pZCwhMCkpJiZpLmxlbmd0aCYmaS5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZGVsZXRlIHRoaXMuX2RhdGEubWFzc2xvYWRbZS5pZF0scik6bC5fbG9hZF9ub2RlLmNhbGwodGhpcyxlLHQpfX0sRS5qc3RyZWUuZGVmYXVsdHMuc2VhcmNoPXthamF4OiExLGZ1enp5OiExLGNhc2Vfc2Vuc2l0aXZlOiExLHNob3dfb25seV9tYXRjaGVzOiExLHNob3dfb25seV9tYXRjaGVzX2NoaWxkcmVuOiExLGNsb3NlX29wZW5lZF9vbmNsZWFyOiEwLHNlYXJjaF9sZWF2ZXNfb25seTohMSxzZWFyY2hfY2FsbGJhY2s6ITF9LEUuanN0cmVlLnBsdWdpbnMuc2VhcmNoPWZ1bmN0aW9uKGUsbyl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7by5iaW5kLmNhbGwodGhpcyksdGhpcy5fZGF0YS5zZWFyY2guc3RyPVwiXCIsdGhpcy5fZGF0YS5zZWFyY2guZG9tPUUoKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9W10sdGhpcy5fZGF0YS5zZWFyY2gub3BuPVtdLHRoaXMuX2RhdGEuc2VhcmNoLnNvbT0hMSx0aGlzLl9kYXRhLnNlYXJjaC5zbWM9ITEsdGhpcy5fZGF0YS5zZWFyY2guaGRuPVtdLHRoaXMuZWxlbWVudC5vbihcInNlYXJjaC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe2lmKHRoaXMuX2RhdGEuc2VhcmNoLnNvbSYmdC5yZXMubGVuZ3RoKXtmb3IodmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyLHMsYT1bXSxuLG8scj0wLHM9dC5yZXMubGVuZ3RoO3I8cztyKyspaWYoaVt0LnJlc1tyXV0mJiFpW3QucmVzW3JdXS5zdGF0ZS5oaWRkZW4mJihhLnB1c2godC5yZXNbcl0pLGE9YS5jb25jYXQoaVt0LnJlc1tyXV0ucGFyZW50cyksdGhpcy5fZGF0YS5zZWFyY2guc21jKSlmb3Iobj0wLG89aVt0LnJlc1tyXV0uY2hpbGRyZW5fZC5sZW5ndGg7bjxvO24rKylpW2lbdC5yZXNbcl1dLmNoaWxkcmVuX2Rbbl1dJiYhaVtpW3QucmVzW3JdXS5jaGlsZHJlbl9kW25dXS5zdGF0ZS5oaWRkZW4mJmEucHVzaChpW3QucmVzW3JdXS5jaGlsZHJlbl9kW25dKTthPUUudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKEUudmFrYXRhLmFycmF5X3VuaXF1ZShhKSxFLmpzdHJlZS5yb290KSx0aGlzLl9kYXRhLnNlYXJjaC5oZG49dGhpcy5oaWRlX2FsbCghMCksdGhpcy5zaG93X25vZGUoYSwhMCksdGhpcy5yZWRyYXcoITApfX0uYmluZCh0aGlzKSkub24oXCJjbGVhcl9zZWFyY2guanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhLnNlYXJjaC5zb20mJnQucmVzLmxlbmd0aCYmKHRoaXMuc2hvd19ub2RlKHRoaXMuX2RhdGEuc2VhcmNoLmhkbiwhMCksdGhpcy5yZWRyYXcoITApKX0uYmluZCh0aGlzKSl9LHRoaXMuc2VhcmNoPWZ1bmN0aW9uKHIsZSx0LGkscyxhKXtpZighMT09PXJ8fFwiXCI9PT1FLnZha2F0YS50cmltKHIudG9TdHJpbmcoKSkpcmV0dXJuIHRoaXMuY2xlYXJfc2VhcmNoKCk7aT0oaT10aGlzLmdldF9ub2RlKGkpKSYmKGkuaWR8fDA9PT1pLmlkKT9pLmlkOm51bGwscj1yLnRvU3RyaW5nKCk7dmFyIG49dGhpcy5zZXR0aW5ncy5zZWFyY2gsbz1uLmFqYXh8fCExLGQ9dGhpcy5fbW9kZWwuZGF0YSxjPW51bGwsbD1bXSxoPVtdLF8sZztpZih0aGlzLl9kYXRhLnNlYXJjaC5yZXMubGVuZ3RoJiYhcyYmdGhpcy5jbGVhcl9zZWFyY2goKSx0PT09UCYmKHQ9bi5zaG93X29ubHlfbWF0Y2hlcyksYT09PVAmJihhPW4uc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4pLCFlJiYhMSE9PW8pcmV0dXJuIEUudmFrYXRhLmlzX2Z1bmN0aW9uKG8pP28uY2FsbCh0aGlzLHIsZnVuY3Rpb24oZSl7ZSYmZS5kJiYoZT1lLmQpLHRoaXMuX2xvYWRfbm9kZXMoRS52YWthdGEuaXNfYXJyYXkoZSk/RS52YWthdGEuYXJyYXlfdW5pcXVlKGUpOltdLGZ1bmN0aW9uKCl7dGhpcy5zZWFyY2gociwhMCx0LGkscyxhKX0pfS5iaW5kKHRoaXMpLGkpOigobz1FLmV4dGVuZCh7fSxvKSkuZGF0YXx8KG8uZGF0YT17fSksby5kYXRhLnN0cj1yLGkmJihvLmRhdGEuaW5zaWRlPWkpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0JiZ0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdC5hYm9ydCgpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0PUUuYWpheChvKS5mYWlsKGZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiYWpheFwiLHBsdWdpbjpcInNlYXJjaFwiLGlkOlwic2VhcmNoXzAxXCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgc2VhcmNoIHBhcmVudHNcIixkYXRhOkpTT04uc3RyaW5naWZ5KG8pfSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKX0uYmluZCh0aGlzKSkuZG9uZShmdW5jdGlvbihlKXtlJiZlLmQmJihlPWUuZCksdGhpcy5fbG9hZF9ub2RlcyhFLnZha2F0YS5pc19hcnJheShlKT9FLnZha2F0YS5hcnJheV91bmlxdWUoZSk6W10sZnVuY3Rpb24oKXt0aGlzLnNlYXJjaChyLCEwLHQsaSxzLGEpfSl9LmJpbmQodGhpcykpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0KTtpZihzfHwodGhpcy5fZGF0YS5zZWFyY2guc3RyPXIsdGhpcy5fZGF0YS5zZWFyY2guZG9tPUUoKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9W10sdGhpcy5fZGF0YS5zZWFyY2gub3BuPVtdLHRoaXMuX2RhdGEuc2VhcmNoLnNvbT10LHRoaXMuX2RhdGEuc2VhcmNoLnNtYz1hKSxjPW5ldyBFLnZha2F0YS5zZWFyY2gociwhMCx7Y2FzZVNlbnNpdGl2ZTpuLmNhc2Vfc2Vuc2l0aXZlLGZ1enp5Om4uZnV6enl9KSxFLmVhY2goZFtpfHxFLmpzdHJlZS5yb290XS5jaGlsZHJlbl9kLGZ1bmN0aW9uKGUsdCl7dmFyIGk9ZFt0XTtpLnRleHQmJiFpLnN0YXRlLmhpZGRlbiYmKCFuLnNlYXJjaF9sZWF2ZXNfb25seXx8aS5zdGF0ZS5sb2FkZWQmJjA9PT1pLmNoaWxkcmVuLmxlbmd0aCkmJihuLnNlYXJjaF9jYWxsYmFjayYmbi5zZWFyY2hfY2FsbGJhY2suY2FsbCh0aGlzLHIsaSl8fCFuLnNlYXJjaF9jYWxsYmFjayYmYy5zZWFyY2goaS50ZXh0KS5pc01hdGNoKSYmKGwucHVzaCh0KSxoPWguY29uY2F0KGkucGFyZW50cykpfSksbC5sZW5ndGgpe2ZvcihfPTAsZz0oaD1FLnZha2F0YS5hcnJheV91bmlxdWUoaCkpLmxlbmd0aDtfPGc7XysrKWhbX10hPT1FLmpzdHJlZS5yb290JiZkW2hbX11dJiYhMD09PXRoaXMub3Blbl9ub2RlKGhbX10sbnVsbCwwKSYmdGhpcy5fZGF0YS5zZWFyY2gub3BuLnB1c2goaFtfXSk7cz8odGhpcy5fZGF0YS5zZWFyY2guZG9tPXRoaXMuX2RhdGEuc2VhcmNoLmRvbS5hZGQoRSh0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbChcIiNcIitFLm1hcChsLGZ1bmN0aW9uKGUpe3JldHVybi0xIT09XCIwMTIzNDU2Nzg5XCIuaW5kZXhPZihlWzBdKT9cIlxcXFwzXCIrZVswXStcIiBcIitlLnN1YnN0cigxKS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIik6ZS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIil9KS5qb2luKFwiLCAjXCIpKSkpLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1FLnZha2F0YS5hcnJheV91bmlxdWUodGhpcy5fZGF0YS5zZWFyY2gucmVzLmNvbmNhdChsKSkpOih0aGlzLl9kYXRhLnNlYXJjaC5kb209RSh0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbChcIiNcIitFLm1hcChsLGZ1bmN0aW9uKGUpe3JldHVybi0xIT09XCIwMTIzNDU2Nzg5XCIuaW5kZXhPZihlWzBdKT9cIlxcXFwzXCIrZVswXStcIiBcIitlLnN1YnN0cigxKS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIik6ZS5yZXBsYWNlKEUuanN0cmVlLmlkcmVnZXgsXCJcXFxcJCZcIil9KS5qb2luKFwiLCAjXCIpKSksdGhpcy5fZGF0YS5zZWFyY2gucmVzPWwpLHRoaXMuX2RhdGEuc2VhcmNoLmRvbS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLXNlYXJjaFwiKX10aGlzLnRyaWdnZXIoXCJzZWFyY2hcIix7bm9kZXM6dGhpcy5fZGF0YS5zZWFyY2guZG9tLHN0cjpyLHJlczp0aGlzLl9kYXRhLnNlYXJjaC5yZXMsc2hvd19vbmx5X21hdGNoZXM6dH0pfSx0aGlzLmNsZWFyX3NlYXJjaD1mdW5jdGlvbigpe3RoaXMuc2V0dGluZ3Muc2VhcmNoLmNsb3NlX29wZW5lZF9vbmNsZWFyJiZ0aGlzLmNsb3NlX25vZGUodGhpcy5fZGF0YS5zZWFyY2gub3BuLDApLHRoaXMudHJpZ2dlcihcImNsZWFyX3NlYXJjaFwiLHtub2Rlczp0aGlzLl9kYXRhLnNlYXJjaC5kb20sc3RyOnRoaXMuX2RhdGEuc2VhcmNoLnN0cixyZXM6dGhpcy5fZGF0YS5zZWFyY2gucmVzfSksdGhpcy5fZGF0YS5zZWFyY2gucmVzLmxlbmd0aCYmKHRoaXMuX2RhdGEuc2VhcmNoLmRvbT1FKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiI1wiK0UubWFwKHRoaXMuX2RhdGEuc2VhcmNoLnJlcyxmdW5jdGlvbihlKXtyZXR1cm4tMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoZVswXSk/XCJcXFxcM1wiK2VbMF0rXCIgXCIrZS5zdWJzdHIoMSkucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOmUucmVwbGFjZShFLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpfSkuam9pbihcIiwgI1wiKSkpLHRoaXMuX2RhdGEuc2VhcmNoLmRvbS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXNlYXJjaFwiKSksdGhpcy5fZGF0YS5zZWFyY2guc3RyPVwiXCIsdGhpcy5fZGF0YS5zZWFyY2gucmVzPVtdLHRoaXMuX2RhdGEuc2VhcmNoLm9wbj1bXSx0aGlzLl9kYXRhLnNlYXJjaC5kb209RSgpfSx0aGlzLnJlZHJhd19ub2RlPWZ1bmN0aW9uKGUsdCxpLHIpe2lmKChlPW8ucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSYmLTEhPT1FLmluQXJyYXkoZS5pZCx0aGlzLl9kYXRhLnNlYXJjaC5yZXMpKXtmb3IodmFyIHMsYSxuPW51bGwscz0wLGE9ZS5jaGlsZE5vZGVzLmxlbmd0aDtzPGE7cysrKWlmKGUuY2hpbGROb2Rlc1tzXSYmZS5jaGlsZE5vZGVzW3NdLmNsYXNzTmFtZSYmLTEhPT1lLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtYW5jaG9yXCIpKXtuPWUuY2hpbGROb2Rlc1tzXTticmVha31uJiYobi5jbGFzc05hbWUrPVwiIGpzdHJlZS1zZWFyY2hcIil9cmV0dXJuIGV9fSwodz1FKS52YWthdGEuc2VhcmNoPWZ1bmN0aW9uKHAsZSxtKXttPW18fHt9LCExIT09KG09dy5leHRlbmQoe30sdy52YWthdGEuc2VhcmNoLmRlZmF1bHRzLG0pKS5mdXp6eSYmKG0uZnV6enk9ITApLHA9bS5jYXNlU2Vuc2l0aXZlP3A6cC50b0xvd2VyQ2FzZSgpO3ZhciB2PW0ubG9jYXRpb24saT1tLmRpc3RhbmNlLGo9bS50aHJlc2hvbGQsaz1wLmxlbmd0aCxiLHkseCx0O3JldHVybiAzMjxrJiYobS5mdXp6eT0hMSksbS5mdXp6eSYmKGI9MTw8ay0xLHk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sdD0wLHQ9MDt0PGs7dCsrKWVbcC5jaGFyQXQodCldPTA7Zm9yKHQ9MDt0PGs7dCsrKWVbcC5jaGFyQXQodCldfD0xPDxrLXQtMTtyZXR1cm4gZX0oKSx4PWZ1bmN0aW9uKGUsdCl7dmFyIGU9ZS9rLHQ9TWF0aC5hYnModi10KTtyZXR1cm4gaT9lK3QvaTp0PzE6ZX0pLHQ9ZnVuY3Rpb24oZSl7aWYoZT1tLmNhc2VTZW5zaXRpdmU/ZS50b1N0cmluZygpOmUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLHA9PT1lfHwtMSE9PWUuaW5kZXhPZihwKSlyZXR1cm57aXNNYXRjaDohMCxzY29yZTowfTtpZighbS5mdXp6eSlyZXR1cm57aXNNYXRjaDohMSxzY29yZToxfTt2YXIgdCxpLHI9ZS5sZW5ndGgscz1qLGE9ZS5pbmRleE9mKHAsdiksbixvLGQ9aytyLGMsbCxoLF8sZyx1PTEsZj1bXTtmb3IoLTEhPT1hJiYocz1NYXRoLm1pbih4KDAsYSkscyksLTEhPT0oYT1lLmxhc3RJbmRleE9mKHAsditrKSkmJihzPU1hdGgubWluKHgoMCxhKSxzKSkpLGE9LTEsdD0wO3Q8azt0Kyspe249MCxvPWQ7d2hpbGUobjxvKXgodCx2K28pPD1zP249bzpkPW8sbz1NYXRoLmZsb29yKChkLW4pLzIrbik7Zm9yKGQ9byxsPU1hdGgubWF4KDEsdi1vKzEpLGg9TWF0aC5taW4oditvLHIpK2ssKF89bmV3IEFycmF5KGgrMikpW2grMV09KDE8PHQpLTEsaT1oO2w8PWk7aS0tKWlmKGc9eVtlLmNoYXJBdChpLTEpXSxfW2ldPTA9PT10PyhfW2krMV08PDF8MSkmZzooX1tpKzFdPDwxfDEpJmd8KGNbaSsxXXxjW2ldKTw8MXwxfGNbaSsxXSxfW2ldJmImJih1PXgodCxpLTEpKTw9cyl7aWYocz11LGYucHVzaChhPWktMSksISh2PGEpKWJyZWFrO2w9TWF0aC5tYXgoMSwyKnYtYSl9aWYoeCh0KzEsdik+cylicmVhaztjPV99cmV0dXJue2lzTWF0Y2g6MDw9YSxzY29yZTp1fX0sITA9PT1lP3tzZWFyY2g6dH06dChlKX0sdy52YWthdGEuc2VhcmNoLmRlZmF1bHRzPXtsb2NhdGlvbjowLGRpc3RhbmNlOjEwMCx0aHJlc2hvbGQ6LjYsZnV6enk6ITEsY2FzZVNlbnNpdGl2ZTohMX0sRS5qc3RyZWUuZGVmYXVsdHMuc29ydD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdldF90ZXh0KGUpPnRoaXMuZ2V0X3RleHQodCk/MTotMX07dmFyIG09IShFLmpzdHJlZS5wbHVnaW5zLnNvcnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXt0LmJpbmQuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub24oXCJtb2RlbC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuc29ydCh0LnBhcmVudCwhMCl9LmJpbmQodGhpcykpLm9uKFwicmVuYW1lX25vZGUuanN0cmVlIGNyZWF0ZV9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5zb3J0KHQucGFyZW50fHx0Lm5vZGUucGFyZW50LCExKSx0aGlzLnJlZHJhd19ub2RlKHQucGFyZW50fHx0Lm5vZGUucGFyZW50LCEwKX0uYmluZCh0aGlzKSkub24oXCJtb3ZlX25vZGUuanN0cmVlIGNvcHlfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuc29ydCh0LnBhcmVudCwhMSksdGhpcy5yZWRyYXdfbm9kZSh0LnBhcmVudCwhMCl9LmJpbmQodGhpcykpfSx0aGlzLnNvcnQ9ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKChlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCYmKGUuY2hpbGRyZW4uc29ydCh0aGlzLnNldHRpbmdzLnNvcnQuYmluZCh0aGlzKSksdCkpZm9yKGk9MCxyPWUuY2hpbGRyZW5fZC5sZW5ndGg7aTxyO2krKyl0aGlzLnNvcnQoZS5jaGlsZHJlbl9kW2ldLCExKX19KSx0LHY7RS5qc3RyZWUuZGVmYXVsdHMuc3RhdGU9e2tleTpcImpzdHJlZVwiLGV2ZW50czpcImNoYW5nZWQuanN0cmVlIG9wZW5fbm9kZS5qc3RyZWUgY2xvc2Vfbm9kZS5qc3RyZWUgY2hlY2tfbm9kZS5qc3RyZWUgdW5jaGVja19ub2RlLmpzdHJlZVwiLHR0bDohMSxmaWx0ZXI6ITEscHJlc2VydmVfbG9hZGVkOiExfSxFLmpzdHJlZS5wbHVnaW5zLnN0YXRlPWZ1bmN0aW9uKGUsdCl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7dC5iaW5kLmNhbGwodGhpcyk7dmFyIGk9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub24odGhpcy5zZXR0aW5ncy5zdGF0ZS5ldmVudHMsZnVuY3Rpb24oKXttJiZjbGVhclRpbWVvdXQobSksbT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5zYXZlX3N0YXRlKCl9LmJpbmQodGhpcyksMTAwKX0uYmluZCh0aGlzKSksdGhpcy50cmlnZ2VyKFwic3RhdGVfcmVhZHlcIil9LmJpbmQodGhpcyk7dGhpcy5lbGVtZW50Lm9uKFwicmVhZHkuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQub25lKFwicmVzdG9yZV9zdGF0ZS5qc3RyZWVcIixpKSx0aGlzLnJlc3RvcmVfc3RhdGUoKXx8aSgpfS5iaW5kKHRoaXMpKX0sdGhpcy5zYXZlX3N0YXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRfc3RhdGUoKTt0aGlzLnNldHRpbmdzLnN0YXRlLnByZXNlcnZlX2xvYWRlZHx8ZGVsZXRlIGUuY29yZS5sb2FkZWQ7dmFyIGU9e3N0YXRlOmUsdHRsOnRoaXMuc2V0dGluZ3Muc3RhdGUudHRsLHNlYzorbmV3IERhdGV9O0UudmFrYXRhLnN0b3JhZ2Uuc2V0KHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5LEpTT04uc3RyaW5naWZ5KGUpKX0sdGhpcy5yZXN0b3JlX3N0YXRlPWZ1bmN0aW9uKCl7dmFyIGk9RS52YWthdGEuc3RvcmFnZS5nZXQodGhpcy5zZXR0aW5ncy5zdGF0ZS5rZXkpO2lmKGkpdHJ5e2k9SlNPTi5wYXJzZShpKX1jYXRjaChlKXtyZXR1cm4hMX1yZXR1cm4hKGkmJmkudHRsJiZpLnNlYyYmK25ldyBEYXRlLWkuc2VjPmkudHRsKSYmKCEhKGk9KGk9aSYmaS5zdGF0ZT9pLnN0YXRlOmkpJiZFLnZha2F0YS5pc19mdW5jdGlvbih0aGlzLnNldHRpbmdzLnN0YXRlLmZpbHRlcik/dGhpcy5zZXR0aW5ncy5zdGF0ZS5maWx0ZXIuY2FsbCh0aGlzLGkpOmkpJiYodGhpcy5zZXR0aW5ncy5zdGF0ZS5wcmVzZXJ2ZV9sb2FkZWR8fGRlbGV0ZSBpLmNvcmUubG9hZGVkLHRoaXMuZWxlbWVudC5vbmUoXCJzZXRfc3RhdGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0Lmluc3RhbmNlLnRyaWdnZXIoXCJyZXN0b3JlX3N0YXRlXCIse3N0YXRlOkUuZXh0ZW5kKCEwLHt9LGkpfSl9KSx0aGlzLnNldF9zdGF0ZShpKSwhMCkpfSx0aGlzLmNsZWFyX3N0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIEUudmFrYXRhLnN0b3JhZ2UuZGVsKHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5KX19LEUudmFrYXRhLnN0b3JhZ2U9e3NldDpmdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oZSx0KX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSl9LGRlbDpmdW5jdGlvbihlKXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpfX0sRS5qc3RyZWUuZGVmYXVsdHMudHlwZXM9e2RlZmF1bHQ6e319LEUuanN0cmVlLmRlZmF1bHRzLnR5cGVzW0UuanN0cmVlLnJvb3RdPXt9LEUuanN0cmVlLnBsdWdpbnMudHlwZXM9ZnVuY3Rpb24oZSxsKXt0aGlzLmluaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKHQmJnQudHlwZXMmJnQudHlwZXMuZGVmYXVsdClmb3IoaSBpbiB0LnR5cGVzKWlmKFwiZGVmYXVsdFwiIT09aSYmaSE9PUUuanN0cmVlLnJvb3QmJnQudHlwZXMuaGFzT3duUHJvcGVydHkoaSkpZm9yKHIgaW4gdC50eXBlcy5kZWZhdWx0KXQudHlwZXMuZGVmYXVsdC5oYXNPd25Qcm9wZXJ0eShyKSYmdC50eXBlc1tpXVtyXT09PVAmJih0LnR5cGVzW2ldW3JdPXQudHlwZXMuZGVmYXVsdFtyXSk7bC5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX21vZGVsLmRhdGFbRS5qc3RyZWUucm9vdF0udHlwZT1FLmpzdHJlZS5yb290fSx0aGlzLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXtsLnJlZnJlc2guY2FsbCh0aGlzLGUsdCksdGhpcy5fbW9kZWwuZGF0YVtFLmpzdHJlZS5yb290XS50eXBlPUUuanN0cmVlLnJvb3R9LHRoaXMuYmluZD1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5vbihcIm1vZGVsLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPXRoaXMuX21vZGVsLmRhdGEscj10Lm5vZGVzLHM9dGhpcy5zZXR0aW5ncy50eXBlcyxhLG4sbz1cImRlZmF1bHRcIixkLGE9MCxuPXIubGVuZ3RoO2E8bjthKyspe2lmKG89XCJkZWZhdWx0XCIsaVtyW2FdXS5vcmlnaW5hbCYmaVtyW2FdXS5vcmlnaW5hbC50eXBlJiZzW2lbclthXV0ub3JpZ2luYWwudHlwZV0mJihvPWlbclthXV0ub3JpZ2luYWwudHlwZSksaVtyW2FdXS5kYXRhJiZpW3JbYV1dLmRhdGEuanN0cmVlJiZpW3JbYV1dLmRhdGEuanN0cmVlLnR5cGUmJnNbaVtyW2FdXS5kYXRhLmpzdHJlZS50eXBlXSYmKG89aVtyW2FdXS5kYXRhLmpzdHJlZS50eXBlKSxpW3JbYV1dLnR5cGU9bywhMD09PWlbclthXV0uaWNvbiYmc1tvXS5pY29uIT09UCYmKGlbclthXV0uaWNvbj1zW29dLmljb24pLHNbb10ubGlfYXR0ciE9PVAmJlwib2JqZWN0XCI9PXR5cGVvZiBzW29dLmxpX2F0dHIpZm9yKGQgaW4gc1tvXS5saV9hdHRyKXNbb10ubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShkKSYmXCJpZFwiIT09ZCYmKGlbclthXV0ubGlfYXR0cltkXT09PVA/aVtyW2FdXS5saV9hdHRyW2RdPXNbb10ubGlfYXR0cltkXTpcImNsYXNzXCI9PT1kJiYoaVtyW2FdXS5saV9hdHRyLmNsYXNzPXNbb10ubGlfYXR0ci5jbGFzcytcIiBcIitpW3JbYV1dLmxpX2F0dHIuY2xhc3MpKTtpZihzW29dLmFfYXR0ciE9PVAmJlwib2JqZWN0XCI9PXR5cGVvZiBzW29dLmFfYXR0cilmb3IoZCBpbiBzW29dLmFfYXR0cilzW29dLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShkKSYmXCJpZFwiIT09ZCYmKGlbclthXV0uYV9hdHRyW2RdPT09UD9pW3JbYV1dLmFfYXR0cltkXT1zW29dLmFfYXR0cltkXTpcImhyZWZcIj09PWQmJlwiI1wiPT09aVtyW2FdXS5hX2F0dHJbZF0/aVtyW2FdXS5hX2F0dHIuaHJlZj1zW29dLmFfYXR0ci5ocmVmOlwiY2xhc3NcIj09PWQmJihpW3JbYV1dLmFfYXR0ci5jbGFzcz1zW29dLmFfYXR0ci5jbGFzcytcIiBcIitpW3JbYV1dLmFfYXR0ci5jbGFzcykpfWlbRS5qc3RyZWUucm9vdF0udHlwZT1FLmpzdHJlZS5yb290fS5iaW5kKHRoaXMpKSxsLmJpbmQuY2FsbCh0aGlzKX0sdGhpcy5nZXRfanNvbj1mdW5jdGlvbihlLHQsaSl7dmFyIHIscyxhPXRoaXMuX21vZGVsLmRhdGEsbj10P0UuZXh0ZW5kKCEwLHt9LHQse25vX2lkOiExfSk6e30sbz1sLmdldF9qc29uLmNhbGwodGhpcyxlLG4saSk7aWYoITE9PT1vKXJldHVybiExO2lmKEUudmFrYXRhLmlzX2FycmF5KG8pKWZvcihyPTAscz1vLmxlbmd0aDtyPHM7cisrKW9bcl0udHlwZT0ob1tyXS5pZHx8MD09PW9bcl0uaWQpJiZhW29bcl0uaWRdJiZhW29bcl0uaWRdLnR5cGU/YVtvW3JdLmlkXS50eXBlOlwiZGVmYXVsdFwiLHQmJnQubm9faWQmJihkZWxldGUgb1tyXS5pZCxvW3JdLmxpX2F0dHImJm9bcl0ubGlfYXR0ci5pZCYmZGVsZXRlIG9bcl0ubGlfYXR0ci5pZCxvW3JdLmFfYXR0ciYmb1tyXS5hX2F0dHIuaWQmJmRlbGV0ZSBvW3JdLmFfYXR0ci5pZCk7ZWxzZSBvLnR5cGU9KG8uaWR8fDA9PT1vLmlkKSYmYVtvLmlkXSYmYVtvLmlkXS50eXBlP2Fbby5pZF0udHlwZTpcImRlZmF1bHRcIix0JiZ0Lm5vX2lkJiYobz10aGlzLl9kZWxldGVfaWRzKG8pKTtyZXR1cm4gb30sdGhpcy5fZGVsZXRlX2lkcz1mdW5jdGlvbihlKXtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHZhciB0PTAsaT1lLmxlbmd0aDt0PGk7dCsrKWVbdF09dGhpcy5fZGVsZXRlX2lkcyhlW3RdKTtyZXR1cm4gZX1yZXR1cm4gZGVsZXRlIGUuaWQsZS5saV9hdHRyJiZlLmxpX2F0dHIuaWQmJmRlbGV0ZSBlLmxpX2F0dHIuaWQsZS5hX2F0dHImJmUuYV9hdHRyLmlkJiZkZWxldGUgZS5hX2F0dHIuaWQsZS5jaGlsZHJlbiYmRS52YWthdGEuaXNfYXJyYXkoZS5jaGlsZHJlbikmJihlLmNoaWxkcmVuPXRoaXMuX2RlbGV0ZV9pZHMoZS5jaGlsZHJlbikpLGV9LHRoaXMuY2hlY2s9ZnVuY3Rpb24oZSx0LGkscixzKXtpZighMT09PWwuY2hlY2suY2FsbCh0aGlzLGUsdCxpLHIscykpcmV0dXJuITE7dD10JiYodC5pZHx8MD09PXQuaWQpP3Q6dGhpcy5nZXRfbm9kZSh0KSxpPWkmJihpLmlkfHwwPT09aS5pZCk/aTp0aGlzLmdldF9ub2RlKGkpO3ZhciBhLG4sbyxkLGMsYT0oYT10JiYodC5pZHx8MD09PXQuaWQpP3MmJnMub3JpZ2luP3Mub3JpZ2luOkUuanN0cmVlLnJlZmVyZW5jZSh0LmlkKTpudWxsKSYmYS5fbW9kZWwmJmEuX21vZGVsLmRhdGE/YS5fbW9kZWwuZGF0YTpudWxsO3N3aXRjaChlKXtjYXNlXCJjcmVhdGVfbm9kZVwiOmNhc2VcIm1vdmVfbm9kZVwiOmNhc2VcImNvcHlfbm9kZVwiOmlmKFwibW92ZV9ub2RlXCIhPT1lfHwtMT09PUUuaW5BcnJheSh0LmlkLGkuY2hpbGRyZW4pKXtpZigobj10aGlzLmdldF9ydWxlcyhpKSkubWF4X2NoaWxkcmVuIT09UCYmLTEhPT1uLm1heF9jaGlsZHJlbiYmbi5tYXhfY2hpbGRyZW49PT1pLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidHlwZXNcIixpZDpcInR5cGVzXzAxXCIscmVhc29uOlwibWF4X2NoaWxkcmVuIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCYmMCE9PXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCYmMCE9PWkuaWQpJiZpLmlkfSl9KTtpZihuLnZhbGlkX2NoaWxkcmVuIT09UCYmLTEhPT1uLnZhbGlkX2NoaWxkcmVuJiYtMT09PUUuaW5BcnJheSh0LnR5cGV8fFwiZGVmYXVsdFwiLG4udmFsaWRfY2hpbGRyZW4pKXJldHVybiEodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ0eXBlc1wiLGlkOlwidHlwZXNfMDJcIixyZWFzb246XCJ2YWxpZF9jaGlsZHJlbiBwcmV2ZW50cyBmdW5jdGlvbjogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQmJjAhPT10LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQmJjAhPT1pLmlkKSYmaS5pZH0pfSk7aWYoYSYmdC5jaGlsZHJlbl9kJiZ0LnBhcmVudHMpe2ZvcihkPW89MCxjPXQuY2hpbGRyZW5fZC5sZW5ndGg7ZDxjO2QrKylvPU1hdGgubWF4KG8sYVt0LmNoaWxkcmVuX2RbZF1dLnBhcmVudHMubGVuZ3RoKTtvPW8tdC5wYXJlbnRzLmxlbmd0aCsxfShvPD0wfHxvPT09UCkmJihvPTEpO2Rve2lmKG4ubWF4X2RlcHRoIT09UCYmLTEhPT1uLm1heF9kZXB0aCYmbi5tYXhfZGVwdGg8bylyZXR1cm4hKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidHlwZXNcIixpZDpcInR5cGVzXzAzXCIscmVhc29uOlwibWF4X2RlcHRoIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCYmMCE9PXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCYmMCE9PWkuaWQpJiZpLmlkfSl9KTtpPXRoaXMuZ2V0X25vZGUoaS5wYXJlbnQpLG49dGhpcy5nZXRfcnVsZXMoaSksbysrfXdoaWxlKGkpfX1yZXR1cm4hMH0sdGhpcy5nZXRfcnVsZXM9ZnVuY3Rpb24oZSl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpKXJldHVybiExO3ZhciBlPXRoaXMuZ2V0X3R5cGUoZSwhMCk7cmV0dXJuIGUubWF4X2RlcHRoPT09UCYmKGUubWF4X2RlcHRoPS0xKSxlLm1heF9jaGlsZHJlbj09PVAmJihlLm1heF9jaGlsZHJlbj0tMSksZS52YWxpZF9jaGlsZHJlbj09PVAmJihlLnZhbGlkX2NoaWxkcmVuPS0xKSxlfSx0aGlzLmdldF90eXBlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuISEoZT10aGlzLmdldF9ub2RlKGUpKSYmKHQ/RS5leHRlbmQoe3R5cGU6ZS50eXBlfSx0aGlzLnNldHRpbmdzLnR5cGVzW2UudHlwZV0pOmUudHlwZSl9LHRoaXMuc2V0X3R5cGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9tb2RlbC5kYXRhLHIscyxhLG4sbyxkLGMsbDtpZihFLnZha2F0YS5pc19hcnJheShlKSl7Zm9yKHM9MCxhPShlPWUuc2xpY2UoKSkubGVuZ3RoO3M8YTtzKyspdGhpcy5zZXRfdHlwZShlW3NdLHQpO3JldHVybiEwfWlmKHI9dGhpcy5zZXR0aW5ncy50eXBlcyxlPXRoaXMuZ2V0X25vZGUoZSksIXJbdF18fCFlKXJldHVybiExO2lmKChjPXRoaXMuZ2V0X25vZGUoZSwhMCkpJiZjLmxlbmd0aCYmKGw9Yy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpKSxuPWUudHlwZSxvPXRoaXMuZ2V0X2ljb24oZSksZS50eXBlPXQsITAhPT1vJiZyW25dJiYocltuXS5pY29uPT09UHx8byE9PXJbbl0uaWNvbil8fHRoaXMuc2V0X2ljb24oZSxyW3RdLmljb249PT1QfHxyW3RdLmljb24pLHJbbl0mJnJbbl0ubGlfYXR0ciE9PVAmJlwib2JqZWN0XCI9PXR5cGVvZiByW25dLmxpX2F0dHIpZm9yKGQgaW4gcltuXS5saV9hdHRyKXJbbl0ubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShkKSYmXCJpZFwiIT09ZCYmKFwiY2xhc3NcIj09PWQ/KGlbZS5pZF0ubGlfYXR0ci5jbGFzcz0oaVtlLmlkXS5saV9hdHRyLmNsYXNzfHxcIlwiKS5yZXBsYWNlKHJbbl0ubGlfYXR0cltkXSxcIlwiKSxjJiZjLnJlbW92ZUNsYXNzKHJbbl0ubGlfYXR0cltkXSkpOmlbZS5pZF0ubGlfYXR0cltkXT09PXJbbl0ubGlfYXR0cltkXSYmKGlbZS5pZF0ubGlfYXR0cltkXT1udWxsLGMmJmMucmVtb3ZlQXR0cihkKSkpO2lmKHJbbl0mJnJbbl0uYV9hdHRyIT09UCYmXCJvYmplY3RcIj09dHlwZW9mIHJbbl0uYV9hdHRyKWZvcihkIGluIHJbbl0uYV9hdHRyKXJbbl0uYV9hdHRyLmhhc093blByb3BlcnR5KGQpJiZcImlkXCIhPT1kJiYoXCJjbGFzc1wiPT09ZD8oaVtlLmlkXS5hX2F0dHIuY2xhc3M9KGlbZS5pZF0uYV9hdHRyLmNsYXNzfHxcIlwiKS5yZXBsYWNlKHJbbl0uYV9hdHRyW2RdLFwiXCIpLGwmJmwucmVtb3ZlQ2xhc3MocltuXS5hX2F0dHJbZF0pKTppW2UuaWRdLmFfYXR0cltkXT09PXJbbl0uYV9hdHRyW2RdJiYoXCJocmVmXCI9PT1kPyhpW2UuaWRdLmFfYXR0cltkXT1cIiNcIixsJiZsLmF0dHIoXCJocmVmXCIsXCIjXCIpKTooZGVsZXRlIGlbZS5pZF0uYV9hdHRyW2RdLGwmJmwucmVtb3ZlQXR0cihkKSkpKTtpZihyW3RdLmxpX2F0dHIhPT1QJiZcIm9iamVjdFwiPT10eXBlb2Ygclt0XS5saV9hdHRyKWZvcihkIGluIHJbdF0ubGlfYXR0cilyW3RdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoZCkmJlwiaWRcIiE9PWQmJihpW2UuaWRdLmxpX2F0dHJbZF09PT1QPyhpW2UuaWRdLmxpX2F0dHJbZF09clt0XS5saV9hdHRyW2RdLGMmJihcImNsYXNzXCI9PT1kP2MuYWRkQ2xhc3Moclt0XS5saV9hdHRyW2RdKTpjLmF0dHIoZCxyW3RdLmxpX2F0dHJbZF0pKSk6XCJjbGFzc1wiPT09ZCYmKGlbZS5pZF0ubGlfYXR0ci5jbGFzcz1yW3RdLmxpX2F0dHJbZF0rXCIgXCIraVtlLmlkXS5saV9hdHRyLmNsYXNzLGMmJmMuYWRkQ2xhc3Moclt0XS5saV9hdHRyW2RdKSkpO2lmKHJbdF0uYV9hdHRyIT09UCYmXCJvYmplY3RcIj09dHlwZW9mIHJbdF0uYV9hdHRyKWZvcihkIGluIHJbdF0uYV9hdHRyKXJbdF0uYV9hdHRyLmhhc093blByb3BlcnR5KGQpJiZcImlkXCIhPT1kJiYoaVtlLmlkXS5hX2F0dHJbZF09PT1QPyhpW2UuaWRdLmFfYXR0cltkXT1yW3RdLmFfYXR0cltkXSxsJiYoXCJjbGFzc1wiPT09ZD9sLmFkZENsYXNzKHJbdF0uYV9hdHRyW2RdKTpsLmF0dHIoZCxyW3RdLmFfYXR0cltkXSkpKTpcImhyZWZcIj09PWQmJlwiI1wiPT09aVtlLmlkXS5hX2F0dHJbZF0/KGlbZS5pZF0uYV9hdHRyLmhyZWY9clt0XS5hX2F0dHIuaHJlZixsJiZsLmF0dHIoXCJocmVmXCIsclt0XS5hX2F0dHIuaHJlZikpOlwiY2xhc3NcIj09PWQmJihpW2UuaWRdLmFfYXR0ci5jbGFzcz1yW3RdLmFfYXR0ci5jbGFzcytcIiBcIitpW2UuaWRdLmFfYXR0ci5jbGFzcyxsJiZsLmFkZENsYXNzKHJbdF0uYV9hdHRyW2RdKSkpO3JldHVybiEwfX0sRS5qc3RyZWUuZGVmYXVsdHMudW5pcXVlPXtjYXNlX3NlbnNpdGl2ZTohMSx0cmltX3doaXRlc3BhY2U6ITEsZHVwbGljYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrXCIgKFwiK3QrXCIpXCJ9fSxFLmpzdHJlZS5wbHVnaW5zLnVuaXF1ZT1mdW5jdGlvbihlLGYpe3RoaXMuY2hlY2s9ZnVuY3Rpb24oZSx0LGkscixzKXtpZighMT09PWYuY2hlY2suY2FsbCh0aGlzLGUsdCxpLHIscykpcmV0dXJuITE7aWYodD10JiYodC5pZHx8MD09PXQuaWQpP3Q6dGhpcy5nZXRfbm9kZSh0KSwhKGk9aSYmKGkuaWR8fDA9PT1pLmlkKT9pOnRoaXMuZ2V0X25vZGUoaSkpfHwhaS5jaGlsZHJlbilyZXR1cm4hMDtmb3IodmFyIGE9XCJyZW5hbWVfbm9kZVwiPT09ZT9yOnQudGV4dCxuPVtdLG89dGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUsZD10aGlzLnNldHRpbmdzLnVuaXF1ZS50cmltX3doaXRlc3BhY2UsYz10aGlzLl9tb2RlbC5kYXRhLGwsaCxfLGw9MCxoPWkuY2hpbGRyZW4ubGVuZ3RoO2w8aDtsKyspXz1jW2kuY2hpbGRyZW5bbF1dLnRleHQsb3x8KF89Xy50b0xvd2VyQ2FzZSgpKSxkJiYoXz1fLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKSxuLnB1c2goXyk7c3dpdGNoKG98fChhPWEudG9Mb3dlckNhc2UoKSksZCYmKGE9YS5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksZSl7Y2FzZVwiZGVsZXRlX25vZGVcIjpyZXR1cm4hMDtjYXNlXCJyZW5hbWVfbm9kZVwiOnJldHVybiBfPXQudGV4dHx8XCJcIixvfHwoXz1fLnRvTG93ZXJDYXNlKCkpLGQmJihfPV8ucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLChsPS0xPT09RS5pbkFycmF5KGEsbil8fHQudGV4dCYmXz09PWEpfHwodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ1bmlxdWVcIixpZDpcInVuaXF1ZV8wMVwiLHJlYXNvbjpcIkNoaWxkIHdpdGggbmFtZSBcIithK1wiIGFscmVhZHkgZXhpc3RzLiBQcmV2ZW50aW5nOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCYmMCE9PXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCYmMCE9PWkuaWQpJiZpLmlkfSl9KSxsO2Nhc2VcImNyZWF0ZV9ub2RlXCI6cmV0dXJuKGw9LTE9PT1FLmluQXJyYXkoYSxuKSl8fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzA0XCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2ErXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pLGw7Y2FzZVwiY29weV9ub2RlXCI6cmV0dXJuKGw9LTE9PT1FLmluQXJyYXkoYSxuKSl8fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzAyXCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2ErXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pLGw7Y2FzZVwibW92ZV9ub2RlXCI6cmV0dXJuKGw9dC5wYXJlbnQ9PT1pLmlkJiYoIXN8fCFzLmlzX211bHRpKXx8LTE9PT1FLmluQXJyYXkoYSxuKSl8fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzAzXCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2ErXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkJiYwIT09dC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkJiYwIT09aS5pZCkmJmkuaWR9KX0pLGx9cmV0dXJuITB9LHRoaXMuY3JlYXRlX25vZGU9ZnVuY3Rpb24oZSx0LGkscixzKXtpZighdHx8XCJvYmplY3RcIj09dHlwZW9mIHQmJnQudGV4dD09PVApe2lmKG51bGw9PT1lJiYoZT1FLmpzdHJlZS5yb290KSwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuIGYuY3JlYXRlX25vZGUuY2FsbCh0aGlzLGUsdCxpLHIscyk7aWYoIShpPWk9PT1QP1wibGFzdFwiOmkpLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIXMmJiF0aGlzLmlzX2xvYWRlZChlKSlyZXR1cm4gZi5jcmVhdGVfbm9kZS5jYWxsKHRoaXMsZSx0LGkscixzKTt0PXR8fHt9O2Zvcih2YXIgYSxuLG8sZCxjLGw9dGhpcy5fbW9kZWwuZGF0YSxoPXRoaXMuc2V0dGluZ3MudW5pcXVlLmNhc2Vfc2Vuc2l0aXZlLF89dGhpcy5zZXR0aW5ncy51bmlxdWUudHJpbV93aGl0ZXNwYWNlLGc9dGhpcy5zZXR0aW5ncy51bmlxdWUuZHVwbGljYXRlLHUsbj1hPXRoaXMuZ2V0X3N0cmluZyhcIk5ldyBub2RlXCIpLG89W10sZD0wLGM9ZS5jaGlsZHJlbi5sZW5ndGg7ZDxjO2QrKyl1PWxbZS5jaGlsZHJlbltkXV0udGV4dCxofHwodT11LnRvTG93ZXJDYXNlKCkpLF8mJih1PXUucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLG8ucHVzaCh1KTtkPTEsdT1uLGh8fCh1PXUudG9Mb3dlckNhc2UoKSksXyYmKHU9dS5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSk7d2hpbGUoLTEhPT1FLmluQXJyYXkodSxvKSl1PW49Zy5jYWxsKHRoaXMsYSwrK2QpLnRvU3RyaW5nKCksaHx8KHU9dS50b0xvd2VyQ2FzZSgpKSxfJiYodT11LnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKTt0LnRleHQ9bn1yZXR1cm4gZi5jcmVhdGVfbm9kZS5jYWxsKHRoaXMsZSx0LGkscixzKX19O3ZhciBqPWIuY3JlYXRlRWxlbWVudChcIkRJVlwiKTtpZihqLnNldEF0dHJpYnV0ZShcInVuc2VsZWN0YWJsZVwiLFwib25cIiksai5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksai5jbGFzc05hbWU9XCJqc3RyZWUtd2hvbGVyb3dcIixqLmlubmVySFRNTD1cIiYjMTYwO1wiLEUuanN0cmVlLnBsdWdpbnMud2hvbGVyb3c9ZnVuY3Rpb24oZSxhKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXthLmJpbmQuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub24oXCJyZWFkeS5qc3RyZWUgc2V0X3N0YXRlLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5oaWRlX2RvdHMoKX0uYmluZCh0aGlzKSkub24oXCJpbml0LmpzdHJlZSBsb2FkaW5nLmpzdHJlZSByZWFkeS5qc3RyZWVcIixmdW5jdGlvbigpe3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLXdob2xlcm93LXVsXCIpfS5iaW5kKHRoaXMpKS5vbihcImRlc2VsZWN0X2FsbC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXdob2xlcm93LWNsaWNrZWRcIil9LmJpbmQodGhpcykpLm9uKFwiY2hhbmdlZC5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXdob2xlcm93LWNsaWNrZWRcIik7Zm9yKHZhciBpPSExLHIscyxyPTAscz10LnNlbGVjdGVkLmxlbmd0aDtyPHM7cisrKShpPXRoaXMuZ2V0X25vZGUodC5zZWxlY3RlZFtyXSwhMCkpJiZpLmxlbmd0aCYmaS5jaGlsZHJlbihcIi5qc3RyZWUtd2hvbGVyb3dcIikuYWRkQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKX0uYmluZCh0aGlzKSkub24oXCJvcGVuX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXt0aGlzLmdldF9ub2RlKHQubm9kZSwhMCkuZmluZChcIi5qc3RyZWUtY2xpY2tlZFwiKS5wYXJlbnQoKS5jaGlsZHJlbihcIi5qc3RyZWUtd2hvbGVyb3dcIikuYWRkQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKX0uYmluZCh0aGlzKSkub24oXCJob3Zlcl9ub2RlLmpzdHJlZSBkZWhvdmVyX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtcImhvdmVyX25vZGVcIj09PWUudHlwZSYmdGhpcy5pc19kaXNhYmxlZCh0Lm5vZGUpfHx0aGlzLmdldF9ub2RlKHQubm9kZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLXdob2xlcm93XCIpW1wiaG92ZXJfbm9kZVwiPT09ZS50eXBlP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianN0cmVlLXdob2xlcm93LWhvdmVyZWRcIil9LmJpbmQodGhpcykpLm9uKFwiY29udGV4dG1lbnUuanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93XCIsZnVuY3Rpb24oZSl7dmFyIHQ7dGhpcy5fZGF0YS5jb250ZXh0bWVudSYmKGUucHJldmVudERlZmF1bHQoKSx0PUUuRXZlbnQoXCJjb250ZXh0bWVudVwiLHttZXRhS2V5OmUubWV0YUtleSxjdHJsS2V5OmUuY3RybEtleSxhbHRLZXk6ZS5hbHRLZXksc2hpZnRLZXk6ZS5zaGlmdEtleSxwYWdlWDplLnBhZ2VYLHBhZ2VZOmUucGFnZVl9KSxFKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0KSl9LmJpbmQodGhpcykpLm9uKFwiY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93XCIsZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTt2YXIgdD1FLkV2ZW50KFwiY2xpY2tcIix7bWV0YUtleTplLm1ldGFLZXksY3RybEtleTplLmN0cmxLZXksYWx0S2V5OmUuYWx0S2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXl9KTtFKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0KS50cmlnZ2VyKFwiZm9jdXNcIil9KS5vbihcImRibGNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS13aG9sZXJvd1wiLGZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7dmFyIHQ9RS5FdmVudChcImRibGNsaWNrXCIse21ldGFLZXk6ZS5tZXRhS2V5LGN0cmxLZXk6ZS5jdHJsS2V5LGFsdEtleTplLmFsdEtleSxzaGlmdEtleTplLnNoaWZ0S2V5fSk7RShlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maXJzdCgpLnRyaWdnZXIodCkudHJpZ2dlcihcImZvY3VzXCIpfSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtbGVhZiA+IC5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTt2YXIgdD1FLkV2ZW50KFwiY2xpY2tcIix7bWV0YUtleTplLm1ldGFLZXksY3RybEtleTplLmN0cmxLZXksYWx0S2V5OmUuYWx0S2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXl9KTtFKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0KS50cmlnZ2VyKFwiZm9jdXNcIil9LmJpbmQodGhpcykpLm9uKFwibW91c2VvdmVyLmpzdHJlZVwiLFwiLmpzdHJlZS13aG9sZXJvdywgLmpzdHJlZS1pY29uXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5pc19kaXNhYmxlZChlLmN1cnJlbnRUYXJnZXQpfHx0aGlzLmhvdmVyX25vZGUoZS5jdXJyZW50VGFyZ2V0KSwhMX0uYmluZCh0aGlzKSkub24oXCJtb3VzZWxlYXZlLmpzdHJlZVwiLFwiLmpzdHJlZS1ub2RlXCIsZnVuY3Rpb24oZSl7dGhpcy5kZWhvdmVyX25vZGUoZS5jdXJyZW50VGFyZ2V0KX0uYmluZCh0aGlzKSl9LHRoaXMudGVhcmRvd249ZnVuY3Rpb24oKXt0aGlzLnNldHRpbmdzLndob2xlcm93JiZ0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtd2hvbGVyb3dcIikucmVtb3ZlKCksYS50ZWFyZG93bi5jYWxsKHRoaXMpfSx0aGlzLnJlZHJhd19ub2RlPWZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzO3JldHVybihlPWEucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSYmKHM9ai5jbG9uZU5vZGUoITApLC0xIT09RS5pbkFycmF5KGUuaWQsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkKSYmKHMuY2xhc3NOYW1lKz1cIiBqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKSx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCYmdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9PT1lLmlkJiYocy5jbGFzc05hbWUrPVwiIGpzdHJlZS13aG9sZXJvdy1ob3ZlcmVkXCIpLGUuaW5zZXJ0QmVmb3JlKHMsZS5jaGlsZE5vZGVzWzBdKSksZX19LHdpbmRvdy5jdXN0b21FbGVtZW50cyYmT2JqZWN0JiZPYmplY3QuY3JlYXRlKXt2YXIgZT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSk7ZS5jcmVhdGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgZT17Y29yZTp7fSxwbHVnaW5zOltdfSx0O2Zvcih0IGluIEUuanN0cmVlLnBsdWdpbnMpRS5qc3RyZWUucGx1Z2lucy5oYXNPd25Qcm9wZXJ0eSh0KSYmdGhpcy5hdHRyaWJ1dGVzW3RdJiYoZS5wbHVnaW5zLnB1c2godCksdGhpcy5nZXRBdHRyaWJ1dGUodCkmJkpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUodCkpJiYoZVt0XT1KU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKHQpKSkpO2Zvcih0IGluIEUuanN0cmVlLmRlZmF1bHRzLmNvcmUpRS5qc3RyZWUuZGVmYXVsdHMuY29yZS5oYXNPd25Qcm9wZXJ0eSh0KSYmdGhpcy5hdHRyaWJ1dGVzW3RdJiYoZS5jb3JlW3RdPUpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUodCkpfHx0aGlzLmdldEF0dHJpYnV0ZSh0KSk7RSh0aGlzKS5qc3RyZWUoZSl9O3RyeXt3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidmFrYXRhLWpzdHJlZVwiLGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmV9KX1jYXRjaChlKXt9fX19KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=
